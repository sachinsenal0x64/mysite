"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const config_1 = require("../config");
const Tasks_1 = __importDefault(require("../utils/Tasks"));
class PreloadRequests {
    constructor() {
        /**
         * The list of preload config options which will be later resolved to PreloadRequests.
         */
        this.options = [];
    }
    /**
     * Adds preload config options to the list
     * @param preloadOptions
     */
    push(...options) {
        this.options.push(...options);
    }
    /**
     * Returns object with preload config
     * @private
     */
    async getPreloadConfig() {
        const edgioConfig = (0, config_1.getConfig)();
        const requests = [];
        await new Tasks_1.default()
            .add(...this.options)
            .onTaskDone((result) => requests.push(...result))
            .resolve();
        return {
            requests,
            concurrency: edgioConfig === null || edgioConfig === void 0 ? void 0 : edgioConfig.prerenderConcurrency,
        };
    }
}
exports.default = PreloadRequests;
