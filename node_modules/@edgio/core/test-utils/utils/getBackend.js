"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.backendHost = exports.staticHost = exports.appHost = void 0;
const config_1 = require("../../config");
const ports_1 = require("../../utils/ports");
/**
 * Gets the default host for the app
 */
function appHost() {
    return `${ports_1.localhost}:${ports_1.jsPort}`;
}
exports.appHost = appHost;
/**
 * Gets the default host for static assets
 */
function staticHost() {
    return `${ports_1.localhost}:${ports_1.assetPort}`;
}
exports.staticHost = staticHost;
/**
 * Gets the host for the given origin name
 * @param name
 */
function backendHost(name) {
    const config = (0, config_1.getConfig)();
    if (!config.origins) {
        throw new Error('No origins are defined.');
    }
    const originGroup = config.origins.find(origin => origin.name === name);
    if (!originGroup) {
        throw new Error(`No origin was found with name: "${name}"`);
    }
    if (!originGroup.hosts || !originGroup.hosts[0]) {
        throw new Error(`The origin does not specify any hosts.`);
    }
    const { hosts: [host], } = originGroup;
    if (typeof host.location === 'string') {
        return host.location;
    }
    else {
        const { hostname, port } = host.location;
        return port ? `${hostname}:${port}` : hostname;
    }
}
exports.backendHost = backendHost;
