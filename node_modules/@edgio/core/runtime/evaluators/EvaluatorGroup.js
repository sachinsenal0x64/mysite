"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.EvaluatorGroup = void 0;
/**
 * Represent group of Evaluators
 * and allow to perform bulk execution of them on certain condition provided as matcher
 */
class EvaluatorGroup {
    /**
     * @param evaluators initial list of Evaluators or another EvaluatorGroups
     * @param matcher regex condition which input expression must satisfy
     */
    constructor(evaluators = [], matcher = /(.*)/) {
        this.evaluators = [...evaluators];
        this.matcher = matcher;
    }
    /**
     * Executes all Evaluators in the group
     * and return the result of first one which returns the string (OR equivalent)
     * if the expression satisfies EvaluatorGroup's matcher
     * @param input expression
     * @param values object with extracted values from the request
     * @returns string on success and undefined in other cases
     */
    execute(input, values) {
        if (!this.matcher.test(input))
            return undefined;
        for (const evaluator of this.evaluators) {
            const result = evaluator.execute(input, values);
            if (typeof result === 'string')
                return result;
        }
        return undefined;
    }
    /**
     * Adds the Evaluator or another EvaluatorGroup to the group
     */
    add(evaluator) {
        this.evaluators.push(evaluator);
    }
}
exports.EvaluatorGroup = EvaluatorGroup;
