{
  "version": 3,
  "sources": ["../../../src/runtime/edge-functions/sdk/consts.js", "../../../src/runtime/edge-functions/sdk/symbols.js", "../../../src/runtime/edge-functions/bundled-object-inspect.js", "../../../src/runtime/edge-functions/sdk/readable-stream.js", "../../../src/runtime/edge-functions/sdk/edgio-readable-stream-reader.js", "../../../src/runtime/edge-functions/sdk.js"],
  "sourcesContent": ["// Constants used in sdk.js and its dependencies.\nmodule.exports = {\n  STDOUT_FD: 1,\n  STDERR_FD: 2,\n\n  // Dictionary namespaces used here, in sailfish and EdgeFunction.ts\n  ENV_VAR_NAMESPACE_EDGIO_CONFIG: 'edgio-config',\n  ENV_VAR_NAMESPACE_EDGIO_ORIGINS: 'edgio-origins',\n  ENV_VAR_NAMESPACE_EDGIO_PROPENVVAR: 'edgio-property-environment-variables',\n  ENV_VAR_NAMESPACE_EDGIO_FEATURE_FLAGS: 'edgio-feature-flags',\n  ENV_VAR_NAMESPACE_EDGIO_USRVAR: 'edgio-usrvar',\n  ENV_VAR_NAMESPACE_EDGIO_GEO: 'edgio-geo',\n  ENV_VAR_NAMESPACE_EDGIO_WURFL: 'edgio-wurfl',\n  ENV_VAR_NAMESPACE_EDGIO_VIRT: 'edgio-virt',\n  UTF_8: 'utf-8',\n\n  // Metrics available to sdk.js from sailfish wasm_metrics.h\n  WASM_METRIC_JSON_PARSE_INVOCATION_TOTAL: 1000,\n  WASM_METRIC_JSON_STRINGIFY_INVOCATION_TOTAL: 1001,\n  WASM_METRIC_JSON_PARSE_MICROSECONDS_TOTAL: 1002,\n  WASM_METRIC_JSON_STRINGIFY_MICROSECONDS_TOTAL: 1003,\n  WASM_METRIC_TEXT_ENCODE_INVOCATION_TOTAL: 1004,\n  WASM_METRIC_TEXT_DECODE_INVOCATION_TOTAL: 1005,\n  WASM_METRIC_TEXT_ENCODE_MICROSECONDS_TOTAL: 1006,\n  WASM_METRIC_TEXT_DECODE_MICROSECONDS_TOTAL: 1007,\n\n  INTERNAL_ERROR_PREFIX: 'Internal Error: ',\n}\n", "// We use symbols for all internal properties to improve the performance and avoid\n// accidental access or conflicts from user code, including JSON serialization.\nmodule.exports = {\n  AppendFn: Symbol('append-fn'),\n  Body: Symbol('body'),\n  BodyOnHost: Symbol('body-on-host'),\n  BodyReadOffset: Symbol('body-read-offset'),\n  BodyUsed: Symbol('body-used'),\n  CheckFn: Symbol('check-fn'),\n  Chunks: Symbol('Chunks'),\n  Controller: Symbol('Controller'),\n  Done: Symbol('Done'),\n  EdgioId: Symbol('edgio-id'),\n  Encoding: Symbol('encoding'),\n  ErrorCode: Symbol('error-code'),\n  ErrorState: Symbol('error-state'),\n  GetBodyChunkFn: Symbol('get-body-chunk-fn'),\n  GetFn: Symbol('get-fn'),\n  KeysFn: Symbol('keys-fn'),\n  MoveBodyToHost: Symbol('move-body-to-host'),\n  Namespace: Symbol('namespace'),\n  Options: Symbol('options'),\n  Origins: Symbol('edgio-origins'),\n  PendingNextPromise: Symbol('PendingNextPromise'),\n  PendingNextPromiseReject: Symbol('PendingNextPromiseReject'),\n  PendingNextPromiseResolve: Symbol('PendingNextPromiseResolve'),\n  QueuingStrategy: Symbol('QueuingStrategy'),\n  Redirected: Symbol('redirected'),\n  RemoveFn: Symbol('remove-fn'),\n  ReqOrRespObject: Symbol('req-or-resp-object'),\n  ReqRespHeaders: Symbol('req-resp-headers'),\n  RequestObject: Symbol('request-object'),\n  ResponseObject: Symbol('response-object'),\n  SendToClient: Symbol('send-to-client'),\n  SetFn: Symbol('set-fn'),\n  Stream: Symbol('Stream'),\n  UnderlyingSource: Symbol('UnderlyingSource'),\n  Url: Symbol('url'),\n}\n", "var Et=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var et=Et(()=>{});var U=typeof Map==\"function\"&&Map.prototype,N=Object.getOwnPropertyDescriptor&&U?Object.getOwnPropertyDescriptor(Map.prototype,\"size\"):null,I=U&&N&&typeof N.get==\"function\"?N.get:null,rt=U&&Map.prototype.forEach,K=typeof Set==\"function\"&&Set.prototype,C=Object.getOwnPropertyDescriptor&&K?Object.getOwnPropertyDescriptor(Set.prototype,\"size\"):null,L=K&&C&&typeof C.get==\"function\"?C.get:null,nt=K&&Set.prototype.forEach,$t=typeof WeakMap==\"function\"&&WeakMap.prototype,w=$t?WeakMap.prototype.has:null,Mt=typeof WeakSet==\"function\"&&WeakSet.prototype,E=Mt?WeakSet.prototype.has:null,Wt=typeof WeakRef==\"function\"&&WeakRef.prototype,at=Wt?WeakRef.prototype.deref:null,It=Boolean.prototype.valueOf,Lt=Object.prototype.toString,_t=Function.prototype.toString,Rt=String.prototype.match,Q=String.prototype.slice,s=String.prototype.replace,kt=String.prototype.toUpperCase,it=String.prototype.toLowerCase,gt=RegExp.prototype.test,ot=Array.prototype.concat,u=Array.prototype.join,qt=Array.prototype.slice,ft=Math.floor,z=typeof BigInt==\"function\"?BigInt.prototype.valueOf:null,B=Object.getOwnPropertySymbols,F=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"symbol\"?Symbol.prototype.toString:null,m=typeof Symbol==\"function\"&&typeof Symbol.iterator==\"object\",o=typeof Symbol==\"function\"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===m?\"object\":\"symbol\")?Symbol.toStringTag:null,vt=Object.prototype.propertyIsEnumerable,lt=(typeof Reflect==\"function\"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function ut(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||gt.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t==\"number\"){var a=t<0?-ft(-t):ft(t);if(a!==t){var i=String(a),r=Q.call(e,i.length+1);return s.call(i,n,\"$&_\")+\".\"+s.call(s.call(r,/([0-9]{3})/g,\"$&_\"),/_$/,\"\")}}return s.call(e,n,\"$&_\")}var H=et(),ct=H.custom,pt=ht(ct)?ct:null;module.exports=function t(e,n,a,i){var r=n||{};if(y(r,\"quoteStyle\")&&r.quoteStyle!==\"single\"&&r.quoteStyle!==\"double\")throw new TypeError('option \"quoteStyle\" must be \"single\" or \"double\"');if(y(r,\"maxStringLength\")&&(typeof r.maxStringLength==\"number\"?r.maxStringLength<0&&r.maxStringLength!==1/0:r.maxStringLength!==null))throw new TypeError('option \"maxStringLength\", if provided, must be a positive integer, Infinity, or `null`');var c=y(r,\"customInspect\")?r.customInspect:!0;if(typeof c!=\"boolean\"&&c!==\"symbol\")throw new TypeError(\"option \\\"customInspect\\\", if provided, must be `true`, `false`, or `'symbol'`\");if(y(r,\"indent\")&&r.indent!==null&&r.indent!==\"\t\"&&!(parseInt(r.indent,10)===r.indent&&r.indent>0))throw new TypeError('option \"indent\" must be \"\\\\t\", an integer > 0, or `null`');if(y(r,\"numericSeparator\")&&typeof r.numericSeparator!=\"boolean\")throw new TypeError('option \"numericSeparator\", if provided, must be `true` or `false`');var v=r.numericSeparator;if(typeof e>\"u\")return\"undefined\";if(e===null)return\"null\";if(typeof e==\"boolean\")return e?\"true\":\"false\";if(typeof e==\"string\")return dt(e,r);if(typeof e==\"number\"){if(e===0)return 1/0/e>0?\"0\":\"-0\";var f=String(e);return v?ut(e,f):f}if(typeof e==\"bigint\"){var p=String(e)+\"n\";return v?ut(e,p):p}var _=typeof r.depth>\"u\"?5:r.depth;if(typeof a>\"u\"&&(a=0),a>=_&&_>0&&typeof e==\"object\")return V(e)?\"[Array]\":\"[Object]\";var S=Yt(r,a);if(typeof i>\"u\")i=[];else if(mt(i,e)>=0)return\"[Circular]\";function l(h,M,wt){if(M&&(i=qt.call(i),i.push(M)),wt){var tt={depth:r.depth};return y(r,\"quoteStyle\")&&(tt.quoteStyle=r.quoteStyle),t(h,tt,a+1,i)}return t(h,r,a+1,i)}if(typeof e==\"function\"&&!yt(e)){var G=Ft(e),X=W(e,l);return\"[Function\"+(G?\": \"+G:\" (anonymous)\")+\"]\"+(X.length>0?\" { \"+u.call(X,\", \")+\" }\":\"\")}if(ht(e)){var Y=m?s.call(String(e),/^(Symbol\\(.*\\))_[^)]*$/,\"$1\"):F.call(e);return typeof e==\"object\"&&!m?O(Y):Y}if(Qt(e)){for(var d=\"<\"+it.call(String(e.nodeName)),R=e.attributes||[],$=0;$<R.length;$++)d+=\" \"+R[$].name+\"=\"+St(At(R[$].value),\"double\",r);return d+=\">\",e.childNodes&&e.childNodes.length&&(d+=\"...\"),d+=\"</\"+it.call(String(e.nodeName))+\">\",d}if(V(e)){if(e.length===0)return\"[]\";var k=W(e,l);return S&&!Xt(k)?\"[\"+J(k,S)+\"]\":\"[ \"+u.call(k,\", \")+\" ]\"}if(Dt(e)){var q=W(e,l);return!(\"cause\"in Error.prototype)&&\"cause\"in e&&!vt.call(e,\"cause\")?\"{ [\"+String(e)+\"] \"+u.call(ot.call(\"[cause]: \"+l(e.cause),q),\", \")+\" }\":q.length===0?\"[\"+String(e)+\"]\":\"{ [\"+String(e)+\"] \"+u.call(q,\", \")+\" }\"}if(typeof e==\"object\"&&c){if(pt&&typeof e[pt]==\"function\"&&H)return H(e,{depth:_-a});if(c!==\"symbol\"&&typeof e.inspect==\"function\")return e.inspect()}if(Ht(e)){var Z=[];return rt&&rt.call(e,function(h,M){Z.push(l(M,e,!0)+\" => \"+l(h,e))}),st(\"Map\",I.call(e),Z,S)}if(Ut(e)){var x=[];return nt&&nt.call(e,function(h){x.push(l(h,e))}),st(\"Set\",L.call(e),x,S)}if(Vt(e))return P(\"WeakMap\");if(Kt(e))return P(\"WeakSet\");if(Jt(e))return P(\"WeakRef\");if(Ct(e))return O(l(Number(e)));if(Pt(e))return O(l(z.call(e)));if(Bt(e))return O(It.call(e));if(Nt(e))return O(l(String(e)));if(!Tt(e)&&!yt(e)){var A=W(e,l),b=lt?lt(e)===Object.prototype:e instanceof Object||e.constructor===Object,T=e instanceof Object?\"\":\"null prototype\",j=!b&&o&&Object(e)===e&&o in e?Q.call(g(e),8,-1):T?\"Object\":\"\",Ot=b||typeof e.constructor!=\"function\"?\"\":e.constructor.name?e.constructor.name+\" \":\"\",D=Ot+(j||T?\"[\"+u.call(ot.call([],j||[],T||[]),\": \")+\"] \":\"\");return A.length===0?D+\"{}\":S?D+\"{\"+J(A,S)+\"}\":D+\"{ \"+u.call(A,\", \")+\" }\"}return String(e)};function St(t,e,n){var a=(n.quoteStyle||e)===\"double\"?'\"':\"'\";return a+t+a}function At(t){return s.call(String(t),/\"/g,\"&quot;\")}function V(t){return g(t)===\"[object Array]\"&&(!o||!(typeof t==\"object\"&&o in t))}function Tt(t){return g(t)===\"[object Date]\"&&(!o||!(typeof t==\"object\"&&o in t))}function yt(t){return g(t)===\"[object RegExp]\"&&(!o||!(typeof t==\"object\"&&o in t))}function Dt(t){return g(t)===\"[object Error]\"&&(!o||!(typeof t==\"object\"&&o in t))}function Nt(t){return g(t)===\"[object String]\"&&(!o||!(typeof t==\"object\"&&o in t))}function Ct(t){return g(t)===\"[object Number]\"&&(!o||!(typeof t==\"object\"&&o in t))}function Bt(t){return g(t)===\"[object Boolean]\"&&(!o||!(typeof t==\"object\"&&o in t))}function ht(t){if(m)return t&&typeof t==\"object\"&&t instanceof Symbol;if(typeof t==\"symbol\")return!0;if(!t||typeof t!=\"object\"||!F)return!1;try{return F.call(t),!0}catch{}return!1}function Pt(t){if(!t||typeof t!=\"object\"||!z)return!1;try{return z.call(t),!0}catch{}return!1}var zt=Object.prototype.hasOwnProperty||function(t){return t in this};function y(t,e){return zt.call(t,e)}function g(t){return Lt.call(t)}function Ft(t){if(t.name)return t.name;var e=Rt.call(_t.call(t),/^function\\s*([\\w$]+)/);return e?e[1]:null}function mt(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,a=t.length;n<a;n++)if(t[n]===e)return n;return-1}function Ht(t){if(!I||!t||typeof t!=\"object\")return!1;try{I.call(t);try{L.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Vt(t){if(!w||!t||typeof t!=\"object\")return!1;try{w.call(t,w);try{E.call(t,E)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Jt(t){if(!at||!t||typeof t!=\"object\")return!1;try{return at.call(t),!0}catch{}return!1}function Ut(t){if(!L||!t||typeof t!=\"object\")return!1;try{L.call(t);try{I.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function Kt(t){if(!E||!t||typeof t!=\"object\")return!1;try{E.call(t,E);try{w.call(t,w)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function Qt(t){return!t||typeof t!=\"object\"?!1:typeof HTMLElement<\"u\"&&t instanceof HTMLElement?!0:typeof t.nodeName==\"string\"&&typeof t.getAttribute==\"function\"}function dt(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,a=\"... \"+n+\" more character\"+(n>1?\"s\":\"\");return dt(Q.call(t,0,e.maxStringLength),e)+a}var i=s.call(s.call(t,/(['\\\\])/g,\"\\\\$1\"),/[\\x00-\\x1f]/g,Gt);return St(i,\"single\",e)}function Gt(t){var e=t.charCodeAt(0),n={8:\"b\",9:\"t\",10:\"n\",12:\"f\",13:\"r\"}[e];return n?\"\\\\\"+n:\"\\\\x\"+(e<16?\"0\":\"\")+kt.call(e.toString(16))}function O(t){return\"Object(\"+t+\")\"}function P(t){return t+\" { ? }\"}function st(t,e,n,a){var i=a?J(n,a):u.call(n,\", \");return t+\" (\"+e+\") {\"+i+\"}\"}function Xt(t){for(var e=0;e<t.length;e++)if(mt(t[e],`\n`)>=0)return!1;return!0}function Yt(t,e){var n;if(t.indent===\"\t\")n=\"\t\";else if(typeof t.indent==\"number\"&&t.indent>0)n=u.call(Array(t.indent+1),\" \");else return null;return{base:n,prev:u.call(Array(e+1),n)}}function J(t,e){if(t.length===0)return\"\";var n=`\n`+e.prev+e.base;return n+u.call(t,\",\"+n)+`\n`+e.prev}function W(t,e){var n=V(t),a=[];if(n){a.length=t.length;for(var i=0;i<t.length;i++)a[i]=y(t,i)?e(t[i],t):\"\"}var r=typeof B==\"function\"?B(t):[],c;if(m){c={};for(var v=0;v<r.length;v++)c[\"$\"+r[v]]=r[v]}for(var f in t)!y(t,f)||n&&String(Number(f))===f&&f<t.length||m&&c[\"$\"+f]instanceof Symbol||(gt.call(/[^\\w$]/,f)?a.push(e(f,t)+\": \"+e(t[f],t)):a.push(f+\": \"+e(t[f],t)));if(typeof B==\"function\")for(var p=0;p<r.length;p++)vt.call(t,r[p])&&a.push(\"[\"+e(r[p])+\"]: \"+e(t[r[p]],t));return a}\n", "const {\n  Chunks,\n  Controller,\n  Done,\n  ErrorState,\n  PendingNextPromise,\n  PendingNextPromiseReject,\n  PendingNextPromiseResolve,\n  QueuingStrategy,\n  Stream,\n  UnderlyingSource,\n} = require('./symbols')\n\nconst promisify =\n  fn =>\n  (...args) => {\n    return new Promise((resolve, reject) => {\n      try {\n        resolve(fn(...args))\n      } catch (err) {\n        reject(err)\n      }\n    })\n  }\n\nclass ReadableStreamDefaultController {\n  constructor(stream) {\n    this[Stream] = stream\n  }\n\n  enqueue(data) {\n    this[Stream].push(data)\n  }\n\n  close() {\n    this[Stream].push()\n  }\n\n  error(error) {\n    this[Stream].push(error)\n  }\n}\n\nclass ReadableByteStreamController {\n  constructor(stream) {\n    this[Stream] = stream\n  }\n\n  enqueue(data) {\n    this[Stream].push(data)\n  }\n\n  close() {\n    this[Stream].push()\n  }\n\n  error(error) {\n    this[Stream].push(error)\n  }\n}\n\nclass ReadableStream {\n  constructor(underlyingSource, queuingStrategy) {\n    this[UnderlyingSource] = underlyingSource\n    this[QueuingStrategy] = queuingStrategy\n\n    if (underlyingSource?.type === 'bytes') {\n      this[Controller] = new ReadableByteStreamController(this)\n    } else {\n      this[Controller] = new ReadableStreamDefaultController(this)\n    }\n\n    this[Chunks] = []\n    this[Done] = false\n    this[ErrorState] = null\n\n    if (underlyingSource?.start) {\n      // Constructors cannot be async so whatever we call here\n      // we have to make sure that exceptions/rejects are handled correctly.\n      promisify(underlyingSource.start)(this[Controller]).catch(err => {\n        this[Controller].error(err)\n      })\n    }\n  }\n\n  get locked() {\n    return false\n  }\n\n  [Symbol.asyncIterator]() {\n    return this\n  }\n\n  async next() {\n    if (this[PendingNextPromise]) {\n      throw new Error(\n        'Cannot call next() while a promise is pending from the previous call to next()'\n      )\n    }\n\n    // Once the stream is in an error state, we throw the error on every call to next().\n    if (this[ErrorState]) {\n      throw this[ErrorState]\n    }\n\n    if (this[Chunks].length > 0) {\n      const nextChunk = this[Chunks].shift()\n      if (nextChunk.error) {\n        // Capture the error state so that we can throw it on every call to next().\n        this[ErrorState] = nextChunk.error\n        throw nextChunk.error\n      }\n\n      return nextChunk\n    }\n\n    // Create a new promise that will be resolved or rejected when the next chunk is available.\n    this[PendingNextPromise] = new Promise((resolve, reject) => {\n      this[PendingNextPromiseResolve] = resolve\n      this[PendingNextPromiseReject] = reject\n    })\n\n    return this[PendingNextPromise]\n  }\n\n  push(data) {\n    if (this[Done]) {\n      return\n    }\n\n    if (data === undefined) {\n      this[Chunks].push({ done: true })\n      this[Done] = true\n    } else if (data instanceof Error) {\n      this[Chunks].push({ error: data, done: true })\n      this[Done] = true\n    } else {\n      this[Chunks].push({ value: data, done: false })\n    }\n\n    // Check if we have a pending promise from a previous call to next().\n    if (this[PendingNextPromise]) {\n      this[PendingNextPromise] = null\n      const resolve = this[PendingNextPromiseResolve]\n      this[PendingNextPromiseResolve] = null\n      const reject = this[PendingNextPromiseReject]\n      this[PendingNextPromiseReject] = null\n\n      const nextValue = this[Chunks].shift()\n      // We reject the errors, resolve everything else.\n      if (nextValue.error) {\n        // Capture the error state so that we can throw it on every call to next().\n        this[ErrorState] = nextValue.error\n        reject(nextValue.error)\n      } else {\n        resolve(nextValue)\n      }\n    }\n  }\n}\n\nmodule.exports = {\n  ReadableStream,\n}\n", "const {\n  BodyReadOffset,\n  Done,\n  EdgioId,\n  GetBody,\n  GetBodyChunkFn,\n  MoveBodyToHost,\n  ReqOrRespObject,\n  BodyUsed,\n} = require('./symbols')\nconst { INTERNAL_ERROR_PREFIX } = require('./consts')\n\n// Conditionally defines the readable request and response stream reader classes\n// based on the present feature flags.\nfunction getEdgioReadableStreamReader({ host, feature_flags }) {\n  let EdgioReadableResponseStreamReader\n  let EdgioReadableRequestStreamReader\n\n  const supportsBodyChunkHostcalls = feature_flags && feature_flags['body-chunk-hostcalls']\n  if (supportsBodyChunkHostcalls) {\n    // body-chunk-hostcalls support EdgioReadableStreamReader.\n    class EdgioReadableStreamReader {\n      static MAX_CHUNK_SIZE = 64 * 1024\n\n      // Creates a new ReadableStream object from an Edgio host id.\n      constructor(reqOrRespObject, getBodyChunkFn) {\n        if (this.constructor == EdgioReadableStreamReader) {\n          throw new Error(\n            `${INTERNAL_ERROR_PREFIX}EdgioReadableStreamReader Abstract class cannot be instantiated directly.`\n          )\n        }\n        this[ReqOrRespObject] = reqOrRespObject\n        this[GetBodyChunkFn] = getBodyChunkFn\n        this[Done] = false\n        this[BodyReadOffset] = 0\n      }\n\n      async read() {\n        if (this[Done]) {\n          return { value: undefined, done: true }\n        }\n\n        // Ensure that the body is on the host before we start reading it.\n        await this[ReqOrRespObject][MoveBodyToHost]()\n\n        this[ReqOrRespObject][BodyUsed] = true\n\n        const rawChunk = this[GetBodyChunkFn](\n          this[ReqOrRespObject].edgioId,\n          this[BodyReadOffset],\n          EdgioReadableStreamReader.MAX_CHUNK_SIZE\n        )\n        if (rawChunk === undefined) {\n          this[Done] = true\n          return { value: undefined, done: true }\n        }\n\n        this[BodyReadOffset] += rawChunk.byteLength\n        const chunk = new Uint8Array(rawChunk)\n        return { value: chunk, done: false }\n      }\n    }\n\n    EdgioReadableResponseStreamReader = class EdgioReadableResponseStreamReader extends (\n      EdgioReadableStreamReader\n    ) {\n      constructor(response) {\n        super(response, host.hostcall_resp_get_body_chunk)\n      }\n    }\n\n    EdgioReadableRequestStreamReader = class EdgioReadableRequestStreamReader extends (\n      EdgioReadableStreamReader\n    ) {\n      constructor(request) {\n        super(request, host.hostcall_req_get_body_chunk)\n      }\n    }\n\n    return {\n      EdgioReadableStreamReader,\n      EdgioReadableResponseStreamReader,\n      EdgioReadableRequestStreamReader,\n    }\n  } else {\n    // Pre-body-chunk-hostcalls support EdgioReadableStreamReader\n    // We can remove this once we have body-chunk-hostcalls support\n    // released to global edge.\n    class EdgioReadableStreamReader {\n      static BUFFER_SIZE = 1024\n\n      // Creates a new ReadableStream object from an Edgio host id.\n      constructor(id, getBodyFn) {\n        if (this.constructor == EdgioReadableStreamReader) {\n          throw new Error(\n            `${INTERNAL_ERROR_PREFIX}EdgioReadableStreamReader Abstract class cannot be instantiated directly.`\n          )\n        }\n        this[EdgioId] = id\n        this[GetBody] = getBodyFn\n        this[Done] = false\n      }\n\n      async read() {\n        // Current hostcall API doesn't allow buffered reading of the bodies\n        // so we have to read it all at once.\n        const body = new Uint8Array(this[GetBody](this[EdgioId]))\n        this[Done] = true\n\n        return { value: body }\n      }\n    }\n\n    EdgioReadableResponseStreamReader = class EdgioReadableResponseStreamReader extends (\n      EdgioReadableStreamReader\n    ) {\n      constructor(response) {\n        super(response, host.hostcall_resp_get_body)\n      }\n    }\n\n    EdgioReadableRequestStreamReader = class EdgioReadableRequestStreamReader extends (\n      EdgioReadableStreamReader\n    ) {\n      constructor(request) {\n        super(request, host.hostcall_req_get_body)\n      }\n    }\n  }\n\n  return {\n    EdgioReadableResponseStreamReader,\n    EdgioReadableRequestStreamReader,\n  }\n}\n\nmodule.exports = getEdgioReadableStreamReader\n", "'use strict'\n\n/*global globalThis*/\n\n// Edgio SDK for QuickJS runtime. This file is evaluated in the runtime before\n// any of the edge function developer's code runs.\n// Top wrapper function so that we can keep internals private within the scope of the function.\n// There are two ways to export anything from the function:\n// * Assign it to globalThis so that end developer code can access it\n// * Return it from the function so that the runtime Rust code can access it\n// The host and utility objects are objects created in the Rust code.\n// The edge functions parameter comes from the bundling.\n// This function initializes the SDK and returns the main function which can then\n// be invoked over and over again.\nmodule.exports = function (runtime, edgeFunctions) {\n  const { host, utility, feature_flags } = runtime\n  const {\n    STDOUT_FD,\n    STDERR_FD,\n    ENV_VAR_NAMESPACE_EDGIO_CONFIG,\n    ENV_VAR_NAMESPACE_EDGIO_ORIGINS,\n    ENV_VAR_NAMESPACE_EDGIO_PROPENVVAR,\n    ENV_VAR_NAMESPACE_EDGIO_FEATURE_FLAGS,\n    ENV_VAR_NAMESPACE_EDGIO_USRVAR,\n    ENV_VAR_NAMESPACE_EDGIO_GEO,\n    ENV_VAR_NAMESPACE_EDGIO_WURFL,\n    ENV_VAR_NAMESPACE_EDGIO_VIRT,\n    UTF_8,\n    WASM_METRIC_JSON_PARSE_INVOCATION_TOTAL,\n    WASM_METRIC_JSON_STRINGIFY_INVOCATION_TOTAL,\n    WASM_METRIC_JSON_PARSE_MICROSECONDS_TOTAL,\n    WASM_METRIC_JSON_STRINGIFY_MICROSECONDS_TOTAL,\n    WASM_METRIC_TEXT_ENCODE_INVOCATION_TOTAL,\n    WASM_METRIC_TEXT_DECODE_INVOCATION_TOTAL,\n    WASM_METRIC_TEXT_ENCODE_MICROSECONDS_TOTAL,\n    WASM_METRIC_TEXT_DECODE_MICROSECONDS_TOTAL,\n    INTERNAL_ERROR_PREFIX,\n  } = require('./sdk/consts.js')\n  const {\n    AppendFn,\n    Body,\n    BodyOnHost,\n    BodyUsed,\n    CheckFn,\n    EdgioId,\n    Encoding,\n    ErrorCode,\n    GetFn,\n    KeysFn,\n    MoveBodyToHost,\n    Namespace,\n    Options,\n    Origins,\n    Redirected,\n    RemoveFn,\n    ReqRespHeaders,\n    RequestObject,\n    ResponseObject,\n    SendToClient,\n    SetFn,\n    Url,\n  } = require('./sdk/symbols.js')\n\n  // Parse the feature flags from QuickJs-wasm\n  const supportsBodyChunkHostcalls = feature_flags && feature_flags['body-chunk-hostcalls']\n  const supportsEapps409FetchOptions = feature_flags && feature_flags['eapps-409-fetch-options']\n  const supportsInitClearHostCall = feature_flags && feature_flags['eapps-533-init-clear-hostcall']\n  const supportsEapps563FetchTagUpsert =\n    feature_flags && feature_flags['eapps-563-fetch-tag-upsert']\n  const supportsHtmlTransformer = feature_flags && feature_flags['eapps-552-html-transformer']\n\n  // Parse the feature flags from Sailfish\n  const sailfishFeatureFlags = EdgioDict(ENV_VAR_NAMESPACE_EDGIO_FEATURE_FLAGS)\n  let supportsMetricsOnTextEncoding = false\n  try {\n    supportsMetricsOnTextEncoding = sailfishFeatureFlags.has('metrics-text-encoding')\n  } catch (_e) {\n    // Until ENV_VAR_NAMESPACE_EDGIO_FEATURE_FLAGS are deployed the first time, the namespace\n    // ENV_VAR_NAMESPACE_EDGIO_FEATURE_FLAGS does not exist and .has() will throw an exception.\n  }\n\n  // object-inspect https://github.com/inspect-js/object-inspect has to be bundled\n  // in a special manner to prevent it from using Node's built-in util.inspect.\n  // This is done during SDK bundling (see ./bundle-object-inspect.sh)\n  const inspect = require('./bundled-object-inspect.js')\n\n  // Writes the arguments to the given file descriptor by leveraging inspect facility.\n  let consoleGroupIndentDepth = 0\n  const CONSOLE_GROUP_INDENT_STEP = 2\n  const getConsoleIndent = () => ' '.repeat(consoleGroupIndentDepth)\n  function wrappedConsoleWrite(fdWrite, ...args) {\n    // Always indent the output.\n    fdWrite(getConsoleIndent())\n\n    if (args.length > 0) {\n      // If the first argument is a string, we may need to do some formatting.\n      let firstArg = args[0]\n      if (typeof firstArg === 'string') {\n        // We now have the fist arg. We will try to format it and then put it back\n        // on the args array.\n        args.shift()\n        // Parse firstArg as a format string and replace the placeholders with\n        // the remaining arguments.\n        firstArg = firstArg.replace(/%[oOdisf]/g, match => {\n          if (args.length === 0) {\n            return match\n          }\n\n          const arg = args.shift()\n          switch (match) {\n            case '%o':\n            case '%O':\n              return inspect(arg)\n            case '%d':\n            case '%i':\n              return parseInt(arg, 10).toString()\n            case '%s':\n              return arg.toString()\n            case '%f':\n              return parseFloat(arg).toString()\n            default:\n              return match\n          }\n        })\n        args.unshift(firstArg)\n      }\n    }\n\n    // Output the arguments separated by spaces. We don't use .join(' ') to\n    // avoid the extra string allocations. The tradeoff is more hostcalls.\n    for (let i = 0; i < args.length; i++) {\n      if (i !== 0) {\n        fdWrite(' ')\n      }\n\n      const arg = args[i]\n      const type = typeof arg\n      // Depending on the type, we either convert the argument to a string\n      // or we use inspect to convert it to a string.\n      switch (type) {\n        case 'string':\n          fdWrite(arg)\n          break\n        case 'number':\n        case 'function':\n          fdWrite(arg.toString())\n          break\n        case 'boolean':\n          fdWrite(arg ? 'true' : 'false')\n          break\n        case 'undefined':\n          fdWrite(type)\n          break\n        default:\n          if (arg === null) {\n            fdWrite('null')\n          } else {\n            fdWrite(inspect(arg))\n          }\n          break\n      }\n    }\n\n    fdWrite('\\n')\n  }\n  // We wrap consoleWrite in a try/catch block to avoid crashing the runtime on\n  // logging and allow the user to see the error.\n  function consoleWrite(fd, ...args) {\n    const fdWrite = utility.stream_write_all.bind(this, fd)\n    try {\n      return wrappedConsoleWrite(fdWrite, ...args)\n    } catch (e) {\n      fdWrite('Exception during console output: ')\n      fdWrite(e.toString())\n      fdWrite('\\n')\n    }\n  }\n\n  // An implementation of console object.\n  const consoleCounters = new Map()\n  globalThis.console = {\n    assert: function (condition, ...args) {\n      if (!condition) {\n        consoleWrite(STDERR_FD, 'Assertion failed:', ...args)\n      }\n    },\n    clear: function () {\n      // In a non-interactive environment, `clear` is a no-op.\n    },\n    count: function (label) {\n      consoleCounters.set(label, (consoleCounters.get(label) || 0) + 1)\n      globalThis.console.log(`${label}: ${consoleCounters.get(label)}`)\n    },\n    countReset: function (label) {\n      consoleCounters.set(label, 0)\n    },\n    debug: consoleWrite.bind(globalThis.console, STDOUT_FD),\n    dir: function (...args) {\n      // In a non-interactive environment, `dir` is the same as `log`.\n      return globalThis.console.log(...args)\n    },\n    // In a non-interactive environment, `dirxml` is the same as `log`.\n    dirxml: function (...args) {\n      // In a non-interactive environment, `dir` is the same as `log`.\n      return globalThis.console.log(...args)\n    },\n    error: consoleWrite.bind(globalThis.console, STDERR_FD),\n    group: function (...args) {\n      if (args !== undefined) {\n        globalThis.console.log(...args)\n      }\n\n      consoleGroupIndentDepth += CONSOLE_GROUP_INDENT_STEP\n    },\n    groupCollapsed: function (...args) {\n      // In a non-interactive environment, `groupCollapsed` is the same as `group`.\n      return globalThis.console.group(...args)\n    },\n    groupEnd: function () {\n      consoleGroupIndentDepth = Math.max(consoleGroupIndentDepth - CONSOLE_GROUP_INDENT_STEP, 0)\n    },\n    info: consoleWrite.bind(globalThis.console, STDOUT_FD),\n    log: consoleWrite.bind(globalThis.console, STDOUT_FD),\n    profile: function () {\n      // In a non-interactive environment, `profile` is a no-op.\n    },\n    table: function (data, columns) {\n      // Not implemented for now - just print the object.\n      return globalThis.console.warn('table not implemented', data, columns)\n    },\n    time: function () {\n      // Not implemented.\n    },\n    timeEnd: function (label) {\n      // Not implemented.\n      return globalThis.console.warn('timeEnd not implemented', label)\n    },\n    timeLog: function (label) {\n      // Not implemented.\n      return globalThis.console.warn('timeLog not implemented', label)\n    },\n    timeStamp: function () {\n      // In a non-interactive environment, `timeStamp` is a no-op.\n    },\n    trace: consoleWrite.bind(globalThis.console, STDOUT_FD),\n    warn: consoleWrite.bind(globalThis.console, STDERR_FD),\n  }\n\n  // sdk.js is provides compatibility between Javascript and the host API\n  // The classes in sdk.js are proxies for the host, meaning that all the\n  // object's data should be forwarded to or retrieved from the Host API\n  // and not stored here in the JavaScript objects. respond_id and request_id\n  // are the unique identifiers into the Host API.\n\n  // The design is to put as much code in sdk.js as possible while keeping\n  // the code in runtime.rs as minimal as possible. runtime.rs should be a\n  // simple API interface for sdk.js. This keeps the javascript to Rust\n  // interface easy to maintain.\n\n  const { ReadableStream } = require('./sdk/readable-stream.js')\n  globalThis.ReadableStream = ReadableStream\n\n  // Classes to read bodies from Requests and Responses.\n  const { EdgioReadableResponseStreamReader, EdgioReadableRequestStreamReader } =\n    require('./sdk/edgio-readable-stream-reader.js')(runtime)\n\n  // TODO: Replace ReadableStream with a polyfill https://jira.atlas.llnw.com/browse/EAPPS-179\n  class EdgioReadableResponseStream {\n    constructor(response) {\n      this[ResponseObject] = response\n    }\n\n    getReader() {\n      return new EdgioReadableResponseStreamReader(this[ResponseObject])\n    }\n  }\n  class EdgioReadableRequestStream {\n    constructor(request) {\n      this[RequestObject] = request\n    }\n\n    getReader() {\n      return new EdgioReadableRequestStreamReader(this[RequestObject])\n    }\n  }\n\n  // Implementation of https://developer.mozilla.org/en-US/docs/Web/API/Headers\n  // Headers is an abstract proxy class to the edgio host API. It should not\n  // store any header information itself.\n  class EdgioHeaders {\n    // Creates a new EdgioHeaders object from an Edgio host requestId or responseId\n    constructor(id, headers, { appendFn, checkFn, getFn, keysFn, removeFn, setFn }) {\n      if (this.constructor == EdgioHeaders) {\n        throw new Error(\n          `${INTERNAL_ERROR_PREFIX}Headers Abstract class cannot be instantiated directly.`\n        )\n      }\n\n      this[EdgioId] = id\n      this[AppendFn] = appendFn\n      this[CheckFn] = checkFn\n      this[GetFn] = getFn\n      this[KeysFn] = keysFn\n      this[RemoveFn] = removeFn\n      this[SetFn] = setFn\n\n      // The spec says headers can be\n      // * dictionary: {name1 as string: value1 as string, name2 as string: [value2 as string array] }\n      // * TODO: array of pairs: [ [name as string, value as string], [name2 as string, value2 as string] ]\n      // * TODO: Headers object\n      // https://jira.atlas.llnw.com/browse/EAPPS-180\n\n      // Use our append() method to add these headers, so if there is duplicates\n      // they get appended, not overwritten. e.g. { a: 'a', A: 'b' } or [[ a,a ],[a,b]]\n      if (Array.isArray(headers)) {\n        headers.forEach(h => {\n          // ensure each header is an array a pair\n          if (!Array.isArray(h)) {\n            throw new Error(\n              `When passing an array of headers, each array element must be an array of length = 2. '${h}' is type '${typeof h}' not type array.`\n            )\n          }\n          if (h.length !== 2) {\n            throw new Error(\n              `When passing an array of headers, each array element must be an array of length = 2. '${h}' is array of length ${h.length}.`\n            )\n          }\n          host.hostcall_debug(`.append(${h})`)\n          this.append(h[0], h[1])\n        })\n      } else if (headers && headers instanceof Headers) {\n        // This is an instance of our Headers class so we make a copy the headers.\n        const rawHeaders = headers.getRaw()\n        Object.keys(rawHeaders).forEach(name => {\n          // rawHeaders values are arrays of strings. Append each value separately\n          // so they are properly injected by the hostcalls_ API.\n          rawHeaders[name].forEach(value => {\n            this.append(name, value)\n          })\n        })\n      } else if (headers && headers instanceof EdgioHeaders) {\n        for (const key of headers.keys()) {\n          for (const value of headers._getValuesForKey(key)) {\n            this.append(key, value)\n          }\n        }\n      } else if (\n        headers &&\n        Function.prototype.toString.call(headers.constructor).match(/class.*/)\n      ) {\n        // Check if this item is an instance of some other class\n        throw new Error(\n          `'headers' must be a 'Headers' instance, dictionary, or an array of array pairs. Found ${Function.prototype.toString.call(\n            headers.constructor\n          )}`\n        )\n      } else if (typeof headers === 'object') {\n        Object.keys(headers).forEach(name => {\n          this.append(name, headers[name])\n        })\n      } else if (headers !== undefined) {\n        // headers === undefined is ok. So this must be the last else if check.\n        throw new Error(\n          `'headers' must be a dictionary or an array of array pairs. Found type ${typeof headers}.`\n        )\n      }\n    }\n\n    // This is actually more restrictive than the Specification. Chrome allows name types like: null, number.\n    _validateName(name) {\n      if (name === undefined) {\n        throw new Error(\"The 'name' argument is required, but was not present.\")\n      }\n\n      if (typeof name !== 'string') {\n        throw new Error(`The 'name' argument must be a 'string' type, not a '${typeof name}' type.`)\n      }\n      return name\n    }\n\n    // This is actually more restrictive than the Specification. Chrome allows value types like: null, number.\n    _validateValue(value) {\n      if (value === undefined) {\n        throw new Error(\"The 'value' argument is required, but was not present.\")\n      }\n      if (typeof value !== 'string' && !Array.isArray(value)) {\n        throw new Error(\n          `The 'value' argument must be a 'string' or 'array' type, not a '${typeof value}' type.`\n        )\n      }\n      return value\n    }\n\n    // Append the value to the existing header. Set the header if it does not exist yet\n    append(name, value) {\n      // We skip null and undefined values as there is nothing to append.\n      // This makes it possible for end developers to write code like:\n      //   `headers.append('some-header', origHeaders.get('some-header'))`\n      // without worrying about null or undefined.\n      // This is very different from node-fetch which converts null/undefined\n      // to string 'null'/'undefined' and appends the header but we believe\n      // it's a far better behavior.\n      if (value === null || value === undefined) {\n        return\n      }\n      if (Array.isArray(value)) {\n        for (const v of value) {\n          this[AppendFn](this[EdgioId], this._validateName(name), this._validateValue(v))\n        }\n      } else {\n        this[AppendFn](this[EdgioId], this._validateName(name), this._validateValue(value))\n      }\n    }\n\n    // Delete the header from the list.\n    delete(name) {\n      this[RemoveFn](this[EdgioId], this._validateName(name))\n    }\n\n    // Return array of header pairs\n    entries() {\n      const entries = []\n      for (const key of this.keys()) {\n        entries.push([key, this.get(key)])\n      }\n      return entries\n    }\n\n    // executes callback on each header pair\n    forEach(callback) {\n      for (const key of this.keys()) {\n        callback(this.get(key), key)\n      }\n    }\n\n    /// Get the value of the specified name. Spec at https://developer.mozilla.org/en-US/docs/Web/API/Headers/get\n    /// @param {string} name - the name of the header (throws if parameter is missing)\n    /// @returns {(string|null)} - the value of the header. Returns a string of comma separated values if there are multiple values or null if there are no values.\n    get(name) {\n      // get_header_values returns undefined or an array of string. The spec says\n      // it should return a string of comma separated values if there are multiple values.\n      const headers = this[GetFn](this[EdgioId], this._validateName(name))\n      if (Array.isArray(headers)) return headers.join(', ')\n\n      // Per the spec we return null when there are no values.\n      return headers === undefined ? null : headers\n    }\n\n    /**\n     * Get all of the value of the specified name as an array of strings. This is non-standard but useful.\n     * @param {string} key\n     * @returns {string[]}\n     * @private\n     */\n    _getValuesForKey(key) {\n      // get_header_values returns undefined or an array of string.\n      const headers = this[GetFn](this[EdgioId], this._validateName(key))\n      if (headers === undefined || headers === null) {\n        return []\n      }\n\n      return headers\n    }\n\n    /**\n     * Returns an array of strings for the set-cookie headers.\n     * @returns {string[]}\n     */\n    getSetCookie() {\n      return this._getValuesForKey('set-cookie')\n    }\n\n    // Returns true of the header name exists, otherwise false\n    has(name) {\n      return this[CheckFn](this[EdgioId], this._validateName(name))\n    }\n\n    // Returns an iterator of header names  - used by runtime.rs to return all response headers to host\n    keys() {\n      return this[KeysFn](this[EdgioId])\n    }\n\n    // Set the header and value. Overwrite any existing headers with the same name\n    set(name, value) {\n      // We skip null and undefined values as there is nothing to set.\n      // This makes it possible for end developers to write code like:\n      //   `headers.set('some-header', origHeaders.get('some-header'))`\n      // without worrying about null or undefined.\n      // This is very different from node-fetch which converts null/undefined\n      // to string 'null'/'undefined' and sets the header but we believe\n      // it's a far better behavior.\n      if (value === null || value === undefined) {\n        return\n      }\n      this[SetFn](this[EdgioId], this._validateName(name), this._validateValue(value))\n    }\n\n    // Returns an iterator of header values\n    values() {\n      const values = []\n      for (const key of this.keys()) {\n        values.push(this.get(key))\n      }\n      return values\n    }\n\n    // A non-standard method that returns a dictionary of all headers\n    // during the JSON generation process.\n    toJSON() {\n      const json = {}\n      for (const key of this.keys()) {\n        json[key] = this.get(key)\n      }\n      return json\n    }\n  }\n\n  class EdgioResponseHeaders extends EdgioHeaders {\n    constructor(responseId, headers) {\n      super(responseId, headers, {\n        appendFn: host.hostcall_resp_append_header,\n        checkFn: host.hostcall_resp_check_header,\n        getFn: host.hostcall_resp_get_header_values,\n        keysFn: utility.resp_get_header_names,\n        removeFn: host.hostcall_resp_remove_header,\n        setFn: host.hostcall_resp_set_header,\n      })\n    }\n  }\n\n  class EdgioRequestHeaders extends EdgioHeaders {\n    constructor(requestId, headers) {\n      super(requestId, headers, {\n        appendFn: host.hostcall_req_append_header,\n        checkFn: host.hostcall_req_check_header,\n        getFn: host.hostcall_req_get_header_values,\n        keysFn: utility.req_get_header_names,\n        removeFn: host.hostcall_req_remove_header,\n        setFn: host.hostcall_req_set_header,\n      })\n    }\n  }\n\n  // Implementation of https://developer.mozilla.org/en-US/docs/Web/API/Headers\n  // \"class HeadersInternal\" implements the same functions as the hostcalls_ so we can\n  // pass it into the \"class Headers extends EdgioHeaders\" below.\n  class HeadersInternal {\n    // Normally we do not store anyting in the local object. But, since the Sailfish\n    // has separate request and response headers we need to implment a standard Headers\n    // class for compatibility with our customers' frameworks.\n    constructor() {\n      // Since headers can have multiple values, all values are a dictionary\n      // of arrays of strings.\n      this._headers = {}\n    }\n\n    appendFn = (_requestId, key, value) => {\n      if (!this._headers[key]) this._headers[key] = []\n      this._headers[key].push(value)\n    }\n\n    checkFn = (_requestId, key) => {\n      return !!this._headers[key]\n    }\n\n    getFn = (_requestId, key) => {\n      // The spec says return null if the header does not exist.\n      if (!this._headers[key]) return null\n\n      return this._headers[key]\n    }\n\n    getRawFn = () => {\n      return this._headers\n    }\n\n    keysFn = _requestId => {\n      return Object.keys(this._headers)\n    }\n\n    removeFn = (_requestId, key) => {\n      delete this._headers[key]\n    }\n\n    setFn = (_requestId, key, value) => {\n      this._headers[key] = [value]\n    }\n  }\n\n  globalThis.Headers = class Headers extends EdgioHeaders {\n    constructor(headers) {\n      const _headersInstance = new HeadersInternal()\n\n      // This request Id of 0 is passed to all the header calls, but since this class\n      // is only local storage it is ignored in all the calls.\n      super(0, headers, {\n        appendFn: _headersInstance.appendFn.bind(_headersInstance),\n        checkFn: _headersInstance.checkFn.bind(_headersInstance),\n        getFn: _headersInstance.getFn.bind(_headersInstance),\n        keysFn: _headersInstance.keysFn.bind(_headersInstance),\n        removeFn: _headersInstance.removeFn.bind(_headersInstance),\n        setFn: _headersInstance.setFn.bind(_headersInstance),\n      })\n      // Store the headers instance so it does not go out of scope\n      this._headersInstance = _headersInstance\n    }\n    getRaw = () => {\n      return this._headersInstance.getRawFn()\n    }\n  }\n\n  /// Fetch API Request implementation per https://fetch.spec.whatwg.org/#request-class\n  globalThis.Request = class {\n    constructor(input, options) {\n      this[Options] = options || {}\n      this[BodyUsed] = false\n\n      // If it already has a requestId, this is fully formed request from the host.\n      if (typeof options?.edgio?.id === 'number') {\n        this[EdgioId] = options?.edgio?.id\n        this[ReqRespHeaders] = new EdgioRequestHeaders(this[EdgioId])\n        this[BodyOnHost] = true\n        return\n      }\n      // Otherwise we need to create a new Request in the host and set its properties.\n      if (typeof input !== 'string') {\n        // TODO: add support for `const req = new Request(request);`\n        throw new Error(`\"string\" type is accepted for the input parameter, not '${typeof input}'`)\n      }\n      const url = input\n\n      // Method is undefined or string.\n      if (this[Options].method !== undefined && typeof this[Options].method !== 'string') {\n        throw new Error(\n          `options.method must be type 'undefined' or 'string', not '${typeof this[Options]\n            .method}'`\n        )\n      }\n      const method = this[Options].method || 'GET'\n      this[EdgioId] = host.hostcall_req_create(method, url)\n      // We invoke the setting of the headers after we have set the URL. First, we are forced\n      // to do this with the API but also we want the `host` header, if such exists, to win\n      // over any domain that the user has specified in the URL.\n      this[ReqRespHeaders] = new EdgioRequestHeaders(this[EdgioId], this[Options]?.headers || {})\n\n      const body = this[Options].body\n      delete this[Options].body // don't keep a copy of the body in case it is large\n      this[BodyUsed] = false\n\n      if (body) {\n        this[Body] = body\n      }\n      this[BodyOnHost] = false\n    }\n\n    blob() {\n      throw new Error(\n        `${INTERNAL_ERROR_PREFIX}The 'blob' method is not supported by the Request class.`\n      )\n    }\n\n    get body() {\n      // According to the spec, body is null for GET/HEAD\n      const method = this.method\n      if (method === 'GET' || method === 'HEAD') {\n        return null\n      }\n\n      // This function is not asynchronous so we cannot await this[MoveBodyToHost]()\n      // Instead, we will do that from the ReadableStreamReader.read() method.\n      return new EdgioReadableRequestStream(this)\n    }\n\n    get bodyUsed() {\n      // TODO: Should/Can this be moved to the EdgioReadableRequestStream class\n      return this[BodyUsed]\n    }\n\n    get cache() {\n      throw new Error(\n        `${INTERNAL_ERROR_PREFIX}The 'cache' property is not supported by the Request class.`\n      )\n    }\n\n    get credentials() {\n      throw new Error(\n        `${INTERNAL_ERROR_PREFIX}The 'credentials' property is not supported by the Request class.`\n      )\n    }\n\n    clone() {\n      throw new Error(\n        `${INTERNAL_ERROR_PREFIX}The 'clone' method is not supported by the Request class.`\n      )\n    }\n\n    get destination() {\n      throw new Error(\n        `${INTERNAL_ERROR_PREFIX}The 'destination' property is not supported by the Request class.`\n      )\n    }\n\n    formData() {\n      throw new Error(\n        `${INTERNAL_ERROR_PREFIX}The 'formData' method is not supported by the Request class.`\n      )\n    }\n\n    get headers() {\n      return this[ReqRespHeaders]\n    }\n\n    get integrity() {\n      throw new Error(\n        `${INTERNAL_ERROR_PREFIX}The 'integrity' property is not supported by the Request class.`\n      )\n    }\n\n    get method() {\n      const method = host.hostcall_req_get_method(this[EdgioId])\n      return method\n    }\n\n    set method(method) {\n      return host.hostcall_req_set_method(this[EdgioId], method) // eslint-disable-line\n    }\n\n    get mode() {\n      throw new Error(\n        `${INTERNAL_ERROR_PREFIX}The 'mode' property is not supported by the Request class.`\n      )\n    }\n\n    get redirect() {\n      throw new Error(\n        `${INTERNAL_ERROR_PREFIX}The 'redirect' property is not supported by the Request class.`\n      )\n    }\n\n    get referrer() {\n      throw new Error(\n        `${INTERNAL_ERROR_PREFIX}The 'referrer' property is not supported by the Request class.`\n      )\n    }\n\n    get referrerPolicy() {\n      throw new Error(\n        `${INTERNAL_ERROR_PREFIX}The 'referrerPolicy' property is not supported by the Request class.`\n      )\n    }\n\n    get signal() {\n      throw new Error(\n        `${INTERNAL_ERROR_PREFIX}The 'signal' property is not supported by the Request class.`\n      )\n    }\n\n    async arrayBuffer() {\n      await this[MoveBodyToHost]()\n\n      this[BodyUsed] = true\n\n      return host.hostcall_req_get_body(this[EdgioId])\n    }\n\n    async text() {\n      const buffer = await this.arrayBuffer()\n      if (buffer.byteLength === 0) {\n        return ''\n      }\n\n      return new TextDecoder(UTF_8).decode(buffer)\n    }\n\n    async json() {\n      return JSON.parse(await this.text())\n    }\n\n    get url() {\n      return host.hostcall_req_get_uri(this[EdgioId])\n    }\n\n    set url(uri) {\n      return host.hostcall_req_set_uri(this[EdgioId], uri) // eslint-disable-line\n    }\n\n    get path() {\n      return host.hostcall_req_get_path(this[EdgioId])\n    }\n\n    get edgioId() {\n      return this[EdgioId]\n    }\n\n    toJSON() {\n      return {\n        method: this.method,\n        url: this.url,\n        headers: this.headers,\n      }\n    }\n\n    cloneWithoutBody() {\n      const clone_id = host.hostcall_req_clone_without_body(this[EdgioId])\n      const req = new Request(null, {\n        edgio: {\n          id: clone_id,\n        },\n      })\n      this[ReqRespHeaders] = new EdgioRequestHeaders(clone_id)\n      return req\n    }\n\n    async [MoveBodyToHost]() {\n      if (this[BodyOnHost]) {\n        return\n      }\n\n      const body = this[Body]\n      if (body) {\n        if (this.method === 'GET' || this.method === 'HEAD') {\n          throw new Error('Request with GET/HEAD method cannot have body.')\n        }\n\n        const edgioId = this[EdgioId]\n        if (typeof body === 'string') {\n          host.hostcall_debug(`new Request(${edgioId}, string: ${body})`)\n          host.hostcall_req_set_body_from_string(edgioId, body)\n        } else if (body instanceof ArrayBuffer) {\n          // Handle ArrayBuffer directly\n          host.hostcall_debug(`new Request(ArrayBuffer: len=${body.byteLength})`)\n          host.hostcall_req_set_body_from_array_buffer(edgioId, body)\n        } else if (ArrayBuffer.isView(body)) {\n          // Handle TypedArrays directly\n          host.hostcall_debug(`new Request(TypedArray: len=${body.byteLength})`)\n          host.hostcall_req_set_body_from_array_buffer(edgioId, body.buffer)\n        } else if (body instanceof ReadableStream) {\n          // Handle ReadableStream directly\n          host.hostcall_debug(`new Request(ReadableStream)`)\n          for await (const chunk of body) {\n            if (typeof chunk === 'string') {\n              host.hostcall_req_append_body_from_string(edgioId, chunk)\n            } else if (chunk instanceof ArrayBuffer) {\n              host.hostcall_req_append_body_from_array_buffer(edgioId, chunk)\n            } else if (ArrayBuffer.isView(chunk)) {\n              host.hostcall_req_append_body_from_array_buffer(edgioId, chunk.buffer)\n            } else {\n              const text = chunk?.toString()\n              if (text) {\n                host.hostcall_req_append_body_from_string(edgioId, chunk.toString())\n              } else {\n                throw new Error('new Request(ReadableStream: chunk is not string or ArrayBuffer)')\n              }\n            }\n          }\n        } else {\n          // TODO: Support for Blobs(), DataView, FormData, URLSearchParams, String\n          // Best effort on other types of bodies.\n          host.hostcall_debug(`new Request(other: ${body.toString()})`)\n          host.hostcall_req_set_body_from_string(edgioId, body.toString())\n        }\n      }\n\n      // The body has been moved to the host, so we can remove it from the local object\n      // and maybe save some memory.\n      this[Body] = null\n      this[BodyOnHost] = true\n    }\n  }\n\n  /// Fetch API Response implementation per https://fetch.spec.whatwg.org/#response-class\n  /// Where things are not formally defined (e.g. what is the default status code) we follow\n  /// Chrome's implementation.\n  globalThis.Response = class {\n    constructor(body, optionsOrResponse) {\n      // These variables are concepts that are not supported in Sailfish so we need\n      // to keep track of them in this instance's storage.\n      this[BodyUsed] = false\n      this[BodyOnHost] = false\n      this[Redirected] = false\n      this[Url] = null\n\n      if (typeof optionsOrResponse?.edgio?.id === 'number') {\n        // It is a response from the host, so we are given the ID.\n        this[EdgioId] = optionsOrResponse?.edgio?.id\n        this[ReqRespHeaders] = new EdgioResponseHeaders(this[EdgioId])\n        host.hostcall_debug(`_edgioNew Response: ${this[EdgioId]}`)\n        this[BodyOnHost] = true // assume the host has a body. TODO: not always correct\n        // No need to set all the properties, because the host already has them.\n        return\n      }\n\n      if (optionsOrResponse instanceof Response) {\n        const clone = optionsOrResponse.cloneWithoutBody()\n        this[EdgioId] = clone[EdgioId]\n        this[ReqRespHeaders] = clone[ReqRespHeaders]\n        this[Redirected] = clone[Redirected]\n        this[Url] = clone[Url]\n      } else {\n        // It's a new Response rather than an existing from the host, or one to clone,\n        // create a new Response in the host and set its properties.\n        this[Options] = optionsOrResponse || {}\n        // statusMessage is not supported by Sailfish yet.\n        // this[Options].statusMessage = this[Options].statusMessage || \"OK\"\n\n        // Differentiate between a status = 0 and status = undefined\n        // Default response is 200 OK\n        if (isNaN(this[Options].status)) this[Options].status = 200\n\n        // From sailfish src/modules/wasm/hostcalls/response.cc\n        // Do not allow status codes that can interfere with functioning of the CDN.\n        if (\n          this[Options].status < 200 ||\n          this[Options].status > 599 ||\n          this[Options].status === 204 ||\n          this[Options].status === 304\n        ) {\n          throw new Error(\n            `The status provided ${this[Options].status} must be >= 200 and <= 599, and not 204 or 304.`\n          )\n        }\n        this[EdgioId] = host.hostcall_resp_create(this[Options].status)\n        this[ReqRespHeaders] = new EdgioResponseHeaders(this[EdgioId], this[Options]?.headers || {})\n      }\n\n      if (body) {\n        this[Body] = body\n      }\n    }\n\n    blob() {\n      throw new Error(\n        `${INTERNAL_ERROR_PREFIX}The 'blob' method is not supported by the Response class.`\n      )\n    }\n\n    get body() {\n      // This function is not asynchronous so we cannot await this[MoveBodyToHost]()\n      // Instead, we will do that from the ReadableStreamReader.read() method.\n\n      if (this[BodyOnHost] || this[Body]) {\n        return new EdgioReadableResponseStream(this)\n      }\n\n      // The spec says to return null when no body was given.\n      return null\n    }\n\n    get bodyUsed() {\n      return this[BodyUsed]\n    }\n\n    clone() {\n      throw new Error(\n        `${INTERNAL_ERROR_PREFIX}The 'clone' method is not supported by the Response class.`\n      )\n    }\n\n    formData() {\n      throw new Error(\n        `${INTERNAL_ERROR_PREFIX}The 'formData' method is not supported by the Response class.`\n      )\n    }\n\n    get headers() {\n      return this[ReqRespHeaders]\n    }\n\n    async arrayBuffer() {\n      await this[MoveBodyToHost]()\n\n      this[BodyUsed] = true\n\n      return host.hostcall_resp_get_body(this[EdgioId])\n    }\n\n    async text() {\n      const buffer = await this.arrayBuffer()\n      if (buffer.byteLength === 0) {\n        return ''\n      }\n\n      return new TextDecoder(UTF_8).decode(buffer)\n    }\n    async json() {\n      return JSON.parse(await this.text())\n    }\n\n    get ok() {\n      let status = this.status\n      return status >= 200 && status < 300\n    }\n\n    static redirect(url, status) {\n      return new Response(undefined, { headers: { location: url }, status: status || 302 })\n    }\n\n    set redirected(newRedirected) {\n      this[Redirected] = newRedirected\n    }\n\n    get redirected() {\n      return this[Redirected]\n    }\n\n    get status() {\n      return host.hostcall_resp_get_status(this[EdgioId])\n    }\n\n    get statusText() {\n      return host.hostcall_resp_get_reason(this[EdgioId])\n    }\n\n    get type() {\n      throw new Error(\n        `${INTERNAL_ERROR_PREFIX}The 'type' property is not supported by the Response class.`\n      )\n    }\n\n    get url() {\n      return this[Url]\n    }\n\n    get edgioId() {\n      return this[EdgioId]\n    }\n\n    toJSON() {\n      return {\n        status: this.status,\n        statusText: this.statusText,\n        headers: this.headers,\n      }\n    }\n\n    cloneWithoutBody() {\n      const clone_id = host.hostcall_resp_clone_without_body(this[EdgioId])\n      const resp = new Response(null, {\n        edgio: {\n          id: clone_id,\n        },\n      })\n      resp[Url] = this[Url]\n      resp[Redirected] = this[Redirected]\n      resp[ReqRespHeaders] = new EdgioResponseHeaders(clone_id)\n      return resp\n    }\n\n    async [SendToClient]() {\n      await this[MoveBodyToHost]()\n\n      // Then \"send\" the response to the client.\n      host.hostcall_resp_send_to_client(this.edgioId)\n    }\n\n    async [MoveBodyToHost]() {\n      if (this[BodyOnHost]) {\n        return\n      }\n\n      const body = this[Body]\n\n      // null/undefined is a special case because there is nothing to\n      // communicate to the host and the body can never be on the host.\n      // It is thus important that we don't flip the BodyOnHost flag\n      // because other code depends on it.\n      if (body === null || body === undefined) {\n        return\n      }\n\n      const edgioId = this[EdgioId]\n      if (typeof body === 'string') {\n        host.hostcall_debug(`new Response(string: ${body})`)\n        host.hostcall_resp_set_body_from_string(edgioId, body)\n      } else if (body instanceof ArrayBuffer) {\n        // Handle ArrayBuffer directly\n        host.hostcall_debug(`new Response(ArrayBuffer: len=${body.byteLength})`)\n        host.hostcall_resp_set_body_from_array_buffer(edgioId, body)\n      } else if (ArrayBuffer.isView(body)) {\n        // Handle TypedArrays directly\n        host.hostcall_debug(`new Response(TypedArray: len=${body.byteLength})`)\n        host.hostcall_resp_set_body_from_array_buffer(edgioId, body.buffer)\n      } else if (body instanceof ReadableStream) {\n        if (!supportsBodyChunkHostcalls) {\n          throw new Error('ReadableStream is not supported by the Response class.')\n        }\n        // Handle ReadableStream directly\n        host.hostcall_debug('new Response(ReadableStream)')\n        for await (const chunk of body) {\n          if (typeof chunk === 'string') {\n            host.hostcall_resp_append_body_from_string(edgioId, chunk)\n          } else if (chunk instanceof ArrayBuffer) {\n            host.hostcall_resp_append_body_from_array_buffer(edgioId, chunk)\n          } else if (ArrayBuffer.isView(chunk)) {\n            host.hostcall_resp_append_body_from_array_buffer(edgioId, chunk.buffer)\n          } else {\n            const text = chunk?.toString()\n            if (text) {\n              host.hostcall_resp_append_body_from_string(edgioId, chunk.toString())\n            } else {\n              throw new Error('new Response(ReadableStream: chunk is not string or ArrayBuffer)')\n            }\n          }\n        }\n      } else {\n        // TODO: Support for Blobs(), DataView, FormData, ReadableStream, URLSearchParams, String\n        // Best effort on other types of bodies\n        host.hostcall_debug(`new Response(other: ${body.toString()})`)\n        host.hostcall_resp_set_body_from_string(edgioId, body.toString())\n      }\n\n      // The body has been moved to the host, so we can remove it from the local object\n      // and maybe save some memory.\n      this[Body] = null\n      this[BodyOnHost] = true\n    }\n  }\n\n  class ResponseError extends Error {\n    // Creates a new ResponseError object from an Edgio host error response code.\n    constructor(responseErrorCode) {\n      super()\n      this[ErrorCode] = responseErrorCode\n    }\n\n    get code() {\n      return this[ErrorCode]\n    }\n\n    get message() {\n      return host.hostcall_resp_get_error_code_message(this[ErrorCode])\n    }\n\n    toString() {\n      return `${this.message} (code: ${this.code})`\n    }\n  }\n\n  // EdgioDict(namespace) returns a proxy class to the Edgio host API.\n  function EdgioDict(namespace) {\n    // The Proxy class requires a object to be passed in. We create a dummy\n    // object that contains the dictionary's namespace.\n    const namespaces = { namespace: namespace }\n    const dictProxy = new Proxy(namespaces, {\n      // Intercept property access and return the corresponding value\n      get(target, property) {\n        // Allow for .get(), .getBase64Decoded(), .has() and .keys() to be called directly on the proxy\n        if (property === 'get') {\n          return function (key) {\n            return host.hostcall_dict_get(target.namespace, key)\n          }\n        }\n        if (property === 'getBase64Decoded') {\n          return function (key) {\n            return new Uint8Array(host.hostcall_dict_get_base64_decoded(target.namespace, key))\n          }\n        }\n        if (property === 'has') {\n          return function (key) {\n            return host.hostcall_dict_check(target.namespace, key)\n          }\n        }\n        if (property === 'keys') {\n          return function () {\n            return utility.dict_get_keys(target.namespace)\n          }\n        }\n        return host.hostcall_dict_get(target.namespace, property)\n      },\n      // Intercept Object.getOwnPropertyDescriptor()\n      getOwnPropertyDescriptor(target, property) {\n        return {\n          value: host.hostcall_dict_get(target.namespace, property),\n          writable: false,\n          enumerable: true,\n          configurable: true,\n        }\n      },\n      // Disallow setting properties\n      defineProperty(_target, _key, _descriptor) {\n        return false\n      },\n      // Disallow deleting properties\n      deleteProperty(_target, _property) {\n        return false\n      },\n      // Intercept 'in' operator to check if a property exists\n      has(target, property) {\n        return host.hostcall_dict_check(target.namespace, property)\n      },\n      // Intercept Object.keys(), Object.getOwnPropertyNames(), etc.\n      ownKeys(target) {\n        return utility.dict_get_keys(target.namespace)\n      },\n    })\n\n    return dictProxy\n  }\n\n  // EdgioSet is a proxy class to the Edgio host API.\n  class EdgioSet {\n    // Creates a new EdgioSet object from a given Set namespace\n    constructor(namespace) {\n      this[Namespace] = namespace\n    }\n\n    // Returns true if the Set key exists, otherwise false\n    has(key) {\n      return host.hostcall_unique_set_check(this[Namespace], key)\n    }\n\n    // Returns array of Set keys\n    keys() {\n      return utility.unique_set_get_keys(this[Namespace])\n    }\n\n    toJSON() {\n      return this.keys()\n    }\n  }\n\n  // EdgioMetrics is a proxy class to the Edgio host API.\n  class EdgioMetrics {\n    /// Start a timer with the index of the customer metric\n    /// @param {number} index - the index of the timer\n    startTimer(index) {\n      return host.hostcall_metrics_start_timer(index)\n    }\n    /// Stop a timer with the index of the customer metric\n    /// @param {number} index - the index of the timer\n    stopTimer(index) {\n      return host.hostcall_metrics_stop_timer(index)\n    }\n    /// Add a value to the customer metric\n    /// @param {number} index - the index of the metric\n    /// @param {number} value - the value to add\n    add(index, value) {\n      return host.hostcall_metrics_add(index, value)\n    }\n  }\n\n  // A helper function to wrap a function with hostcall_metrics\n  function wrapFunctionCallWithMetrics(invocationCountId, microsecondTimerId, fn, ...args) {\n    host.hostcall_metrics_add(invocationCountId, 1)\n    host.hostcall_metrics_start_timer(microsecondTimerId)\n    try {\n      return fn(...args)\n      // Let all exceptions bubble up to the caller (as if we did not wrap this function)\n    } finally {\n      // Ensure the timer is always stopped or the next start_timer for this id will fail.\n      host.hostcall_metrics_stop_timer(microsecondTimerId)\n    }\n  }\n\n  // Wrap the JSON functions so we can add metrics to them.\n  const originalJSONparse = JSON.parse\n  const originalJSONstringify = JSON.stringify\n  globalThis.JSON = {\n    parse: (...args) => {\n      return wrapFunctionCallWithMetrics(\n        WASM_METRIC_JSON_PARSE_INVOCATION_TOTAL,\n        WASM_METRIC_JSON_PARSE_MICROSECONDS_TOTAL,\n        originalJSONparse,\n        ...args\n      )\n    },\n    stringify: (...args) => {\n      return wrapFunctionCallWithMetrics(\n        WASM_METRIC_JSON_STRINGIFY_INVOCATION_TOTAL,\n        WASM_METRIC_JSON_STRINGIFY_MICROSECONDS_TOTAL,\n        originalJSONstringify,\n        ...args\n      )\n    },\n  }\n\n  // We need to inject a \"module\" object into the global scope so that the bundled\n  // code produced by the build system can be executed. The module object can be empty.\n  globalThis.module = {}\n\n  // __dirname and __filename are shimmed as a lot of code expects them to be available.\n  globalThis.__dirname = '/'\n  globalThis.__filename = '/index.js'\n\n  // shims for the global object\n  globalThis.global = globalThis\n\n  // Do not allow require() in edge-functions. Throw nice error message instead.\n  globalThis.require = moduleName => {\n    throw new Error(\n      `The Node.js function \"require('${moduleName}')\" is not supported in edge-functions. ` +\n        'Please refer to https://docs.edg.io/guides/v7/edge-functions#polyfills for more information.'\n    )\n  }\n\n  if (supportsHtmlTransformer) {\n    globalThis.HtmlTransformer = class HtmlTransformer {\n      constructor(definitions, output_callback) {\n        this[EdgioId] = utility.html_transformer_new(\n          HtmlTransformer.hook_callbacks(definitions),\n          output_callback\n        )\n      }\n      // Wrap the write and end in async functions so we can await them\n      // which allows is necessary since the HtmlTransformer callbacks are\n      // async functions, which are triggered from write() and end().\n      async write(chunk) {\n        return new Promise((resolve, reject) => {\n          try {\n            resolve(utility.html_transformer_write(this[EdgioId], chunk))\n          } catch (e) {\n            reject(e)\n          }\n        })\n      }\n      async end() {\n        return new Promise((resolve, reject) => {\n          try {\n            resolve(utility.html_transformer_end(this[EdgioId]))\n          } catch (e) {\n            reject(e)\n          }\n        })\n      }\n\n      // Hook the user's callback functions so we can wrap\n      // the wasm object pointer with a Javascsript Proxy Class\n      // and pass the Proxy to the user's callback.\n      static hook_callbacks(definitions) {\n        function makeProxy(className, rawPtr) {\n          return new Proxy(\n            { rawPtr: rawPtr },\n            {\n              get(target, property) {\n                return (...args) => {\n                  // Proxy the call to html_transformer_proxy()\n                  let proxyResults = utility.html_transformer_proxy(\n                    className,\n                    property.toString(),\n                    target.rawPtr,\n                    args\n                  )\n\n                  // start_tag's response needs to be wrapped in it own Proxy<start_tag>\n                  if (property === 'start_tag') {\n                    proxyResults = makeProxy('start_tag', proxyResults)\n                  }\n\n                  // Each attribute in the returned array needs to be wrapped in its own Proxy<attribute>\n                  if (property === 'attributes') {\n                    for (let i = 0; i < proxyResults.length; i++) {\n                      proxyResults[i] = makeProxy('attribute', proxyResults[i])\n                    }\n                  }\n\n                  return proxyResults\n                }\n              },\n            }\n          )\n        }\n\n        if (definitions && Array.isArray(definitions)) {\n          for (let i = 0; i < definitions.length; i++) {\n            // Element Handlers\n            if (definitions[i].comment) {\n              let originFn = definitions[i].comment\n              definitions[i].comment = ptr => {\n                return originFn(makeProxy('comment', ptr))\n              }\n            }\n            if (definitions[i].element) {\n              let originFn = definitions[i].element\n              definitions[i].element = ptr => {\n                return originFn(makeProxy('element', ptr))\n              }\n            }\n            if (definitions[i].text) {\n              let originFn = definitions[i].text\n              definitions[i].text = ptr => {\n                return originFn(makeProxy('text', ptr))\n              }\n            }\n\n            // Document Handlers\n            if (definitions[i].doc_comment) {\n              let originFn = definitions[i].doc_comment\n              definitions[i].doc_comment = ptr => {\n                // Uses the same comment proxy as element\n                return originFn(makeProxy('comment', ptr))\n              }\n            }\n            if (definitions[i].doc_text) {\n              let originFn = definitions[i].doc_text\n              definitions[i].doc_text = ptr => {\n                // Uses the same comment text as element\n                return originFn(makeProxy('text', ptr))\n              }\n            }\n            if (definitions[i].doc_type) {\n              let originFn = definitions[i].doc_type\n              definitions[i].doc_type = ptr => {\n                return originFn(makeProxy('doc_type', ptr))\n              }\n            }\n            if (definitions[i].doc_end) {\n              let originFn = definitions[i].doc_end\n              definitions[i].doc_end = ptr => {\n                return originFn(makeProxy('doc_end', ptr))\n              }\n            }\n          }\n        }\n        return definitions\n      }\n    }\n  }\n\n  globalThis.TextDecoder = class TextDecoder {\n    constructor(encoding) {\n      this[Encoding] = encoding || UTF_8\n    }\n\n    // Fatal property setter and getter\n    // Currently not supported.\n    get fatal() {\n      return false\n    }\n    set fatal(value) {\n      if (value) {\n        throw new Error('TextDecoder.fatal is not supported')\n      }\n    }\n\n    decode(buffer) {\n      try {\n        if (supportsMetricsOnTextEncoding) {\n          host.hostcall_metrics_add(WASM_METRIC_TEXT_DECODE_INVOCATION_TOTAL, 1)\n          host.hostcall_metrics_start_timer(WASM_METRIC_TEXT_DECODE_MICROSECONDS_TOTAL)\n        }\n\n        if (!buffer) {\n          return ''\n        }\n\n        const array_buffer = ArrayBuffer.isView(buffer) ? buffer.buffer : buffer\n        if (!(array_buffer instanceof ArrayBuffer)) {\n          throw new Error(\n            `Decoding supported for ArrayBuffer, TypedArray and DataView, not ${typeof buffer}`\n          )\n        }\n\n        return utility.text_decoder_decode(this[Encoding], array_buffer)\n      } finally {\n        if (supportsMetricsOnTextEncoding) {\n          host.hostcall_metrics_stop_timer(WASM_METRIC_TEXT_DECODE_MICROSECONDS_TOTAL)\n        }\n      }\n    }\n  }\n\n  // Converts, if needed, the given value to a string used for encoding.\n  function encode_value_to_string(value) {\n    switch (typeof value) {\n      case 'undefined':\n        // Experimentation in Chrome shows that undefined is treated as zero length string.\n        return ''\n      case 'string':\n        return value\n      default: {\n        if (value === null) {\n          return 'null'\n        }\n        // Works for string, number, boolean, symbol, object, function, etc.\n        return value.toString()\n      }\n    }\n  }\n\n  globalThis.TextEncoder = class TextEncoder {\n    constructor() {}\n\n    encode(str) {\n      try {\n        if (supportsMetricsOnTextEncoding) {\n          host.hostcall_metrics_add(WASM_METRIC_TEXT_ENCODE_INVOCATION_TOTAL, 1)\n          host.hostcall_metrics_start_timer(WASM_METRIC_TEXT_ENCODE_MICROSECONDS_TOTAL)\n        }\n\n        const value = encode_value_to_string(str)\n        if (typeof value !== 'string') {\n          return new Uint8Array(0)\n        }\n\n        return new Uint8Array(utility.text_encoder_encode(value))\n      } finally {\n        if (supportsMetricsOnTextEncoding) {\n          host.hostcall_metrics_stop_timer(WASM_METRIC_TEXT_ENCODE_MICROSECONDS_TOTAL)\n        }\n      }\n    }\n\n    encodeInto(str, array) {\n      try {\n        if (supportsMetricsOnTextEncoding) {\n          host.hostcall_metrics_add(WASM_METRIC_TEXT_ENCODE_INVOCATION_TOTAL, 1)\n          host.hostcall_metrics_start_timer(WASM_METRIC_TEXT_ENCODE_MICROSECONDS_TOTAL)\n        }\n\n        if (!(array instanceof Uint8Array)) {\n          throw new Error('TextEncoder.encodeInto requires an Uint8Array')\n        }\n\n        const value = encode_value_to_string(str)\n        if (array.byteLength === 0 || typeof value !== 'string') {\n          return {\n            read: 0,\n            written: 0,\n          }\n        }\n\n        return utility.text_encoder_encode_into(value, array)\n      } finally {\n        if (supportsMetricsOnTextEncoding) {\n          host.hostcall_metrics_stop_timer(WASM_METRIC_TEXT_ENCODE_MICROSECONDS_TOTAL)\n        }\n      }\n    }\n\n    get encoding() {\n      return UTF_8\n    }\n  }\n\n  /// Value of a rejection that was not otherwise handled and was caught\n  /// by the main execution loop.\n  let unhandled_rejection = null\n\n  /// A map of pending fetches. The key is the request ID. Every time a new\n  /// fetch is issued, it is added to this map. When the fetch is resolved,\n  /// the corresponding entry is removed from the map.\n  let pending_fetches = new Map()\n\n  // Counts the number of times that waitUntil has been used.\n  let wait_until_used_counter = 0\n\n  // Counts the number of times that waitUntil has finished processing.\n  let wait_until_finished_counter = 0\n\n  function expect_number_of_args(args, expected) {\n    if (args.length !== expected) {\n      throw new Error(`Expected ${expected} arguments, got ${args.length}`)\n    }\n  }\n\n  function expect_min_number_of_args(args, expected) {\n    if (args.length < expected) {\n      throw new Error(`Expected at least ${expected} arguments, got ${args.length}`)\n    }\n  }\n\n  function create_context() {\n    // Attach origins to the global space so they can be accessed by the fetch function.\n    globalThis[Origins] = new EdgioSet(ENV_VAR_NAMESPACE_EDGIO_ORIGINS)\n    // Attach the pump function to the global space so it can be accessed by the HtmlTransformer callbacks.\n    globalThis.pump = p => {\n      return manage_main_loop(p, true)\n    }\n    let context = {\n      systemVars: EdgioDict(ENV_VAR_NAMESPACE_EDGIO_CONFIG),\n      environmentVars: EdgioDict(ENV_VAR_NAMESPACE_EDGIO_PROPENVVAR),\n      origins: globalThis[Origins],\n      requestVars: EdgioDict(ENV_VAR_NAMESPACE_EDGIO_USRVAR),\n      geo: EdgioDict(ENV_VAR_NAMESPACE_EDGIO_GEO),\n      device: EdgioDict(ENV_VAR_NAMESPACE_EDGIO_WURFL),\n      client: EdgioDict(ENV_VAR_NAMESPACE_EDGIO_VIRT),\n      metrics: new EdgioMetrics(),\n\n      // NOTE: Normally this is commented out. We only uncomment for testing\n      // featureFlags: EdgioDict(ENV_VAR_NAMESPACE_EDGIO_FEATURE_FLAGS),\n\n      respondWith: function () {\n        throw new Error(\n          'respondWith() has been replaced with `return <response>` from the edge function itself.'\n        )\n      },\n      waitUntil: function (promise) {\n        expect_number_of_args(arguments, 1)\n\n        ++wait_until_used_counter\n        // waitUntil ignores the return value of the promise.\n        // All we care about is that we wait out the promise.\n        Promise.resolve(promise).finally(() => {\n          ++wait_until_finished_counter\n        })\n      },\n    }\n    if (supportsInitClearHostCall) {\n      context.initClear = function () {\n        host.hostcall_init_clear()\n      }\n    }\n    return context\n  }\n\n  function parseCookie(cookie) {\n    const parts = cookie.split('=')\n    // Use trim because sometimes ';' is used and sometimes '; ' is used as cookie delimiter.\n    const key = parts[0].trim()\n    const value = parts[1]\n    return { key, value }\n  }\n\n  // Inject response.headers.set-cookie values into the options.headers.cookie\n  // Returns an array or set-cookie values. (Array is empty if no set-cookies found.)\n  function processSetCookies(options, response) {\n    // Make a dictionary for cookie values so we can deduplicate cookie names\n    let deduplicatedCookies = {}\n\n    // Start with any existing cookie values and populate cookieValues\n    const existingCookies = options.headers.cookie\n    if (existingCookies) {\n      const individualCookies = existingCookies.split(';')\n      for (let i = 0; i < individualCookies.length; i++) {\n        const { key, value } = parseCookie(individualCookies[i])\n        deduplicatedCookies[key] = value\n      }\n    }\n\n    // get setCookies and ensure it is an array so we can iterate on it.\n    let setCookies = response.headers.get('set-cookie') || []\n    if (!Array.isArray(setCookies)) {\n      setCookies = [setCookies]\n    }\n\n    for (let i = 0; i < setCookies.length; i++) {\n      // TODO: Do we need to honor SameSite=, Path= and Http(s)Only?\n      const { key, value } = parseCookie(setCookies[i].split(';')[0])\n      deduplicatedCookies[key] = value\n    }\n\n    // Assemble the new cookie: header if there are any cookies\n    const keys = Object.keys(deduplicatedCookies)\n    if (keys.length > 0) {\n      options.headers.cookie = ''\n      for (let i = 0; i < keys.length; i++) {\n        const key = keys[i]\n        const value = deduplicatedCookies[key]\n        options.headers.cookie += `${key}=${value}${i < keys.length - 1 ? '; ' : ''}`\n      }\n    }\n  }\n\n  // redirect =\n  //   - \"follow\" - Make a new fetch to follow any redirect responses (cookies/set-cookies are honored on redirect)\n  //   - \"manual\" - Return the result. This is not per Fetch API standard but it's useless to return an opaque response object in functions.\n  //   - \"error\" - Throws exception on any redirect responses\n  // Return an error when the total # of redirects exceeds MAX_REDIRECTS\n  async function handleRedirect(originalUrl, options, redirectedCount, response) {\n    // If the response is not a redirect, or there is no location header, resolve the promise normally\n    const location = response.headers.get('location')\n    if ([301, 302, 303, 307, 308].indexOf(response.status) < 0 || !location) {\n      response[Url] = originalUrl\n      response.redirected = redirectedCount > 0\n      return response\n    }\n\n    const redirect = options.redirect\n    if (redirect === 'error') {\n      throw new Error('redirect')\n    }\n\n    if (redirect === 'manual') {\n      // Contrary to specs which was written for browsers, we behave like node-fetch and return\n      // a response rather than an opaque redirect object.\n      return response\n    }\n\n    ++redirectedCount\n\n    // Redirects forward all the original request headers to the redirect request headers via 'options'\n    // Redirects aggregate the original response set-cookies and sends them as 'cookie' to the redirect request headers.\n    processSetCookies(options, response)\n\n    // Issue a new request that follows the redirect\n    const newResponse = await issueFetch(location, options, redirectedCount)\n    return newResponse\n  }\n\n  // Implementation of https://developer.mozilla.org/en-US/docs/Web/API/fetch\n  async function issueFetch(urlOrRequest, options, redirectedCount) {\n    let req\n    if (urlOrRequest instanceof Request) {\n      req = urlOrRequest\n    } else {\n      // According to the spec fetch() takes a string, a request Object or any\n      // other object that can be converted to a string.\n      if (typeof urlOrRequest !== 'string') {\n        if (\n          typeof urlOrRequest.toString !== 'function' ||\n          urlOrRequest.toString() === '[object Object]'\n        ) {\n          throw new Error(\n            'Invalid \"url\" argument in fetch() function. The \"url\" argument ' +\n              'must be a string, a Request object, or an object where toString() returns the url.'\n          )\n        }\n        urlOrRequest = urlOrRequest.toString()\n      }\n      // globalThis.fetch() and handleRedirect() ensure options always exists.\n      req = new Request(urlOrRequest, options)\n    }\n\n    // Ensure the fetch includes the minimum required fetch options\n    if (!options.edgio || !options.edgio.origin) {\n      throw new Error(`edgio.origin must be included in the fetch options for ${urlOrRequest}`)\n    }\n\n    // Ensure that the request body is on the host.\n    await req[MoveBodyToHost]()\n\n    // Set the provided fetch origin\n    const origin = options.edgio.origin\n    try {\n      host.hostcall_req_set_fetch_origin(req.edgioId, origin)\n    } catch {\n      throw new Error(\n        `Invalid edgio.origin: \"${origin}\". Must be one of: ${globalThis[Origins].keys().join(\n          ', '\n        )}`\n      )\n    }\n\n    //\n    // Map the various fetch options to the hostcall_req_* functions\n    //\n\n    // Helper functions for parsing fetch options\n    function getOptionInt(options, field, msg) {\n      const value = options[field]\n      if (value !== undefined) {\n        const iValue = parseInt(value)\n        if (isNaN(iValue)) {\n          throw new Error(`Invalid '${field}' value '${value}' specified. ${msg}`)\n        }\n        return iValue\n      }\n    }\n\n    // Set the fetch timeout, if provided\n    const timeout = getOptionInt(\n      options.edgio,\n      'timeout',\n      'Expected timeout in milliseconds as an integer.'\n    )\n    if (timeout !== undefined) {\n      try {\n        host.hostcall_req_set_fetch_timeout(req.edgioId, timeout)\n      } catch {\n        throw new Error(`Failed to set fetch timeout on request.`)\n      }\n    }\n\n    // If there are no options.edgio.caching, we skip this whole section.\n    // Same thing happens if the host does not support the new fetch options.\n    const caching = options.edgio.caching\n    if (supportsEapps409FetchOptions && caching) {\n      const bypass_cache = caching.bypass_cache\n      if (bypass_cache !== undefined) {\n        host.hostcall_req_set_fetch_bypass_cache(req.edgioId, !!bypass_cache)\n      }\n\n      if (caching.cache_key_query_string) {\n        const exclude_all = caching.cache_key_query_string.exclude_all\n        if (exclude_all !== undefined) {\n          host.hostcall_req_set_fetch_ckqs_exclude_all(req.edgioId, !!exclude_all)\n        }\n\n        const include_all = caching.cache_key_query_string.include_all\n        if (include_all !== undefined) {\n          host.hostcall_req_set_fetch_ckqs_include_all(req.edgioId, !!include_all)\n        }\n      } // if (caching.cache_key_query_string)\n\n      if (caching.max_age !== undefined) {\n        host.hostcall_req_set_fetch_max_age(req.edgioId, caching.max_age.toString())\n      }\n\n      if (supportsEapps563FetchTagUpsert) {\n        if (caching.tags !== undefined) {\n          host.hostcall_req_set_fetch_cache_tags(req.edgioId, caching.tags.toString())\n        }\n      }\n\n      if (caching.stale_while_revalidate !== undefined) {\n        host.hostcall_req_set_fetch_stale_while_revalidate(\n          req.edgioId,\n          caching.stale_while_revalidate.toString()\n        )\n      }\n    } // if (options.edgio.caching)\n\n    // Start the async fetch\n    host.hostcall_req_fetch_async(req.edgioId)\n\n    // Create a new promise and capture its resolve and reject\n    // functions so that we can invoke them from the outside.\n    let resolve\n    let reject\n    const promise = new Promise((promise_resolve, promise_reject) => {\n      resolve = promise_resolve\n      reject = promise_reject\n    })\n\n    // Add the promise to the list of pending promises\n    pending_fetches.set(req.edgioId, {\n      promise,\n      resolve,\n      reject,\n    })\n\n    // After this await, the original `Request` object is no longer valid in the host,\n    // and must not be used again. Because of this, we have to copy any fields we need available\n    // after this call.\n    const request_url = req.url\n    const response = await promise\n\n    return handleRedirect(request_url, options, redirectedCount, response)\n  }\n\n  globalThis.fetch = async function (urlOrRequest, options) {\n    expect_min_number_of_args(arguments, 1)\n\n    // Validate the options. Ensure .redirect and .headers exist\n    options = options || {}\n    if (!options.redirect) {\n      options.redirect = 'follow'\n    }\n    if (!options.headers) {\n      options.headers = {}\n    }\n    if (!options.edgio) {\n      options.edgio = {}\n    }\n    const validRedirects = ['error', 'follow', 'manual']\n    if (validRedirects.indexOf(options.redirect) < 0) {\n      throw new Error(\n        `redirect must be one of \"${validRedirects.join(', ')}\", not \"${options.redirect}\"`\n      )\n    }\n\n    // All fetches must specify an explicit origin (for now).\n    if (!options.edgio.origin) {\n      throw new Error(\n        `edgio.origin must be specified as a fetch option. Must be one of: ${globalThis[\n          Origins\n        ].keys().join(',')}`\n      )\n    }\n\n    return issueFetch(urlOrRequest, options, 0)\n  }\n\n  // If the user defined Router.edge_function_init_script then we run this code\n  // during the initialization phase of the SDK. Router.edge_function_init_script\n  // is translated to an edge function w/ a path '__edge_function_init_script__'\n  // and a function signature of handleHttpInit(context).\n  const getEdgeFunction = edgeFunctions.get('__edge_function_init_script__')\n  if (getEdgeFunction) {\n    const edgeInitFunction = getEdgeFunction()\n    if (typeof edgeInitFunction !== 'function') {\n      throw new Error(\n        'Edge Initialization Function specified by Router option \"edge_function_init_script\" ' +\n          'must have a named export \"handleHttpInit\". See ' +\n          'https://docs.edg.io/guides/v7/edge-functions#defining-edge-functions for more information.'\n      )\n    }\n    const context = create_context()\n    const init_promise = Promise.resolve(edgeInitFunction.bind(globalThis)(context))\n    manage_main_loop(init_promise, true)\n  }\n\n  // EdgeFunction main function. This function is invoked on every request.\n  // We return it from the SDK initialization closure because the closure\n  // is called only once and hides all the implementation details from\n  // the end developer code.\n  return function main(edgioRequestId) {\n    // Get the user function from the edge functions map as generated during the bundling.\n    const context = create_context()\n    const path = context.systemVars['__EDGE_FUNCTION_PATH__']\n    const getEdgeFunction = edgeFunctions.get(path)\n    if (!getEdgeFunction) {\n      throw new Error(`No edge function found for path: ${path}`)\n    }\n    // The EdgeFunction syntax is: export async function handleHttpRequest(request, context) { }\n    const edgeFunction = getEdgeFunction()\n    if (typeof edgeFunction !== 'function') {\n      throw new Error(\n        'Edge Function must have a named export \"handleHttpRequest\". See https://docs.edg.io/guides/v7/edge-functions#defining-edge-functions for more information.'\n      )\n    }\n\n    const req = new Request(null, {\n      edgio: {\n        id: edgioRequestId,\n      },\n    })\n\n    // The EdgeFunction syntax is: export async function handleHttpRequest(request, context) { }\n    // Use Promise.resolve() to promisify the value. If the value is already a promise, this is a no-op.\n    const main_promise = Promise.resolve(edgeFunction.bind(globalThis)(req, context))\n    manage_main_loop(main_promise, false)\n  }\n\n  function manage_main_loop(main_promise, is_init_function) {\n    // The state of the main promise. This is used as one of the signals to determine if we should stop the main loop.\n    let waiting_on_main_promise = true\n    const logPrefix = `sdk.js(${is_init_function ? 'handleHttpInit' : 'handleHttpRequest'}): `\n    host.hostcall_debug(`${logPrefix}start main loop`)\n\n    main_promise\n      .then(async response => {\n        if (is_init_function) {\n          // handleHttpInit must not return a value or a promise.\n          if (response !== undefined) {\n            host.hostcall_debug(`${logPrefix}return with non-undefined value, throwing exception`)\n            throw new Error(\n              `The handleHttpInit function must not return a value or a Promise (got ${typeof response})`\n            )\n          }\n          host.hostcall_debug(`${logPrefix}return with undefined (as expected)`)\n        } else {\n          // handleHttpRequest must return a Response or a Promise resolving to a Response.\n          if (!(response instanceof Response)) {\n            host.hostcall_debug(`${logPrefix}return with non-Response object, throwing exception`)\n            throw new Error(\n              `The handleHttpRequest function must return a Response or a Promise resolving to a Response (got ${typeof response})`\n            )\n          }\n\n          host.hostcall_debug(`${logPrefix}return with response object, sending it to client`)\n          await response[SendToClient]()\n        }\n      })\n      .catch(err => {\n        // TODO: Per https://jira.atlas.llnw.com/browse/EAPPS-208\n        // we must handle the rejected promises by using the provided\n        // QuickJS API, not in our own JavaScript code which might have\n        // errors of its own. To emulate the silent rejection, throw\n        // an exception in `globalThis.fetch` and then throw again\n        // in this method.\n        unhandled_rejection = err\n      })\n      .finally(() => {\n        waiting_on_main_promise = false\n      })\n\n    // Jobs are pending if:\n    // * Waiting on the main promise OR\n    // * There are more pending waitUntil promises\n    // This means that even if there are pending fetches, we should stop running.\n    function jobs_are_pending() {\n      return waiting_on_main_promise || wait_until_finished_counter < wait_until_used_counter\n    }\n\n    // This is the main loop that is executing pending jobs and pending promises.\n    // It:\n    // * Executes pending synchronous QuickJS jobs if there are any.\n    // * Waits for the main promise to resolve if it is still pending.\n    // * Evaluates if there are unhanded rejections and if so, throws them.\n    // * Waits on pending fetches if there are any.\n    /*eslint no-constant-condition: off*/\n    while (jobs_are_pending()) {\n      host.hostcall_debug(`${logPrefix}Executing pending jobs...`)\n\n      // Executes all the currently pending jobs inside of the QuickJS runtime.\n      // This may setup new pending fetches which is why we execute it before checking\n      // if there are any more pending fetches left. If an exception is thrown, this\n      // will short-circuit and return the error.\n      utility.execute_pending()\n\n      // If there is an unhandled rejection, throw it in the main loop so that\n      // it propagates to the host.\n      if (unhandled_rejection) {\n        const err = unhandled_rejection\n        unhandled_rejection = null\n        throw err\n      }\n\n      if (pending_fetches.size > 0) {\n        // Wait for the next ready response. This call blocks.\n        const [is_response, req_id, resp_id_or_err_code] = host.hostcall_resp_await_next()\n\n        host.hostcall_debug(\n          `${logPrefix}hostcall_resp_await_next: is_response(${is_response}), req_id(${req_id}), resp_id_or_err_code(${resp_id_or_err_code})`\n        )\n\n        // Get the pending request that has a ready response.\n        const pending_fetch = pending_fetches.get(req_id)\n        if (!pending_fetch) {\n          throw new Error(`${logPrefix}No pending fetch for ID ${req_id}`)\n        }\n        pending_fetches.delete(req_id)\n\n        // Resolve or reject the promise of the pending request based on\n        // the is_response flag.\n        const { resolve, reject } = pending_fetch\n        if (is_response) {\n          host.hostcall_debug(`${logPrefix}creating Response`)\n          const resp = new Response(null, {\n            edgio: {\n              id: resp_id_or_err_code,\n            },\n          })\n          resolve(resp)\n        } else {\n          host.hostcall_debug(`${logPrefix}creating ResponseError`)\n          const err = new ResponseError(resp_id_or_err_code)\n          reject(err)\n        }\n      }\n    }\n    host.hostcall_debug(`${logPrefix}no more pending jobs`)\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;AAAA;AAAA,6CAAAA,UAAAC,SAAA;AAAA;AACA,IAAAA,QAAO,UAAU;AAAA,MACf,WAAW;AAAA,MACX,WAAW;AAAA,MAGX,gCAAgC;AAAA,MAChC,iCAAiC;AAAA,MACjC,oCAAoC;AAAA,MACpC,uCAAuC;AAAA,MACvC,gCAAgC;AAAA,MAChC,6BAA6B;AAAA,MAC7B,+BAA+B;AAAA,MAC/B,8BAA8B;AAAA,MAC9B,OAAO;AAAA,MAGP,yCAAyC;AAAA,MACzC,6CAA6C;AAAA,MAC7C,2CAA2C;AAAA,MAC3C,+CAA+C;AAAA,MAC/C,0CAA0C;AAAA,MAC1C,0CAA0C;AAAA,MAC1C,4CAA4C;AAAA,MAC5C,4CAA4C;AAAA,MAE5C,uBAAuB;AAAA,IACzB;AAAA;AAAA;;;AC3BA;AAAA,8CAAAC,UAAAC,SAAA;AAAA;AAEA,IAAAA,QAAO,UAAU;AAAA,MACf,UAAU,OAAO,WAAW;AAAA,MAC5B,MAAM,OAAO,MAAM;AAAA,MACnB,YAAY,OAAO,cAAc;AAAA,MACjC,gBAAgB,OAAO,kBAAkB;AAAA,MACzC,UAAU,OAAO,WAAW;AAAA,MAC5B,SAAS,OAAO,UAAU;AAAA,MAC1B,QAAQ,OAAO,QAAQ;AAAA,MACvB,YAAY,OAAO,YAAY;AAAA,MAC/B,MAAM,OAAO,MAAM;AAAA,MACnB,SAAS,OAAO,UAAU;AAAA,MAC1B,UAAU,OAAO,UAAU;AAAA,MAC3B,WAAW,OAAO,YAAY;AAAA,MAC9B,YAAY,OAAO,aAAa;AAAA,MAChC,gBAAgB,OAAO,mBAAmB;AAAA,MAC1C,OAAO,OAAO,QAAQ;AAAA,MACtB,QAAQ,OAAO,SAAS;AAAA,MACxB,gBAAgB,OAAO,mBAAmB;AAAA,MAC1C,WAAW,OAAO,WAAW;AAAA,MAC7B,SAAS,OAAO,SAAS;AAAA,MACzB,SAAS,OAAO,eAAe;AAAA,MAC/B,oBAAoB,OAAO,oBAAoB;AAAA,MAC/C,0BAA0B,OAAO,0BAA0B;AAAA,MAC3D,2BAA2B,OAAO,2BAA2B;AAAA,MAC7D,iBAAiB,OAAO,iBAAiB;AAAA,MACzC,YAAY,OAAO,YAAY;AAAA,MAC/B,UAAU,OAAO,WAAW;AAAA,MAC5B,iBAAiB,OAAO,oBAAoB;AAAA,MAC5C,gBAAgB,OAAO,kBAAkB;AAAA,MACzC,eAAe,OAAO,gBAAgB;AAAA,MACtC,gBAAgB,OAAO,iBAAiB;AAAA,MACxC,cAAc,OAAO,gBAAgB;AAAA,MACrC,OAAO,OAAO,QAAQ;AAAA,MACtB,QAAQ,OAAO,QAAQ;AAAA,MACvB,kBAAkB,OAAO,kBAAkB;AAAA,MAC3C,KAAK,OAAO,KAAK;AAAA,IACnB;AAAA;AAAA;;;ACtCA;AAAA,yDAAAC,UAAAC,SAAA;AAAA;AAAA,QAAI,KAAG,CAAC,GAAE,MAAI,OAAK,KAAG,GAAG,IAAE,EAAC,SAAQ,CAAC,EAAC,GAAG,SAAQ,CAAC,GAAE,EAAE;AAAS,QAAI,KAAG,GAAG,MAAI;AAAA,IAAC,CAAC;AAAE,QAAI,IAAE,OAAO,OAAK,cAAY,IAAI;AAAlC,QAA4C,IAAE,OAAO,4BAA0B,IAAE,OAAO,yBAAyB,IAAI,WAAU,MAAM,IAAE;AAAvI,QAA4I,IAAE,KAAG,KAAG,OAAO,EAAE,OAAK,aAAW,EAAE,MAAI;AAAnL,QAAwL,KAAG,KAAG,IAAI,UAAU;AAA5M,QAAoN,IAAE,OAAO,OAAK,cAAY,IAAI;AAAlP,QAA4P,IAAE,OAAO,4BAA0B,IAAE,OAAO,yBAAyB,IAAI,WAAU,MAAM,IAAE;AAAvV,QAA4V,IAAE,KAAG,KAAG,OAAO,EAAE,OAAK,aAAW,EAAE,MAAI;AAAnY,QAAwY,KAAG,KAAG,IAAI,UAAU;AAA5Z,QAAoa,KAAG,OAAO,WAAS,cAAY,QAAQ;AAA3c,QAAqd,IAAE,KAAG,QAAQ,UAAU,MAAI;AAAhf,QAAqf,KAAG,OAAO,WAAS,cAAY,QAAQ;AAA5hB,QAAsiB,IAAE,KAAG,QAAQ,UAAU,MAAI;AAAjkB,QAAskB,KAAG,OAAO,WAAS,cAAY,QAAQ;AAA7mB,QAAunB,KAAG,KAAG,QAAQ,UAAU,QAAM;AAArpB,QAA0pB,KAAG,QAAQ,UAAU;AAA/qB,QAAurB,KAAG,OAAO,UAAU;AAA3sB,QAAotB,KAAG,SAAS,UAAU;AAA1uB,QAAmvB,KAAG,OAAO,UAAU;AAAvwB,QAA6wB,IAAE,OAAO,UAAU;AAAhyB,QAAsyB,IAAE,OAAO,UAAU;AAAzzB,QAAi0B,KAAG,OAAO,UAAU;AAAr1B,QAAi2B,KAAG,OAAO,UAAU;AAAr3B,QAAi4B,KAAG,OAAO,UAAU;AAAr5B,QAA05B,KAAG,MAAM,UAAU;AAA76B,QAAo7B,IAAE,MAAM,UAAU;AAAt8B,QAA28B,KAAG,MAAM,UAAU;AAA99B,QAAo+B,KAAG,KAAK;AAA5+B,QAAk/B,IAAE,OAAO,UAAQ,aAAW,OAAO,UAAU,UAAQ;AAAviC,QAA4iC,IAAE,OAAO;AAArjC,QAA2kC,IAAE,OAAO,UAAQ,cAAY,OAAO,OAAO,YAAU,WAAS,OAAO,UAAU,WAAS;AAAnqC,QAAwqC,IAAE,OAAO,UAAQ,cAAY,OAAO,OAAO,YAAU;AAA7tC,QAAsuC,IAAE,OAAO,UAAQ,cAAY,OAAO,gBAAc,OAAO,OAAO,gBAAc,IAAE,WAAS,YAAU,OAAO,cAAY;AAA51C,QAAi2C,KAAG,OAAO,UAAU;AAAr3C,QAA04C,MAAI,OAAO,WAAS,aAAW,QAAQ,iBAAe,OAAO,oBAAkB,CAAC,EAAE,cAAY,MAAM,YAAU,SAAS,GAAE;AAAC,aAAO,EAAE;AAAA,IAAS,IAAE;AAAM,aAAS,GAAG,GAAE,GAAE;AAAC,UAAG,MAAI,IAAE,KAAG,MAAI,KAAG,KAAG,MAAI,KAAG,KAAG,IAAE,QAAM,IAAE,OAAK,GAAG,KAAK,KAAI,CAAC;AAAE,eAAO;AAAE,UAAI,IAAE;AAAmC,UAAG,OAAO,KAAG,UAAS;AAAC,YAAI,IAAE,IAAE,IAAE,CAAC,GAAG,CAAC,CAAC,IAAE,GAAG,CAAC;AAAE,YAAG,MAAI,GAAE;AAAC,cAAI,IAAE,OAAO,CAAC,GAAE,IAAE,EAAE,KAAK,GAAE,EAAE,SAAO,CAAC;AAAE,iBAAO,EAAE,KAAK,GAAE,GAAE,KAAK,IAAE,MAAI,EAAE,KAAK,EAAE,KAAK,GAAE,eAAc,KAAK,GAAE,MAAK,EAAE;AAAA,QAAC;AAAA,MAAC;AAAC,aAAO,EAAE,KAAK,GAAE,GAAE,KAAK;AAAA,IAAC;AAAC,QAAI,IAAE,GAAG;AAAT,QAAW,KAAG,EAAE;AAAhB,QAAuB,KAAG,GAAG,EAAE,IAAE,KAAG;AAAK,IAAAA,QAAO,UAAQ,SAAS,EAAE,GAAE,GAAE,GAAE,GAAE;AAAC,UAAI,IAAE,KAAG,CAAC;AAAE,UAAG,EAAE,GAAE,YAAY,KAAG,EAAE,eAAa,YAAU,EAAE,eAAa;AAAS,cAAM,IAAI,UAAU,kDAAkD;AAAE,UAAG,EAAE,GAAE,iBAAiB,MAAI,OAAO,EAAE,mBAAiB,WAAS,EAAE,kBAAgB,KAAG,EAAE,oBAAkB,IAAE,IAAE,EAAE,oBAAkB;AAAM,cAAM,IAAI,UAAU,wFAAwF;AAAE,UAAI,IAAE,EAAE,GAAE,eAAe,IAAE,EAAE,gBAAc;AAAG,UAAG,OAAO,KAAG,aAAW,MAAI;AAAS,cAAM,IAAI,UAAU,+EAA+E;AAAE,UAAG,EAAE,GAAE,QAAQ,KAAG,EAAE,WAAS,QAAM,EAAE,WAAS,OAAK,EAAE,SAAS,EAAE,QAAO,EAAE,MAAI,EAAE,UAAQ,EAAE,SAAO;AAAG,cAAM,IAAI,UAAU,0DAA0D;AAAE,UAAG,EAAE,GAAE,kBAAkB,KAAG,OAAO,EAAE,oBAAkB;AAAU,cAAM,IAAI,UAAU,mEAAmE;AAAE,UAAI,IAAE,EAAE;AAAiB,UAAG,OAAO,IAAE;AAAI,eAAM;AAAY,UAAG,MAAI;AAAK,eAAM;AAAO,UAAG,OAAO,KAAG;AAAU,eAAO,IAAE,SAAO;AAAQ,UAAG,OAAO,KAAG;AAAS,eAAO,GAAG,GAAE,CAAC;AAAE,UAAG,OAAO,KAAG,UAAS;AAAC,YAAG,MAAI;AAAE,iBAAO,IAAE,IAAE,IAAE,IAAE,MAAI;AAAK,YAAI,IAAE,OAAO,CAAC;AAAE,eAAO,IAAE,GAAG,GAAE,CAAC,IAAE;AAAA,MAAC;AAAC,UAAG,OAAO,KAAG,UAAS;AAAC,YAAI,IAAE,OAAO,CAAC,IAAE;AAAI,eAAO,IAAE,GAAG,GAAE,CAAC,IAAE;AAAA,MAAC;AAAC,UAAI,IAAE,OAAO,EAAE,QAAM,MAAI,IAAE,EAAE;AAAM,UAAG,OAAO,IAAE,QAAM,IAAE,IAAG,KAAG,KAAG,IAAE,KAAG,OAAO,KAAG;AAAS,eAAO,EAAE,CAAC,IAAE,YAAU;AAAW,UAAI,IAAE,GAAG,GAAE,CAAC;AAAE,UAAG,OAAO,IAAE;AAAI,YAAE,CAAC;AAAA,eAAU,GAAG,GAAE,CAAC,KAAG;AAAE,eAAM;AAAa,eAAS,EAAE,GAAE,GAAE,IAAG;AAAC,YAAG,MAAI,IAAE,GAAG,KAAK,CAAC,GAAE,EAAE,KAAK,CAAC,IAAG,IAAG;AAAC,cAAI,KAAG,EAAC,OAAM,EAAE,MAAK;AAAE,iBAAO,EAAE,GAAE,YAAY,MAAI,GAAG,aAAW,EAAE,aAAY,EAAE,GAAE,IAAG,IAAE,GAAE,CAAC;AAAA,QAAC;AAAC,eAAO,EAAE,GAAE,GAAE,IAAE,GAAE,CAAC;AAAA,MAAC;AAAC,UAAG,OAAO,KAAG,cAAY,CAAC,GAAG,CAAC,GAAE;AAAC,YAAI,IAAE,GAAG,CAAC,GAAE,IAAE,EAAE,GAAE,CAAC;AAAE,eAAM,eAAa,IAAE,OAAK,IAAE,kBAAgB,OAAK,EAAE,SAAO,IAAE,QAAM,EAAE,KAAK,GAAE,IAAI,IAAE,OAAK;AAAA,MAAG;AAAC,UAAG,GAAG,CAAC,GAAE;AAAC,YAAI,IAAE,IAAE,EAAE,KAAK,OAAO,CAAC,GAAE,0BAAyB,IAAI,IAAE,EAAE,KAAK,CAAC;AAAE,eAAO,OAAO,KAAG,YAAU,CAAC,IAAE,EAAE,CAAC,IAAE;AAAA,MAAC;AAAC,UAAG,GAAG,CAAC,GAAE;AAAC,iBAAQ,IAAE,MAAI,GAAG,KAAK,OAAO,EAAE,QAAQ,CAAC,GAAE,IAAE,EAAE,cAAY,CAAC,GAAE,IAAE,GAAE,IAAE,EAAE,QAAO;AAAI,eAAG,MAAI,EAAE,GAAG,OAAK,MAAI,GAAG,GAAG,EAAE,GAAG,KAAK,GAAE,UAAS,CAAC;AAAE,eAAO,KAAG,KAAI,EAAE,cAAY,EAAE,WAAW,WAAS,KAAG,QAAO,KAAG,OAAK,GAAG,KAAK,OAAO,EAAE,QAAQ,CAAC,IAAE,KAAI;AAAA,MAAC;AAAC,UAAG,EAAE,CAAC,GAAE;AAAC,YAAG,EAAE,WAAS;AAAE,iBAAM;AAAK,YAAI,IAAE,EAAE,GAAE,CAAC;AAAE,eAAO,KAAG,CAAC,GAAG,CAAC,IAAE,MAAI,EAAE,GAAE,CAAC,IAAE,MAAI,OAAK,EAAE,KAAK,GAAE,IAAI,IAAE;AAAA,MAAI;AAAC,UAAG,GAAG,CAAC,GAAE;AAAC,YAAI,IAAE,EAAE,GAAE,CAAC;AAAE,eAAM,EAAE,WAAU,MAAM,cAAY,WAAU,KAAG,CAAC,GAAG,KAAK,GAAE,OAAO,IAAE,QAAM,OAAO,CAAC,IAAE,OAAK,EAAE,KAAK,GAAG,KAAK,cAAY,EAAE,EAAE,KAAK,GAAE,CAAC,GAAE,IAAI,IAAE,OAAK,EAAE,WAAS,IAAE,MAAI,OAAO,CAAC,IAAE,MAAI,QAAM,OAAO,CAAC,IAAE,OAAK,EAAE,KAAK,GAAE,IAAI,IAAE;AAAA,MAAI;AAAC,UAAG,OAAO,KAAG,YAAU,GAAE;AAAC,YAAG,MAAI,OAAO,EAAE,OAAK,cAAY;AAAE,iBAAO,EAAE,GAAE,EAAC,OAAM,IAAE,EAAC,CAAC;AAAE,YAAG,MAAI,YAAU,OAAO,EAAE,WAAS;AAAW,iBAAO,EAAE,QAAQ;AAAA,MAAC;AAAC,UAAG,GAAG,CAAC,GAAE;AAAC,YAAI,IAAE,CAAC;AAAE,eAAO,MAAI,GAAG,KAAK,GAAE,SAAS,GAAE,GAAE;AAAC,YAAE,KAAK,EAAE,GAAE,GAAE,IAAE,IAAE,SAAO,EAAE,GAAE,CAAC,CAAC;AAAA,QAAC,CAAC,GAAE,GAAG,OAAM,EAAE,KAAK,CAAC,GAAE,GAAE,CAAC;AAAA,MAAC;AAAC,UAAG,GAAG,CAAC,GAAE;AAAC,YAAI,IAAE,CAAC;AAAE,eAAO,MAAI,GAAG,KAAK,GAAE,SAAS,GAAE;AAAC,YAAE,KAAK,EAAE,GAAE,CAAC,CAAC;AAAA,QAAC,CAAC,GAAE,GAAG,OAAM,EAAE,KAAK,CAAC,GAAE,GAAE,CAAC;AAAA,MAAC;AAAC,UAAG,GAAG,CAAC;AAAE,eAAO,EAAE,SAAS;AAAE,UAAG,GAAG,CAAC;AAAE,eAAO,EAAE,SAAS;AAAE,UAAG,GAAG,CAAC;AAAE,eAAO,EAAE,SAAS;AAAE,UAAG,GAAG,CAAC;AAAE,eAAO,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC;AAAE,UAAG,GAAG,CAAC;AAAE,eAAO,EAAE,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC;AAAE,UAAG,GAAG,CAAC;AAAE,eAAO,EAAE,GAAG,KAAK,CAAC,CAAC;AAAE,UAAG,GAAG,CAAC;AAAE,eAAO,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC;AAAE,UAAG,CAAC,GAAG,CAAC,KAAG,CAAC,GAAG,CAAC,GAAE;AAAC,YAAI,IAAE,EAAE,GAAE,CAAC,GAAE,IAAE,KAAG,GAAG,CAAC,MAAI,OAAO,YAAU,aAAa,UAAQ,EAAE,gBAAc,QAAO,IAAE,aAAa,SAAO,KAAG,kBAAiB,IAAE,CAAC,KAAG,KAAG,OAAO,CAAC,MAAI,KAAG,KAAK,IAAE,EAAE,KAAK,EAAE,CAAC,GAAE,GAAE,EAAE,IAAE,IAAE,WAAS,IAAG,KAAG,KAAG,OAAO,EAAE,eAAa,aAAW,KAAG,EAAE,YAAY,OAAK,EAAE,YAAY,OAAK,MAAI,IAAG,IAAE,MAAI,KAAG,IAAE,MAAI,EAAE,KAAK,GAAG,KAAK,CAAC,GAAE,KAAG,CAAC,GAAE,KAAG,CAAC,CAAC,GAAE,IAAI,IAAE,OAAK;AAAI,eAAO,EAAE,WAAS,IAAE,IAAE,OAAK,IAAE,IAAE,MAAI,EAAE,GAAE,CAAC,IAAE,MAAI,IAAE,OAAK,EAAE,KAAK,GAAE,IAAI,IAAE;AAAA,MAAI;AAAC,aAAO,OAAO,CAAC;AAAA,IAAC;AAAE,aAAS,GAAG,GAAE,GAAE,GAAE;AAAC,UAAI,KAAG,EAAE,cAAY,OAAK,WAAS,MAAI;AAAI,aAAO,IAAE,IAAE;AAAA,IAAC;AAAC,aAAS,GAAG,GAAE;AAAC,aAAO,EAAE,KAAK,OAAO,CAAC,GAAE,MAAK,QAAQ;AAAA,IAAC;AAAC,aAAS,EAAE,GAAE;AAAC,aAAO,EAAE,CAAC,MAAI,qBAAmB,CAAC,KAAG,EAAE,OAAO,KAAG,YAAU,KAAK;AAAA,IAAG;AAAC,aAAS,GAAG,GAAE;AAAC,aAAO,EAAE,CAAC,MAAI,oBAAkB,CAAC,KAAG,EAAE,OAAO,KAAG,YAAU,KAAK;AAAA,IAAG;AAAC,aAAS,GAAG,GAAE;AAAC,aAAO,EAAE,CAAC,MAAI,sBAAoB,CAAC,KAAG,EAAE,OAAO,KAAG,YAAU,KAAK;AAAA,IAAG;AAAC,aAAS,GAAG,GAAE;AAAC,aAAO,EAAE,CAAC,MAAI,qBAAmB,CAAC,KAAG,EAAE,OAAO,KAAG,YAAU,KAAK;AAAA,IAAG;AAAC,aAAS,GAAG,GAAE;AAAC,aAAO,EAAE,CAAC,MAAI,sBAAoB,CAAC,KAAG,EAAE,OAAO,KAAG,YAAU,KAAK;AAAA,IAAG;AAAC,aAAS,GAAG,GAAE;AAAC,aAAO,EAAE,CAAC,MAAI,sBAAoB,CAAC,KAAG,EAAE,OAAO,KAAG,YAAU,KAAK;AAAA,IAAG;AAAC,aAAS,GAAG,GAAE;AAAC,aAAO,EAAE,CAAC,MAAI,uBAAqB,CAAC,KAAG,EAAE,OAAO,KAAG,YAAU,KAAK;AAAA,IAAG;AAAC,aAAS,GAAG,GAAE;AAAC,UAAG;AAAE,eAAO,KAAG,OAAO,KAAG,YAAU,aAAa;AAAO,UAAG,OAAO,KAAG;AAAS,eAAM;AAAG,UAAG,CAAC,KAAG,OAAO,KAAG,YAAU,CAAC;AAAE,eAAM;AAAG,UAAG;AAAC,eAAO,EAAE,KAAK,CAAC,GAAE;AAAA,MAAE,QAAC;AAAA,MAAM;AAAC,aAAM;AAAA,IAAE;AAAC,aAAS,GAAG,GAAE;AAAC,UAAG,CAAC,KAAG,OAAO,KAAG,YAAU,CAAC;AAAE,eAAM;AAAG,UAAG;AAAC,eAAO,EAAE,KAAK,CAAC,GAAE;AAAA,MAAE,QAAC;AAAA,MAAM;AAAC,aAAM;AAAA,IAAE;AAAC,QAAI,KAAG,OAAO,UAAU,kBAAgB,SAAS,GAAE;AAAC,aAAO,KAAK;AAAA,IAAI;AAAE,aAAS,EAAE,GAAE,GAAE;AAAC,aAAO,GAAG,KAAK,GAAE,CAAC;AAAA,IAAC;AAAC,aAAS,EAAE,GAAE;AAAC,aAAO,GAAG,KAAK,CAAC;AAAA,IAAC;AAAC,aAAS,GAAG,GAAE;AAAC,UAAG,EAAE;AAAK,eAAO,EAAE;AAAK,UAAI,IAAE,GAAG,KAAK,GAAG,KAAK,CAAC,GAAE,sBAAsB;AAAE,aAAO,IAAE,EAAE,KAAG;AAAA,IAAI;AAAC,aAAS,GAAG,GAAE,GAAE;AAAC,UAAG,EAAE;AAAQ,eAAO,EAAE,QAAQ,CAAC;AAAE,eAAQ,IAAE,GAAE,IAAE,EAAE,QAAO,IAAE,GAAE;AAAI,YAAG,EAAE,OAAK;AAAE,iBAAO;AAAE,aAAM;AAAA,IAAE;AAAC,aAAS,GAAG,GAAE;AAAC,UAAG,CAAC,KAAG,CAAC,KAAG,OAAO,KAAG;AAAS,eAAM;AAAG,UAAG;AAAC,UAAE,KAAK,CAAC;AAAE,YAAG;AAAC,YAAE,KAAK,CAAC;AAAA,QAAC,QAAC;AAAM,iBAAM;AAAA,QAAE;AAAC,eAAO,aAAa;AAAA,MAAG,QAAC;AAAA,MAAM;AAAC,aAAM;AAAA,IAAE;AAAC,aAAS,GAAG,GAAE;AAAC,UAAG,CAAC,KAAG,CAAC,KAAG,OAAO,KAAG;AAAS,eAAM;AAAG,UAAG;AAAC,UAAE,KAAK,GAAE,CAAC;AAAE,YAAG;AAAC,YAAE,KAAK,GAAE,CAAC;AAAA,QAAC,QAAC;AAAM,iBAAM;AAAA,QAAE;AAAC,eAAO,aAAa;AAAA,MAAO,QAAC;AAAA,MAAM;AAAC,aAAM;AAAA,IAAE;AAAC,aAAS,GAAG,GAAE;AAAC,UAAG,CAAC,MAAI,CAAC,KAAG,OAAO,KAAG;AAAS,eAAM;AAAG,UAAG;AAAC,eAAO,GAAG,KAAK,CAAC,GAAE;AAAA,MAAE,QAAC;AAAA,MAAM;AAAC,aAAM;AAAA,IAAE;AAAC,aAAS,GAAG,GAAE;AAAC,UAAG,CAAC,KAAG,CAAC,KAAG,OAAO,KAAG;AAAS,eAAM;AAAG,UAAG;AAAC,UAAE,KAAK,CAAC;AAAE,YAAG;AAAC,YAAE,KAAK,CAAC;AAAA,QAAC,QAAC;AAAM,iBAAM;AAAA,QAAE;AAAC,eAAO,aAAa;AAAA,MAAG,QAAC;AAAA,MAAM;AAAC,aAAM;AAAA,IAAE;AAAC,aAAS,GAAG,GAAE;AAAC,UAAG,CAAC,KAAG,CAAC,KAAG,OAAO,KAAG;AAAS,eAAM;AAAG,UAAG;AAAC,UAAE,KAAK,GAAE,CAAC;AAAE,YAAG;AAAC,YAAE,KAAK,GAAE,CAAC;AAAA,QAAC,QAAC;AAAM,iBAAM;AAAA,QAAE;AAAC,eAAO,aAAa;AAAA,MAAO,QAAC;AAAA,MAAM;AAAC,aAAM;AAAA,IAAE;AAAC,aAAS,GAAG,GAAE;AAAC,aAAM,CAAC,KAAG,OAAO,KAAG,WAAS,QAAG,OAAO,cAAY,OAAK,aAAa,cAAY,OAAG,OAAO,EAAE,YAAU,YAAU,OAAO,EAAE,gBAAc;AAAA,IAAU;AAAC,aAAS,GAAG,GAAE,GAAE;AAAC,UAAG,EAAE,SAAO,EAAE,iBAAgB;AAAC,YAAI,IAAE,EAAE,SAAO,EAAE,iBAAgB,IAAE,SAAO,IAAE,qBAAmB,IAAE,IAAE,MAAI;AAAI,eAAO,GAAG,EAAE,KAAK,GAAE,GAAE,EAAE,eAAe,GAAE,CAAC,IAAE;AAAA,MAAC;AAAC,UAAI,IAAE,EAAE,KAAK,EAAE,KAAK,GAAE,YAAW,MAAM,GAAE,gBAAe,EAAE;AAAE,aAAO,GAAG,GAAE,UAAS,CAAC;AAAA,IAAC;AAAC,aAAS,GAAG,GAAE;AAAC,UAAI,IAAE,EAAE,WAAW,CAAC,GAAE,IAAE,EAAC,GAAE,KAAI,GAAE,KAAI,IAAG,KAAI,IAAG,KAAI,IAAG,IAAG,EAAE;AAAG,aAAO,IAAE,OAAK,IAAE,SAAO,IAAE,KAAG,MAAI,MAAI,GAAG,KAAK,EAAE,SAAS,EAAE,CAAC;AAAA,IAAC;AAAC,aAAS,EAAE,GAAE;AAAC,aAAM,YAAU,IAAE;AAAA,IAAG;AAAC,aAAS,EAAE,GAAE;AAAC,aAAO,IAAE;AAAA,IAAQ;AAAC,aAAS,GAAG,GAAE,GAAE,GAAE,GAAE;AAAC,UAAI,IAAE,IAAE,EAAE,GAAE,CAAC,IAAE,EAAE,KAAK,GAAE,IAAI;AAAE,aAAO,IAAE,OAAK,IAAE,QAAM,IAAE;AAAA,IAAG;AAAC,aAAS,GAAG,GAAE;AAAC,eAAQ,IAAE,GAAE,IAAE,EAAE,QAAO;AAAI,YAAG,GAAG,EAAE,IAAG;AAAA,CACpkQ,KAAG;AAAE,iBAAM;AAAG,aAAM;AAAA,IAAE;AAAC,aAAS,GAAG,GAAE,GAAE;AAAC,UAAI;AAAE,UAAG,EAAE,WAAS;AAAI,YAAE;AAAA,eAAY,OAAO,EAAE,UAAQ,YAAU,EAAE,SAAO;AAAE,YAAE,EAAE,KAAK,MAAM,EAAE,SAAO,CAAC,GAAE,GAAG;AAAA;AAAO,eAAO;AAAK,aAAM,EAAC,MAAK,GAAE,MAAK,EAAE,KAAK,MAAM,IAAE,CAAC,GAAE,CAAC,EAAC;AAAA,IAAC;AAAC,aAAS,EAAE,GAAE,GAAE;AAAC,UAAG,EAAE,WAAS;AAAE,eAAM;AAAG,UAAI,IAAE;AAAA,IAC5P,EAAE,OAAK,EAAE;AAAK,aAAO,IAAE,EAAE,KAAK,GAAE,MAAI,CAAC,IAAE;AAAA,IACvC,EAAE;AAAA,IAAI;AAAC,aAAS,EAAE,GAAE,GAAE;AAAC,UAAI,IAAE,EAAE,CAAC,GAAE,IAAE,CAAC;AAAE,UAAG,GAAE;AAAC,UAAE,SAAO,EAAE;AAAO,iBAAQ,IAAE,GAAE,IAAE,EAAE,QAAO;AAAI,YAAE,KAAG,EAAE,GAAE,CAAC,IAAE,EAAE,EAAE,IAAG,CAAC,IAAE;AAAA,MAAE;AAAC,UAAI,IAAE,OAAO,KAAG,aAAW,EAAE,CAAC,IAAE,CAAC,GAAE;AAAE,UAAG,GAAE;AAAC,YAAE,CAAC;AAAE,iBAAQ,IAAE,GAAE,IAAE,EAAE,QAAO;AAAI,YAAE,MAAI,EAAE,MAAI,EAAE;AAAA,MAAE;AAAC,eAAQ,KAAK;AAAE,SAAC,EAAE,GAAE,CAAC,KAAG,KAAG,OAAO,OAAO,CAAC,CAAC,MAAI,KAAG,IAAE,EAAE,UAAQ,KAAG,EAAE,MAAI,cAAa,WAAS,GAAG,KAAK,UAAS,CAAC,IAAE,EAAE,KAAK,EAAE,GAAE,CAAC,IAAE,OAAK,EAAE,EAAE,IAAG,CAAC,CAAC,IAAE,EAAE,KAAK,IAAE,OAAK,EAAE,EAAE,IAAG,CAAC,CAAC;AAAG,UAAG,OAAO,KAAG;AAAW,iBAAQ,IAAE,GAAE,IAAE,EAAE,QAAO;AAAI,aAAG,KAAK,GAAE,EAAE,EAAE,KAAG,EAAE,KAAK,MAAI,EAAE,EAAE,EAAE,IAAE,QAAM,EAAE,EAAE,EAAE,KAAI,CAAC,CAAC;AAAE,aAAO;AAAA,IAAC;AAAA;AAAA;;;ACH7e;AAAA,sDAAAC,UAAAC,SAAA;AAAA;AAAA,QAAM;AAAA,MACJ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,IAAI;AAEJ,QAAM,YACJ,QACA,IAAI,SAAS;AACX,aAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,YAAI;AACF,kBAAQ,GAAG,GAAG,IAAI,CAAC;AAAA,QACrB,SAAS,KAAP;AACA,iBAAO,GAAG;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH;AAEF,QAAM,kCAAN,MAAsC;AAAA,MACpC,YAAY,QAAQ;AAClB,aAAK,UAAU;AAAA,MACjB;AAAA,MAEA,QAAQ,MAAM;AACZ,aAAK,QAAQ,KAAK,IAAI;AAAA,MACxB;AAAA,MAEA,QAAQ;AACN,aAAK,QAAQ,KAAK;AAAA,MACpB;AAAA,MAEA,MAAM,OAAO;AACX,aAAK,QAAQ,KAAK,KAAK;AAAA,MACzB;AAAA,IACF;AAEA,QAAM,+BAAN,MAAmC;AAAA,MACjC,YAAY,QAAQ;AAClB,aAAK,UAAU;AAAA,MACjB;AAAA,MAEA,QAAQ,MAAM;AACZ,aAAK,QAAQ,KAAK,IAAI;AAAA,MACxB;AAAA,MAEA,QAAQ;AACN,aAAK,QAAQ,KAAK;AAAA,MACpB;AAAA,MAEA,MAAM,OAAO;AACX,aAAK,QAAQ,KAAK,KAAK;AAAA,MACzB;AAAA,IACF;AAEA,QAAM,iBAAN,MAAqB;AAAA,MACnB,YAAY,kBAAkB,iBAAiB;AAC7C,aAAK,oBAAoB;AACzB,aAAK,mBAAmB;AAExB,YAAI,kBAAkB,SAAS,SAAS;AACtC,eAAK,cAAc,IAAI,6BAA6B,IAAI;AAAA,QAC1D,OAAO;AACL,eAAK,cAAc,IAAI,gCAAgC,IAAI;AAAA,QAC7D;AAEA,aAAK,UAAU,CAAC;AAChB,aAAK,QAAQ;AACb,aAAK,cAAc;AAEnB,YAAI,kBAAkB,OAAO;AAG3B,oBAAU,iBAAiB,KAAK,EAAE,KAAK,WAAW,EAAE,MAAM,SAAO;AAC/D,iBAAK,YAAY,MAAM,GAAG;AAAA,UAC5B,CAAC;AAAA,QACH;AAAA,MACF;AAAA,MAEA,IAAI,SAAS;AACX,eAAO;AAAA,MACT;AAAA,MAEA,CAAC,OAAO,iBAAiB;AACvB,eAAO;AAAA,MACT;AAAA,MAEA,MAAM,OAAO;AACX,YAAI,KAAK,qBAAqB;AAC5B,gBAAM,IAAI;AAAA,YACR;AAAA,UACF;AAAA,QACF;AAGA,YAAI,KAAK,aAAa;AACpB,gBAAM,KAAK;AAAA,QACb;AAEA,YAAI,KAAK,QAAQ,SAAS,GAAG;AAC3B,gBAAM,YAAY,KAAK,QAAQ,MAAM;AACrC,cAAI,UAAU,OAAO;AAEnB,iBAAK,cAAc,UAAU;AAC7B,kBAAM,UAAU;AAAA,UAClB;AAEA,iBAAO;AAAA,QACT;AAGA,aAAK,sBAAsB,IAAI,QAAQ,CAAC,SAAS,WAAW;AAC1D,eAAK,6BAA6B;AAClC,eAAK,4BAA4B;AAAA,QACnC,CAAC;AAED,eAAO,KAAK;AAAA,MACd;AAAA,MAEA,KAAK,MAAM;AACT,YAAI,KAAK,OAAO;AACd;AAAA,QACF;AAEA,YAAI,SAAS,QAAW;AACtB,eAAK,QAAQ,KAAK,EAAE,MAAM,KAAK,CAAC;AAChC,eAAK,QAAQ;AAAA,QACf,WAAW,gBAAgB,OAAO;AAChC,eAAK,QAAQ,KAAK,EAAE,OAAO,MAAM,MAAM,KAAK,CAAC;AAC7C,eAAK,QAAQ;AAAA,QACf,OAAO;AACL,eAAK,QAAQ,KAAK,EAAE,OAAO,MAAM,MAAM,MAAM,CAAC;AAAA,QAChD;AAGA,YAAI,KAAK,qBAAqB;AAC5B,eAAK,sBAAsB;AAC3B,gBAAM,UAAU,KAAK;AACrB,eAAK,6BAA6B;AAClC,gBAAM,SAAS,KAAK;AACpB,eAAK,4BAA4B;AAEjC,gBAAM,YAAY,KAAK,QAAQ,MAAM;AAErC,cAAI,UAAU,OAAO;AAEnB,iBAAK,cAAc,UAAU;AAC7B,mBAAO,UAAU,KAAK;AAAA,UACxB,OAAO;AACL,oBAAQ,SAAS;AAAA,UACnB;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,IAAAA,QAAO,UAAU;AAAA,MACf;AAAA,IACF;AAAA;AAAA;;;ACnKA;AAAA,mEAAAC,UAAAC,SAAA;AAAA;AAAA,QAAM;AAAA,MACJ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,IAAI;AACJ,QAAM,EAAE,sBAAsB,IAAI;AAIlC,aAAS,6BAA6B,EAAE,MAAM,cAAc,GAAG;AAC7D,UAAI;AACJ,UAAI;AAEJ,YAAM,6BAA6B,iBAAiB,cAAc;AAClE,UAAI,4BAA4B;AAE9B,cAAM,6BAAN,MAAgC;AAAA,UAI9B,YAAY,iBAAiB,gBAAgB;AAC3C,gBAAI,KAAK,eAAe,4BAA2B;AACjD,oBAAM,IAAI;AAAA,gBACR,GAAG;AAAA,cACL;AAAA,YACF;AACA,iBAAK,mBAAmB;AACxB,iBAAK,kBAAkB;AACvB,iBAAK,QAAQ;AACb,iBAAK,kBAAkB;AAAA,UACzB;AAAA,UAEA,MAAM,OAAO;AACX,gBAAI,KAAK,OAAO;AACd,qBAAO,EAAE,OAAO,QAAW,MAAM,KAAK;AAAA,YACxC;AAGA,kBAAM,KAAK,iBAAiB,gBAAgB;AAE5C,iBAAK,iBAAiB,YAAY;AAElC,kBAAM,WAAW,KAAK;AAAA,cACpB,KAAK,iBAAiB;AAAA,cACtB,KAAK;AAAA,cACL,2BAA0B;AAAA,YAC5B;AACA,gBAAI,aAAa,QAAW;AAC1B,mBAAK,QAAQ;AACb,qBAAO,EAAE,OAAO,QAAW,MAAM,KAAK;AAAA,YACxC;AAEA,iBAAK,mBAAmB,SAAS;AACjC,kBAAM,QAAQ,IAAI,WAAW,QAAQ;AACrC,mBAAO,EAAE,OAAO,OAAO,MAAM,MAAM;AAAA,UACrC;AAAA,QACF;AAxCA,YAAM,4BAAN;AACE,sBADI,2BACG,kBAAiB,KAAK;AAyC/B,4CAAoC,MAAM,0CACxC,0BACA;AAAA,UACA,YAAY,UAAU;AACpB,kBAAM,UAAU,KAAK,4BAA4B;AAAA,UACnD;AAAA,QACF;AAEA,2CAAmC,MAAM,yCACvC,0BACA;AAAA,UACA,YAAY,SAAS;AACnB,kBAAM,SAAS,KAAK,2BAA2B;AAAA,UACjD;AAAA,QACF;AAEA,eAAO;AAAA,UACL;AAAA,UACA;AAAA,UACA;AAAA,QACF;AAAA,MACF,OAAO;AAIL,cAAM,6BAAN,MAAgC;AAAA,UAI9B,YAAY,IAAI,WAAW;AACzB,gBAAI,KAAK,eAAe,4BAA2B;AACjD,oBAAM,IAAI;AAAA,gBACR,GAAG;AAAA,cACL;AAAA,YACF;AACA,iBAAK,WAAW;AAChB,iBAAK,WAAW;AAChB,iBAAK,QAAQ;AAAA,UACf;AAAA,UAEA,MAAM,OAAO;AAGX,kBAAM,OAAO,IAAI,WAAW,KAAK,SAAS,KAAK,QAAQ,CAAC;AACxD,iBAAK,QAAQ;AAEb,mBAAO,EAAE,OAAO,KAAK;AAAA,UACvB;AAAA,QACF;AAvBA,YAAM,4BAAN;AACE,sBADI,2BACG,eAAc;AAwBvB,4CAAoC,MAAM,0CACxC,0BACA;AAAA,UACA,YAAY,UAAU;AACpB,kBAAM,UAAU,KAAK,sBAAsB;AAAA,UAC7C;AAAA,QACF;AAEA,2CAAmC,MAAM,yCACvC,0BACA;AAAA,UACA,YAAY,SAAS;AACnB,kBAAM,SAAS,KAAK,qBAAqB;AAAA,UAC3C;AAAA,QACF;AAAA,MACF;AAEA,aAAO;AAAA,QACL;AAAA,QACA;AAAA,MACF;AAAA,IACF;AAEA,IAAAA,QAAO,UAAU;AAAA;AAAA;;;AC1HjB,OAAO,UAAU,SAAU,SAAS,eAAe;AACjD,QAAM,EAAE,MAAM,SAAS,cAAc,IAAI;AACzC,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI;AACJ,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI;AAGJ,QAAM,6BAA6B,iBAAiB,cAAc;AAClE,QAAM,+BAA+B,iBAAiB,cAAc;AACpE,QAAM,4BAA4B,iBAAiB,cAAc;AACjE,QAAM,iCACJ,iBAAiB,cAAc;AACjC,QAAM,0BAA0B,iBAAiB,cAAc;AAG/D,QAAM,uBAAuB,UAAU,qCAAqC;AAC5E,MAAI,gCAAgC;AACpC,MAAI;AACF,oCAAgC,qBAAqB,IAAI,uBAAuB;AAAA,EAClF,SAAS,IAAP;AAAA,EAGF;AAKA,QAAM,UAAU;AAGhB,MAAI,0BAA0B;AAC9B,QAAM,4BAA4B;AAClC,QAAM,mBAAmB,MAAM,IAAI,OAAO,uBAAuB;AACjE,WAAS,oBAAoB,YAAY,MAAM;AAE7C,YAAQ,iBAAiB,CAAC;AAE1B,QAAI,KAAK,SAAS,GAAG;AAEnB,UAAI,WAAW,KAAK;AACpB,UAAI,OAAO,aAAa,UAAU;AAGhC,aAAK,MAAM;AAGX,mBAAW,SAAS,QAAQ,cAAc,WAAS;AACjD,cAAI,KAAK,WAAW,GAAG;AACrB,mBAAO;AAAA,UACT;AAEA,gBAAM,MAAM,KAAK,MAAM;AACvB,kBAAQ;AAAA,iBACD;AAAA,iBACA;AACH,qBAAO,QAAQ,GAAG;AAAA,iBACf;AAAA,iBACA;AACH,qBAAO,SAAS,KAAK,EAAE,EAAE,SAAS;AAAA,iBAC/B;AACH,qBAAO,IAAI,SAAS;AAAA,iBACjB;AACH,qBAAO,WAAW,GAAG,EAAE,SAAS;AAAA;AAEhC,qBAAO;AAAA;AAAA,QAEb,CAAC;AACD,aAAK,QAAQ,QAAQ;AAAA,MACvB;AAAA,IACF;AAIA,aAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AACpC,UAAI,MAAM,GAAG;AACX,gBAAQ,GAAG;AAAA,MACb;AAEA,YAAM,MAAM,KAAK;AACjB,YAAM,OAAO,OAAO;AAGpB,cAAQ;AAAA,aACD;AACH,kBAAQ,GAAG;AACX;AAAA,aACG;AAAA,aACA;AACH,kBAAQ,IAAI,SAAS,CAAC;AACtB;AAAA,aACG;AACH,kBAAQ,MAAM,SAAS,OAAO;AAC9B;AAAA,aACG;AACH,kBAAQ,IAAI;AACZ;AAAA;AAEA,cAAI,QAAQ,MAAM;AAChB,oBAAQ,MAAM;AAAA,UAChB,OAAO;AACL,oBAAQ,QAAQ,GAAG,CAAC;AAAA,UACtB;AACA;AAAA;AAAA,IAEN;AAEA,YAAQ,IAAI;AAAA,EACd;AAGA,WAAS,aAAa,OAAO,MAAM;AACjC,UAAM,UAAU,QAAQ,iBAAiB,KAAK,MAAM,EAAE;AACtD,QAAI;AACF,aAAO,oBAAoB,SAAS,GAAG,IAAI;AAAA,IAC7C,SAAS,GAAP;AACA,cAAQ,mCAAmC;AAC3C,cAAQ,EAAE,SAAS,CAAC;AACpB,cAAQ,IAAI;AAAA,IACd;AAAA,EACF;AAGA,QAAM,kBAAkB,oBAAI,IAAI;AAChC,aAAW,UAAU;AAAA,IACnB,QAAQ,SAAU,cAAc,MAAM;AACpC,UAAI,CAAC,WAAW;AACd,qBAAa,WAAW,qBAAqB,GAAG,IAAI;AAAA,MACtD;AAAA,IACF;AAAA,IACA,OAAO,WAAY;AAAA,IAEnB;AAAA,IACA,OAAO,SAAU,OAAO;AACtB,sBAAgB,IAAI,QAAQ,gBAAgB,IAAI,KAAK,KAAK,KAAK,CAAC;AAChE,iBAAW,QAAQ,IAAI,GAAG,UAAU,gBAAgB,IAAI,KAAK,GAAG;AAAA,IAClE;AAAA,IACA,YAAY,SAAU,OAAO;AAC3B,sBAAgB,IAAI,OAAO,CAAC;AAAA,IAC9B;AAAA,IACA,OAAO,aAAa,KAAK,WAAW,SAAS,SAAS;AAAA,IACtD,KAAK,YAAa,MAAM;AAEtB,aAAO,WAAW,QAAQ,IAAI,GAAG,IAAI;AAAA,IACvC;AAAA,IAEA,QAAQ,YAAa,MAAM;AAEzB,aAAO,WAAW,QAAQ,IAAI,GAAG,IAAI;AAAA,IACvC;AAAA,IACA,OAAO,aAAa,KAAK,WAAW,SAAS,SAAS;AAAA,IACtD,OAAO,YAAa,MAAM;AACxB,UAAI,SAAS,QAAW;AACtB,mBAAW,QAAQ,IAAI,GAAG,IAAI;AAAA,MAChC;AAEA,iCAA2B;AAAA,IAC7B;AAAA,IACA,gBAAgB,YAAa,MAAM;AAEjC,aAAO,WAAW,QAAQ,MAAM,GAAG,IAAI;AAAA,IACzC;AAAA,IACA,UAAU,WAAY;AACpB,gCAA0B,KAAK,IAAI,0BAA0B,2BAA2B,CAAC;AAAA,IAC3F;AAAA,IACA,MAAM,aAAa,KAAK,WAAW,SAAS,SAAS;AAAA,IACrD,KAAK,aAAa,KAAK,WAAW,SAAS,SAAS;AAAA,IACpD,SAAS,WAAY;AAAA,IAErB;AAAA,IACA,OAAO,SAAU,MAAM,SAAS;AAE9B,aAAO,WAAW,QAAQ,KAAK,yBAAyB,MAAM,OAAO;AAAA,IACvE;AAAA,IACA,MAAM,WAAY;AAAA,IAElB;AAAA,IACA,SAAS,SAAU,OAAO;AAExB,aAAO,WAAW,QAAQ,KAAK,2BAA2B,KAAK;AAAA,IACjE;AAAA,IACA,SAAS,SAAU,OAAO;AAExB,aAAO,WAAW,QAAQ,KAAK,2BAA2B,KAAK;AAAA,IACjE;AAAA,IACA,WAAW,WAAY;AAAA,IAEvB;AAAA,IACA,OAAO,aAAa,KAAK,WAAW,SAAS,SAAS;AAAA,IACtD,MAAM,aAAa,KAAK,WAAW,SAAS,SAAS;AAAA,EACvD;AAaA,QAAM,EAAE,eAAe,IAAI;AAC3B,aAAW,iBAAiB;AAG5B,QAAM,EAAE,mCAAmC,iCAAiC,IAC1E,uCAAiD,OAAO;AAG1D,QAAM,4BAA4B;AAAA,IAChC,YAAY,UAAU;AACpB,WAAK,kBAAkB;AAAA,IACzB;AAAA,IAEA,YAAY;AACV,aAAO,IAAI,kCAAkC,KAAK,eAAe;AAAA,IACnE;AAAA,EACF;AACA,QAAM,2BAA2B;AAAA,IAC/B,YAAY,SAAS;AACnB,WAAK,iBAAiB;AAAA,IACxB;AAAA,IAEA,YAAY;AACV,aAAO,IAAI,iCAAiC,KAAK,cAAc;AAAA,IACjE;AAAA,EACF;AAKA,QAAM,aAAa;AAAA,IAEjB,YAAY,IAAI,SAAS,EAAE,UAAU,SAAS,OAAO,QAAQ,UAAU,MAAM,GAAG;AAC9E,UAAI,KAAK,eAAe,cAAc;AACpC,cAAM,IAAI;AAAA,UACR,GAAG;AAAA,QACL;AAAA,MACF;AAEA,WAAK,WAAW;AAChB,WAAK,YAAY;AACjB,WAAK,WAAW;AAChB,WAAK,SAAS;AACd,WAAK,UAAU;AACf,WAAK,YAAY;AACjB,WAAK,SAAS;AAUd,UAAI,MAAM,QAAQ,OAAO,GAAG;AAC1B,gBAAQ,QAAQ,OAAK;AAEnB,cAAI,CAAC,MAAM,QAAQ,CAAC,GAAG;AACrB,kBAAM,IAAI;AAAA,cACR,yFAAyF,eAAe,OAAO;AAAA,YACjH;AAAA,UACF;AACA,cAAI,EAAE,WAAW,GAAG;AAClB,kBAAM,IAAI;AAAA,cACR,yFAAyF,yBAAyB,EAAE;AAAA,YACtH;AAAA,UACF;AACA,eAAK,eAAe,WAAW,IAAI;AACnC,eAAK,OAAO,EAAE,IAAI,EAAE,EAAE;AAAA,QACxB,CAAC;AAAA,MACH,WAAW,WAAW,mBAAmB,SAAS;AAEhD,cAAM,aAAa,QAAQ,OAAO;AAClC,eAAO,KAAK,UAAU,EAAE,QAAQ,UAAQ;AAGtC,qBAAW,MAAM,QAAQ,WAAS;AAChC,iBAAK,OAAO,MAAM,KAAK;AAAA,UACzB,CAAC;AAAA,QACH,CAAC;AAAA,MACH,WAAW,WAAW,mBAAmB,cAAc;AACrD,mBAAW,OAAO,QAAQ,KAAK,GAAG;AAChC,qBAAW,SAAS,QAAQ,iBAAiB,GAAG,GAAG;AACjD,iBAAK,OAAO,KAAK,KAAK;AAAA,UACxB;AAAA,QACF;AAAA,MACF,WACE,WACA,SAAS,UAAU,SAAS,KAAK,QAAQ,WAAW,EAAE,MAAM,SAAS,GACrE;AAEA,cAAM,IAAI;AAAA,UACR,yFAAyF,SAAS,UAAU,SAAS;AAAA,YACnH,QAAQ;AAAA,UACV;AAAA,QACF;AAAA,MACF,WAAW,OAAO,YAAY,UAAU;AACtC,eAAO,KAAK,OAAO,EAAE,QAAQ,UAAQ;AACnC,eAAK,OAAO,MAAM,QAAQ,KAAK;AAAA,QACjC,CAAC;AAAA,MACH,WAAW,YAAY,QAAW;AAEhC,cAAM,IAAI;AAAA,UACR,yEAAyE,OAAO;AAAA,QAClF;AAAA,MACF;AAAA,IACF;AAAA,IAGA,cAAc,MAAM;AAClB,UAAI,SAAS,QAAW;AACtB,cAAM,IAAI,MAAM,uDAAuD;AAAA,MACzE;AAEA,UAAI,OAAO,SAAS,UAAU;AAC5B,cAAM,IAAI,MAAM,uDAAuD,OAAO,aAAa;AAAA,MAC7F;AACA,aAAO;AAAA,IACT;AAAA,IAGA,eAAe,OAAO;AACpB,UAAI,UAAU,QAAW;AACvB,cAAM,IAAI,MAAM,wDAAwD;AAAA,MAC1E;AACA,UAAI,OAAO,UAAU,YAAY,CAAC,MAAM,QAAQ,KAAK,GAAG;AACtD,cAAM,IAAI;AAAA,UACR,mEAAmE,OAAO;AAAA,QAC5E;AAAA,MACF;AACA,aAAO;AAAA,IACT;AAAA,IAGA,OAAO,MAAM,OAAO;AAQlB,UAAI,UAAU,QAAQ,UAAU,QAAW;AACzC;AAAA,MACF;AACA,UAAI,MAAM,QAAQ,KAAK,GAAG;AACxB,mBAAW,KAAK,OAAO;AACrB,eAAK,UAAU,KAAK,UAAU,KAAK,cAAc,IAAI,GAAG,KAAK,eAAe,CAAC,CAAC;AAAA,QAChF;AAAA,MACF,OAAO;AACL,aAAK,UAAU,KAAK,UAAU,KAAK,cAAc,IAAI,GAAG,KAAK,eAAe,KAAK,CAAC;AAAA,MACpF;AAAA,IACF;AAAA,IAGA,OAAO,MAAM;AACX,WAAK,UAAU,KAAK,UAAU,KAAK,cAAc,IAAI,CAAC;AAAA,IACxD;AAAA,IAGA,UAAU;AACR,YAAM,UAAU,CAAC;AACjB,iBAAW,OAAO,KAAK,KAAK,GAAG;AAC7B,gBAAQ,KAAK,CAAC,KAAK,KAAK,IAAI,GAAG,CAAC,CAAC;AAAA,MACnC;AACA,aAAO;AAAA,IACT;AAAA,IAGA,QAAQ,UAAU;AAChB,iBAAW,OAAO,KAAK,KAAK,GAAG;AAC7B,iBAAS,KAAK,IAAI,GAAG,GAAG,GAAG;AAAA,MAC7B;AAAA,IACF;AAAA,IAKA,IAAI,MAAM;AAGR,YAAM,UAAU,KAAK,OAAO,KAAK,UAAU,KAAK,cAAc,IAAI,CAAC;AACnE,UAAI,MAAM,QAAQ,OAAO;AAAG,eAAO,QAAQ,KAAK,IAAI;AAGpD,aAAO,YAAY,SAAY,OAAO;AAAA,IACxC;AAAA,IAQA,iBAAiB,KAAK;AAEpB,YAAM,UAAU,KAAK,OAAO,KAAK,UAAU,KAAK,cAAc,GAAG,CAAC;AAClE,UAAI,YAAY,UAAa,YAAY,MAAM;AAC7C,eAAO,CAAC;AAAA,MACV;AAEA,aAAO;AAAA,IACT;AAAA,IAMA,eAAe;AACb,aAAO,KAAK,iBAAiB,YAAY;AAAA,IAC3C;AAAA,IAGA,IAAI,MAAM;AACR,aAAO,KAAK,SAAS,KAAK,UAAU,KAAK,cAAc,IAAI,CAAC;AAAA,IAC9D;AAAA,IAGA,OAAO;AACL,aAAO,KAAK,QAAQ,KAAK,QAAQ;AAAA,IACnC;AAAA,IAGA,IAAI,MAAM,OAAO;AAQf,UAAI,UAAU,QAAQ,UAAU,QAAW;AACzC;AAAA,MACF;AACA,WAAK,OAAO,KAAK,UAAU,KAAK,cAAc,IAAI,GAAG,KAAK,eAAe,KAAK,CAAC;AAAA,IACjF;AAAA,IAGA,SAAS;AACP,YAAM,SAAS,CAAC;AAChB,iBAAW,OAAO,KAAK,KAAK,GAAG;AAC7B,eAAO,KAAK,KAAK,IAAI,GAAG,CAAC;AAAA,MAC3B;AACA,aAAO;AAAA,IACT;AAAA,IAIA,SAAS;AACP,YAAM,OAAO,CAAC;AACd,iBAAW,OAAO,KAAK,KAAK,GAAG;AAC7B,aAAK,OAAO,KAAK,IAAI,GAAG;AAAA,MAC1B;AACA,aAAO;AAAA,IACT;AAAA,EACF;AAEA,QAAM,6BAA6B,aAAa;AAAA,IAC9C,YAAY,YAAY,SAAS;AAC/B,YAAM,YAAY,SAAS;AAAA,QACzB,UAAU,KAAK;AAAA,QACf,SAAS,KAAK;AAAA,QACd,OAAO,KAAK;AAAA,QACZ,QAAQ,QAAQ;AAAA,QAChB,UAAU,KAAK;AAAA,QACf,OAAO,KAAK;AAAA,MACd,CAAC;AAAA,IACH;AAAA,EACF;AAEA,QAAM,4BAA4B,aAAa;AAAA,IAC7C,YAAY,WAAW,SAAS;AAC9B,YAAM,WAAW,SAAS;AAAA,QACxB,UAAU,KAAK;AAAA,QACf,SAAS,KAAK;AAAA,QACd,OAAO,KAAK;AAAA,QACZ,QAAQ,QAAQ;AAAA,QAChB,UAAU,KAAK;AAAA,QACf,OAAO,KAAK;AAAA,MACd,CAAC;AAAA,IACH;AAAA,EACF;AAKA,QAAM,gBAAgB;AAAA,IAIpB,cAAc;AAMd,sCAAW,CAAC,YAAY,KAAK,UAAU;AACrC,YAAI,CAAC,KAAK,SAAS;AAAM,eAAK,SAAS,OAAO,CAAC;AAC/C,aAAK,SAAS,KAAK,KAAK,KAAK;AAAA,MAC/B;AAEA,qCAAU,CAAC,YAAY,QAAQ;AAC7B,eAAO,CAAC,CAAC,KAAK,SAAS;AAAA,MACzB;AAEA,mCAAQ,CAAC,YAAY,QAAQ;AAE3B,YAAI,CAAC,KAAK,SAAS;AAAM,iBAAO;AAEhC,eAAO,KAAK,SAAS;AAAA,MACvB;AAEA,sCAAW,MAAM;AACf,eAAO,KAAK;AAAA,MACd;AAEA,oCAAS,gBAAc;AACrB,eAAO,OAAO,KAAK,KAAK,QAAQ;AAAA,MAClC;AAEA,sCAAW,CAAC,YAAY,QAAQ;AAC9B,eAAO,KAAK,SAAS;AAAA,MACvB;AAEA,mCAAQ,CAAC,YAAY,KAAK,UAAU;AAClC,aAAK,SAAS,OAAO,CAAC,KAAK;AAAA,MAC7B;AAjCE,WAAK,WAAW,CAAC;AAAA,IACnB;AAAA,EAiCF;AAEA,aAAW,UAAU,MAAM,gBAAgB,aAAa;AAAA,IACtD,YAAY,SAAS;AACnB,YAAM,mBAAmB,IAAI,gBAAgB;AAI7C,YAAM,GAAG,SAAS;AAAA,QAChB,UAAU,iBAAiB,SAAS,KAAK,gBAAgB;AAAA,QACzD,SAAS,iBAAiB,QAAQ,KAAK,gBAAgB;AAAA,QACvD,OAAO,iBAAiB,MAAM,KAAK,gBAAgB;AAAA,QACnD,QAAQ,iBAAiB,OAAO,KAAK,gBAAgB;AAAA,QACrD,UAAU,iBAAiB,SAAS,KAAK,gBAAgB;AAAA,QACzD,OAAO,iBAAiB,MAAM,KAAK,gBAAgB;AAAA,MACrD,CAAC;AAIH,oCAAS,MAAM;AACb,eAAO,KAAK,iBAAiB,SAAS;AAAA,MACxC;AAJE,WAAK,mBAAmB;AAAA,IAC1B;AAAA,EAIF;AAGA,aAAW,UAAU,MAAM;AAAA,IACzB,YAAY,OAAO,SAAS;AAC1B,WAAK,WAAW,WAAW,CAAC;AAC5B,WAAK,YAAY;AAGjB,UAAI,OAAO,SAAS,OAAO,OAAO,UAAU;AAC1C,aAAK,WAAW,SAAS,OAAO;AAChC,aAAK,kBAAkB,IAAI,oBAAoB,KAAK,QAAQ;AAC5D,aAAK,cAAc;AACnB;AAAA,MACF;AAEA,UAAI,OAAO,UAAU,UAAU;AAE7B,cAAM,IAAI,MAAM,2DAA2D,OAAO,QAAQ;AAAA,MAC5F;AACA,YAAM,MAAM;AAGZ,UAAI,KAAK,SAAS,WAAW,UAAa,OAAO,KAAK,SAAS,WAAW,UAAU;AAClF,cAAM,IAAI;AAAA,UACR,6DAA6D,OAAO,KAAK,SACtE;AAAA,QACL;AAAA,MACF;AACA,YAAM,SAAS,KAAK,SAAS,UAAU;AACvC,WAAK,WAAW,KAAK,oBAAoB,QAAQ,GAAG;AAIpD,WAAK,kBAAkB,IAAI,oBAAoB,KAAK,UAAU,KAAK,UAAU,WAAW,CAAC,CAAC;AAE1F,YAAM,OAAO,KAAK,SAAS;AAC3B,aAAO,KAAK,SAAS;AACrB,WAAK,YAAY;AAEjB,UAAI,MAAM;AACR,aAAK,QAAQ;AAAA,MACf;AACA,WAAK,cAAc;AAAA,IACrB;AAAA,IAEA,OAAO;AACL,YAAM,IAAI;AAAA,QACR,GAAG;AAAA,MACL;AAAA,IACF;AAAA,IAEA,IAAI,OAAO;AAET,YAAM,SAAS,KAAK;AACpB,UAAI,WAAW,SAAS,WAAW,QAAQ;AACzC,eAAO;AAAA,MACT;AAIA,aAAO,IAAI,2BAA2B,IAAI;AAAA,IAC5C;AAAA,IAEA,IAAI,WAAW;AAEb,aAAO,KAAK;AAAA,IACd;AAAA,IAEA,IAAI,QAAQ;AACV,YAAM,IAAI;AAAA,QACR,GAAG;AAAA,MACL;AAAA,IACF;AAAA,IAEA,IAAI,cAAc;AAChB,YAAM,IAAI;AAAA,QACR,GAAG;AAAA,MACL;AAAA,IACF;AAAA,IAEA,QAAQ;AACN,YAAM,IAAI;AAAA,QACR,GAAG;AAAA,MACL;AAAA,IACF;AAAA,IAEA,IAAI,cAAc;AAChB,YAAM,IAAI;AAAA,QACR,GAAG;AAAA,MACL;AAAA,IACF;AAAA,IAEA,WAAW;AACT,YAAM,IAAI;AAAA,QACR,GAAG;AAAA,MACL;AAAA,IACF;AAAA,IAEA,IAAI,UAAU;AACZ,aAAO,KAAK;AAAA,IACd;AAAA,IAEA,IAAI,YAAY;AACd,YAAM,IAAI;AAAA,QACR,GAAG;AAAA,MACL;AAAA,IACF;AAAA,IAEA,IAAI,SAAS;AACX,YAAM,SAAS,KAAK,wBAAwB,KAAK,QAAQ;AACzD,aAAO;AAAA,IACT;AAAA,IAEA,IAAI,OAAO,QAAQ;AACjB,aAAO,KAAK,wBAAwB,KAAK,UAAU,MAAM;AAAA,IAC3D;AAAA,IAEA,IAAI,OAAO;AACT,YAAM,IAAI;AAAA,QACR,GAAG;AAAA,MACL;AAAA,IACF;AAAA,IAEA,IAAI,WAAW;AACb,YAAM,IAAI;AAAA,QACR,GAAG;AAAA,MACL;AAAA,IACF;AAAA,IAEA,IAAI,WAAW;AACb,YAAM,IAAI;AAAA,QACR,GAAG;AAAA,MACL;AAAA,IACF;AAAA,IAEA,IAAI,iBAAiB;AACnB,YAAM,IAAI;AAAA,QACR,GAAG;AAAA,MACL;AAAA,IACF;AAAA,IAEA,IAAI,SAAS;AACX,YAAM,IAAI;AAAA,QACR,GAAG;AAAA,MACL;AAAA,IACF;AAAA,IAEA,MAAM,cAAc;AAClB,YAAM,KAAK,gBAAgB;AAE3B,WAAK,YAAY;AAEjB,aAAO,KAAK,sBAAsB,KAAK,QAAQ;AAAA,IACjD;AAAA,IAEA,MAAM,OAAO;AACX,YAAM,SAAS,MAAM,KAAK,YAAY;AACtC,UAAI,OAAO,eAAe,GAAG;AAC3B,eAAO;AAAA,MACT;AAEA,aAAO,IAAI,YAAY,KAAK,EAAE,OAAO,MAAM;AAAA,IAC7C;AAAA,IAEA,MAAM,OAAO;AACX,aAAO,KAAK,MAAM,MAAM,KAAK,KAAK,CAAC;AAAA,IACrC;AAAA,IAEA,IAAI,MAAM;AACR,aAAO,KAAK,qBAAqB,KAAK,QAAQ;AAAA,IAChD;AAAA,IAEA,IAAI,IAAI,KAAK;AACX,aAAO,KAAK,qBAAqB,KAAK,UAAU,GAAG;AAAA,IACrD;AAAA,IAEA,IAAI,OAAO;AACT,aAAO,KAAK,sBAAsB,KAAK,QAAQ;AAAA,IACjD;AAAA,IAEA,IAAI,UAAU;AACZ,aAAO,KAAK;AAAA,IACd;AAAA,IAEA,SAAS;AACP,aAAO;AAAA,QACL,QAAQ,KAAK;AAAA,QACb,KAAK,KAAK;AAAA,QACV,SAAS,KAAK;AAAA,MAChB;AAAA,IACF;AAAA,IAEA,mBAAmB;AACjB,YAAM,WAAW,KAAK,gCAAgC,KAAK,QAAQ;AACnE,YAAM,MAAM,IAAI,QAAQ,MAAM;AAAA,QAC5B,OAAO;AAAA,UACL,IAAI;AAAA,QACN;AAAA,MACF,CAAC;AACD,WAAK,kBAAkB,IAAI,oBAAoB,QAAQ;AACvD,aAAO;AAAA,IACT;AAAA,IAEA,OAAO,kBAAkB;AACvB,UAAI,KAAK,aAAa;AACpB;AAAA,MACF;AAEA,YAAM,OAAO,KAAK;AAClB,UAAI,MAAM;AACR,YAAI,KAAK,WAAW,SAAS,KAAK,WAAW,QAAQ;AACnD,gBAAM,IAAI,MAAM,gDAAgD;AAAA,QAClE;AAEA,cAAM,UAAU,KAAK;AACrB,YAAI,OAAO,SAAS,UAAU;AAC5B,eAAK,eAAe,eAAe,oBAAoB,OAAO;AAC9D,eAAK,kCAAkC,SAAS,IAAI;AAAA,QACtD,WAAW,gBAAgB,aAAa;AAEtC,eAAK,eAAe,gCAAgC,KAAK,aAAa;AACtE,eAAK,wCAAwC,SAAS,IAAI;AAAA,QAC5D,WAAW,YAAY,OAAO,IAAI,GAAG;AAEnC,eAAK,eAAe,+BAA+B,KAAK,aAAa;AACrE,eAAK,wCAAwC,SAAS,KAAK,MAAM;AAAA,QACnE,WAAW,gBAAgB,gBAAgB;AAEzC,eAAK,eAAe,6BAA6B;AACjD,2BAAiB,SAAS,MAAM;AAC9B,gBAAI,OAAO,UAAU,UAAU;AAC7B,mBAAK,qCAAqC,SAAS,KAAK;AAAA,YAC1D,WAAW,iBAAiB,aAAa;AACvC,mBAAK,2CAA2C,SAAS,KAAK;AAAA,YAChE,WAAW,YAAY,OAAO,KAAK,GAAG;AACpC,mBAAK,2CAA2C,SAAS,MAAM,MAAM;AAAA,YACvE,OAAO;AACL,oBAAM,OAAO,OAAO,SAAS;AAC7B,kBAAI,MAAM;AACR,qBAAK,qCAAqC,SAAS,MAAM,SAAS,CAAC;AAAA,cACrE,OAAO;AACL,sBAAM,IAAI,MAAM,iEAAiE;AAAA,cACnF;AAAA,YACF;AAAA,UACF;AAAA,QACF,OAAO;AAGL,eAAK,eAAe,sBAAsB,KAAK,SAAS,IAAI;AAC5D,eAAK,kCAAkC,SAAS,KAAK,SAAS,CAAC;AAAA,QACjE;AAAA,MACF;AAIA,WAAK,QAAQ;AACb,WAAK,cAAc;AAAA,IACrB;AAAA,EACF;AAKA,aAAW,WAAW,MAAM;AAAA,IAC1B,YAAY,MAAM,mBAAmB;AAGnC,WAAK,YAAY;AACjB,WAAK,cAAc;AACnB,WAAK,cAAc;AACnB,WAAK,OAAO;AAEZ,UAAI,OAAO,mBAAmB,OAAO,OAAO,UAAU;AAEpD,aAAK,WAAW,mBAAmB,OAAO;AAC1C,aAAK,kBAAkB,IAAI,qBAAqB,KAAK,QAAQ;AAC7D,aAAK,eAAe,uBAAuB,KAAK,UAAU;AAC1D,aAAK,cAAc;AAEnB;AAAA,MACF;AAEA,UAAI,6BAA6B,UAAU;AACzC,cAAM,QAAQ,kBAAkB,iBAAiB;AACjD,aAAK,WAAW,MAAM;AACtB,aAAK,kBAAkB,MAAM;AAC7B,aAAK,cAAc,MAAM;AACzB,aAAK,OAAO,MAAM;AAAA,MACpB,OAAO;AAGL,aAAK,WAAW,qBAAqB,CAAC;AAMtC,YAAI,MAAM,KAAK,SAAS,MAAM;AAAG,eAAK,SAAS,SAAS;AAIxD,YACE,KAAK,SAAS,SAAS,OACvB,KAAK,SAAS,SAAS,OACvB,KAAK,SAAS,WAAW,OACzB,KAAK,SAAS,WAAW,KACzB;AACA,gBAAM,IAAI;AAAA,YACR,uBAAuB,KAAK,SAAS;AAAA,UACvC;AAAA,QACF;AACA,aAAK,WAAW,KAAK,qBAAqB,KAAK,SAAS,MAAM;AAC9D,aAAK,kBAAkB,IAAI,qBAAqB,KAAK,UAAU,KAAK,UAAU,WAAW,CAAC,CAAC;AAAA,MAC7F;AAEA,UAAI,MAAM;AACR,aAAK,QAAQ;AAAA,MACf;AAAA,IACF;AAAA,IAEA,OAAO;AACL,YAAM,IAAI;AAAA,QACR,GAAG;AAAA,MACL;AAAA,IACF;AAAA,IAEA,IAAI,OAAO;AAIT,UAAI,KAAK,eAAe,KAAK,OAAO;AAClC,eAAO,IAAI,4BAA4B,IAAI;AAAA,MAC7C;AAGA,aAAO;AAAA,IACT;AAAA,IAEA,IAAI,WAAW;AACb,aAAO,KAAK;AAAA,IACd;AAAA,IAEA,QAAQ;AACN,YAAM,IAAI;AAAA,QACR,GAAG;AAAA,MACL;AAAA,IACF;AAAA,IAEA,WAAW;AACT,YAAM,IAAI;AAAA,QACR,GAAG;AAAA,MACL;AAAA,IACF;AAAA,IAEA,IAAI,UAAU;AACZ,aAAO,KAAK;AAAA,IACd;AAAA,IAEA,MAAM,cAAc;AAClB,YAAM,KAAK,gBAAgB;AAE3B,WAAK,YAAY;AAEjB,aAAO,KAAK,uBAAuB,KAAK,QAAQ;AAAA,IAClD;AAAA,IAEA,MAAM,OAAO;AACX,YAAM,SAAS,MAAM,KAAK,YAAY;AACtC,UAAI,OAAO,eAAe,GAAG;AAC3B,eAAO;AAAA,MACT;AAEA,aAAO,IAAI,YAAY,KAAK,EAAE,OAAO,MAAM;AAAA,IAC7C;AAAA,IACA,MAAM,OAAO;AACX,aAAO,KAAK,MAAM,MAAM,KAAK,KAAK,CAAC;AAAA,IACrC;AAAA,IAEA,IAAI,KAAK;AACP,UAAI,SAAS,KAAK;AAClB,aAAO,UAAU,OAAO,SAAS;AAAA,IACnC;AAAA,IAEA,OAAO,SAAS,KAAK,QAAQ;AAC3B,aAAO,IAAI,SAAS,QAAW,EAAE,SAAS,EAAE,UAAU,IAAI,GAAG,QAAQ,UAAU,IAAI,CAAC;AAAA,IACtF;AAAA,IAEA,IAAI,WAAW,eAAe;AAC5B,WAAK,cAAc;AAAA,IACrB;AAAA,IAEA,IAAI,aAAa;AACf,aAAO,KAAK;AAAA,IACd;AAAA,IAEA,IAAI,SAAS;AACX,aAAO,KAAK,yBAAyB,KAAK,QAAQ;AAAA,IACpD;AAAA,IAEA,IAAI,aAAa;AACf,aAAO,KAAK,yBAAyB,KAAK,QAAQ;AAAA,IACpD;AAAA,IAEA,IAAI,OAAO;AACT,YAAM,IAAI;AAAA,QACR,GAAG;AAAA,MACL;AAAA,IACF;AAAA,IAEA,IAAI,MAAM;AACR,aAAO,KAAK;AAAA,IACd;AAAA,IAEA,IAAI,UAAU;AACZ,aAAO,KAAK;AAAA,IACd;AAAA,IAEA,SAAS;AACP,aAAO;AAAA,QACL,QAAQ,KAAK;AAAA,QACb,YAAY,KAAK;AAAA,QACjB,SAAS,KAAK;AAAA,MAChB;AAAA,IACF;AAAA,IAEA,mBAAmB;AACjB,YAAM,WAAW,KAAK,iCAAiC,KAAK,QAAQ;AACpE,YAAM,OAAO,IAAI,SAAS,MAAM;AAAA,QAC9B,OAAO;AAAA,UACL,IAAI;AAAA,QACN;AAAA,MACF,CAAC;AACD,WAAK,OAAO,KAAK;AACjB,WAAK,cAAc,KAAK;AACxB,WAAK,kBAAkB,IAAI,qBAAqB,QAAQ;AACxD,aAAO;AAAA,IACT;AAAA,IAEA,OAAO,gBAAgB;AACrB,YAAM,KAAK,gBAAgB;AAG3B,WAAK,6BAA6B,KAAK,OAAO;AAAA,IAChD;AAAA,IAEA,OAAO,kBAAkB;AACvB,UAAI,KAAK,aAAa;AACpB;AAAA,MACF;AAEA,YAAM,OAAO,KAAK;AAMlB,UAAI,SAAS,QAAQ,SAAS,QAAW;AACvC;AAAA,MACF;AAEA,YAAM,UAAU,KAAK;AACrB,UAAI,OAAO,SAAS,UAAU;AAC5B,aAAK,eAAe,wBAAwB,OAAO;AACnD,aAAK,mCAAmC,SAAS,IAAI;AAAA,MACvD,WAAW,gBAAgB,aAAa;AAEtC,aAAK,eAAe,iCAAiC,KAAK,aAAa;AACvE,aAAK,yCAAyC,SAAS,IAAI;AAAA,MAC7D,WAAW,YAAY,OAAO,IAAI,GAAG;AAEnC,aAAK,eAAe,gCAAgC,KAAK,aAAa;AACtE,aAAK,yCAAyC,SAAS,KAAK,MAAM;AAAA,MACpE,WAAW,gBAAgB,gBAAgB;AACzC,YAAI,CAAC,4BAA4B;AAC/B,gBAAM,IAAI,MAAM,wDAAwD;AAAA,QAC1E;AAEA,aAAK,eAAe,8BAA8B;AAClD,yBAAiB,SAAS,MAAM;AAC9B,cAAI,OAAO,UAAU,UAAU;AAC7B,iBAAK,sCAAsC,SAAS,KAAK;AAAA,UAC3D,WAAW,iBAAiB,aAAa;AACvC,iBAAK,4CAA4C,SAAS,KAAK;AAAA,UACjE,WAAW,YAAY,OAAO,KAAK,GAAG;AACpC,iBAAK,4CAA4C,SAAS,MAAM,MAAM;AAAA,UACxE,OAAO;AACL,kBAAM,OAAO,OAAO,SAAS;AAC7B,gBAAI,MAAM;AACR,mBAAK,sCAAsC,SAAS,MAAM,SAAS,CAAC;AAAA,YACtE,OAAO;AACL,oBAAM,IAAI,MAAM,kEAAkE;AAAA,YACpF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OAAO;AAGL,aAAK,eAAe,uBAAuB,KAAK,SAAS,IAAI;AAC7D,aAAK,mCAAmC,SAAS,KAAK,SAAS,CAAC;AAAA,MAClE;AAIA,WAAK,QAAQ;AACb,WAAK,cAAc;AAAA,IACrB;AAAA,EACF;AAEA,QAAM,sBAAsB,MAAM;AAAA,IAEhC,YAAY,mBAAmB;AAC7B,YAAM;AACN,WAAK,aAAa;AAAA,IACpB;AAAA,IAEA,IAAI,OAAO;AACT,aAAO,KAAK;AAAA,IACd;AAAA,IAEA,IAAI,UAAU;AACZ,aAAO,KAAK,qCAAqC,KAAK,UAAU;AAAA,IAClE;AAAA,IAEA,WAAW;AACT,aAAO,GAAG,KAAK,kBAAkB,KAAK;AAAA,IACxC;AAAA,EACF;AAGA,WAAS,UAAU,WAAW;AAG5B,UAAM,aAAa,EAAE,UAAqB;AAC1C,UAAM,YAAY,IAAI,MAAM,YAAY;AAAA,MAEtC,IAAI,QAAQ,UAAU;AAEpB,YAAI,aAAa,OAAO;AACtB,iBAAO,SAAU,KAAK;AACpB,mBAAO,KAAK,kBAAkB,OAAO,WAAW,GAAG;AAAA,UACrD;AAAA,QACF;AACA,YAAI,aAAa,oBAAoB;AACnC,iBAAO,SAAU,KAAK;AACpB,mBAAO,IAAI,WAAW,KAAK,iCAAiC,OAAO,WAAW,GAAG,CAAC;AAAA,UACpF;AAAA,QACF;AACA,YAAI,aAAa,OAAO;AACtB,iBAAO,SAAU,KAAK;AACpB,mBAAO,KAAK,oBAAoB,OAAO,WAAW,GAAG;AAAA,UACvD;AAAA,QACF;AACA,YAAI,aAAa,QAAQ;AACvB,iBAAO,WAAY;AACjB,mBAAO,QAAQ,cAAc,OAAO,SAAS;AAAA,UAC/C;AAAA,QACF;AACA,eAAO,KAAK,kBAAkB,OAAO,WAAW,QAAQ;AAAA,MAC1D;AAAA,MAEA,yBAAyB,QAAQ,UAAU;AACzC,eAAO;AAAA,UACL,OAAO,KAAK,kBAAkB,OAAO,WAAW,QAAQ;AAAA,UACxD,UAAU;AAAA,UACV,YAAY;AAAA,UACZ,cAAc;AAAA,QAChB;AAAA,MACF;AAAA,MAEA,eAAe,SAAS,MAAM,aAAa;AACzC,eAAO;AAAA,MACT;AAAA,MAEA,eAAe,SAAS,WAAW;AACjC,eAAO;AAAA,MACT;AAAA,MAEA,IAAI,QAAQ,UAAU;AACpB,eAAO,KAAK,oBAAoB,OAAO,WAAW,QAAQ;AAAA,MAC5D;AAAA,MAEA,QAAQ,QAAQ;AACd,eAAO,QAAQ,cAAc,OAAO,SAAS;AAAA,MAC/C;AAAA,IACF,CAAC;AAED,WAAO;AAAA,EACT;AAGA,QAAM,SAAS;AAAA,IAEb,YAAY,WAAW;AACrB,WAAK,aAAa;AAAA,IACpB;AAAA,IAGA,IAAI,KAAK;AACP,aAAO,KAAK,0BAA0B,KAAK,YAAY,GAAG;AAAA,IAC5D;AAAA,IAGA,OAAO;AACL,aAAO,QAAQ,oBAAoB,KAAK,UAAU;AAAA,IACpD;AAAA,IAEA,SAAS;AACP,aAAO,KAAK,KAAK;AAAA,IACnB;AAAA,EACF;AAGA,QAAM,aAAa;AAAA,IAGjB,WAAW,OAAO;AAChB,aAAO,KAAK,6BAA6B,KAAK;AAAA,IAChD;AAAA,IAGA,UAAU,OAAO;AACf,aAAO,KAAK,4BAA4B,KAAK;AAAA,IAC/C;AAAA,IAIA,IAAI,OAAO,OAAO;AAChB,aAAO,KAAK,qBAAqB,OAAO,KAAK;AAAA,IAC/C;AAAA,EACF;AAGA,WAAS,4BAA4B,mBAAmB,oBAAoB,OAAO,MAAM;AACvF,SAAK,qBAAqB,mBAAmB,CAAC;AAC9C,SAAK,6BAA6B,kBAAkB;AACpD,QAAI;AACF,aAAO,GAAG,GAAG,IAAI;AAAA,IAEnB,UAAE;AAEA,WAAK,4BAA4B,kBAAkB;AAAA,IACrD;AAAA,EACF;AAGA,QAAM,oBAAoB,KAAK;AAC/B,QAAM,wBAAwB,KAAK;AACnC,aAAW,OAAO;AAAA,IAChB,OAAO,IAAI,SAAS;AAClB,aAAO;AAAA,QACL;AAAA,QACA;AAAA,QACA;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AAAA,IACA,WAAW,IAAI,SAAS;AACtB,aAAO;AAAA,QACL;AAAA,QACA;AAAA,QACA;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AAAA,EACF;AAIA,aAAW,SAAS,CAAC;AAGrB,aAAW,YAAY;AACvB,aAAW,aAAa;AAGxB,aAAW,SAAS;AAGpB,aAAW,UAAU,gBAAc;AACjC,UAAM,IAAI;AAAA,MACR,kCAAkC;AAAA,IAEpC;AAAA,EACF;AAEA,MAAI,yBAAyB;AAC3B,eAAW,kBAAkB,MAAM,gBAAgB;AAAA,MACjD,YAAY,aAAa,iBAAiB;AACxC,aAAK,WAAW,QAAQ;AAAA,UACtB,gBAAgB,eAAe,WAAW;AAAA,UAC1C;AAAA,QACF;AAAA,MACF;AAAA,MAIA,MAAM,MAAM,OAAO;AACjB,eAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,cAAI;AACF,oBAAQ,QAAQ,uBAAuB,KAAK,UAAU,KAAK,CAAC;AAAA,UAC9D,SAAS,GAAP;AACA,mBAAO,CAAC;AAAA,UACV;AAAA,QACF,CAAC;AAAA,MACH;AAAA,MACA,MAAM,MAAM;AACV,eAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,cAAI;AACF,oBAAQ,QAAQ,qBAAqB,KAAK,QAAQ,CAAC;AAAA,UACrD,SAAS,GAAP;AACA,mBAAO,CAAC;AAAA,UACV;AAAA,QACF,CAAC;AAAA,MACH;AAAA,MAKA,OAAO,eAAe,aAAa;AACjC,iBAAS,UAAU,WAAW,QAAQ;AACpC,iBAAO,IAAI;AAAA,YACT,EAAE,OAAe;AAAA,YACjB;AAAA,cACE,IAAI,QAAQ,UAAU;AACpB,uBAAO,IAAI,SAAS;AAElB,sBAAI,eAAe,QAAQ;AAAA,oBACzB;AAAA,oBACA,SAAS,SAAS;AAAA,oBAClB,OAAO;AAAA,oBACP;AAAA,kBACF;AAGA,sBAAI,aAAa,aAAa;AAC5B,mCAAe,UAAU,aAAa,YAAY;AAAA,kBACpD;AAGA,sBAAI,aAAa,cAAc;AAC7B,6BAAS,IAAI,GAAG,IAAI,aAAa,QAAQ,KAAK;AAC5C,mCAAa,KAAK,UAAU,aAAa,aAAa,EAAE;AAAA,oBAC1D;AAAA,kBACF;AAEA,yBAAO;AAAA,gBACT;AAAA,cACF;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAEA,YAAI,eAAe,MAAM,QAAQ,WAAW,GAAG;AAC7C,mBAAS,IAAI,GAAG,IAAI,YAAY,QAAQ,KAAK;AAE3C,gBAAI,YAAY,GAAG,SAAS;AAC1B,kBAAI,WAAW,YAAY,GAAG;AAC9B,0BAAY,GAAG,UAAU,SAAO;AAC9B,uBAAO,SAAS,UAAU,WAAW,GAAG,CAAC;AAAA,cAC3C;AAAA,YACF;AACA,gBAAI,YAAY,GAAG,SAAS;AAC1B,kBAAI,WAAW,YAAY,GAAG;AAC9B,0BAAY,GAAG,UAAU,SAAO;AAC9B,uBAAO,SAAS,UAAU,WAAW,GAAG,CAAC;AAAA,cAC3C;AAAA,YACF;AACA,gBAAI,YAAY,GAAG,MAAM;AACvB,kBAAI,WAAW,YAAY,GAAG;AAC9B,0BAAY,GAAG,OAAO,SAAO;AAC3B,uBAAO,SAAS,UAAU,QAAQ,GAAG,CAAC;AAAA,cACxC;AAAA,YACF;AAGA,gBAAI,YAAY,GAAG,aAAa;AAC9B,kBAAI,WAAW,YAAY,GAAG;AAC9B,0BAAY,GAAG,cAAc,SAAO;AAElC,uBAAO,SAAS,UAAU,WAAW,GAAG,CAAC;AAAA,cAC3C;AAAA,YACF;AACA,gBAAI,YAAY,GAAG,UAAU;AAC3B,kBAAI,WAAW,YAAY,GAAG;AAC9B,0BAAY,GAAG,WAAW,SAAO;AAE/B,uBAAO,SAAS,UAAU,QAAQ,GAAG,CAAC;AAAA,cACxC;AAAA,YACF;AACA,gBAAI,YAAY,GAAG,UAAU;AAC3B,kBAAI,WAAW,YAAY,GAAG;AAC9B,0BAAY,GAAG,WAAW,SAAO;AAC/B,uBAAO,SAAS,UAAU,YAAY,GAAG,CAAC;AAAA,cAC5C;AAAA,YACF;AACA,gBAAI,YAAY,GAAG,SAAS;AAC1B,kBAAI,WAAW,YAAY,GAAG;AAC9B,0BAAY,GAAG,UAAU,SAAO;AAC9B,uBAAO,SAAS,UAAU,WAAW,GAAG,CAAC;AAAA,cAC3C;AAAA,YACF;AAAA,UACF;AAAA,QACF;AACA,eAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAEA,aAAW,cAAc,MAAM,YAAY;AAAA,IACzC,YAAY,UAAU;AACpB,WAAK,YAAY,YAAY;AAAA,IAC/B;AAAA,IAIA,IAAI,QAAQ;AACV,aAAO;AAAA,IACT;AAAA,IACA,IAAI,MAAM,OAAO;AACf,UAAI,OAAO;AACT,cAAM,IAAI,MAAM,oCAAoC;AAAA,MACtD;AAAA,IACF;AAAA,IAEA,OAAO,QAAQ;AACb,UAAI;AACF,YAAI,+BAA+B;AACjC,eAAK,qBAAqB,0CAA0C,CAAC;AACrE,eAAK,6BAA6B,0CAA0C;AAAA,QAC9E;AAEA,YAAI,CAAC,QAAQ;AACX,iBAAO;AAAA,QACT;AAEA,cAAM,eAAe,YAAY,OAAO,MAAM,IAAI,OAAO,SAAS;AAClE,YAAI,EAAE,wBAAwB,cAAc;AAC1C,gBAAM,IAAI;AAAA,YACR,oEAAoE,OAAO;AAAA,UAC7E;AAAA,QACF;AAEA,eAAO,QAAQ,oBAAoB,KAAK,WAAW,YAAY;AAAA,MACjE,UAAE;AACA,YAAI,+BAA+B;AACjC,eAAK,4BAA4B,0CAA0C;AAAA,QAC7E;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAGA,WAAS,uBAAuB,OAAO;AACrC,YAAQ,OAAO;AAAA,WACR;AAEH,eAAO;AAAA,WACJ;AACH,eAAO;AAAA,eACA;AACP,YAAI,UAAU,MAAM;AAClB,iBAAO;AAAA,QACT;AAEA,eAAO,MAAM,SAAS;AAAA,MACxB;AAAA;AAAA,EAEJ;AAEA,aAAW,cAAc,MAAM,YAAY;AAAA,IACzC,cAAc;AAAA,IAAC;AAAA,IAEf,OAAO,KAAK;AACV,UAAI;AACF,YAAI,+BAA+B;AACjC,eAAK,qBAAqB,0CAA0C,CAAC;AACrE,eAAK,6BAA6B,0CAA0C;AAAA,QAC9E;AAEA,cAAM,QAAQ,uBAAuB,GAAG;AACxC,YAAI,OAAO,UAAU,UAAU;AAC7B,iBAAO,IAAI,WAAW,CAAC;AAAA,QACzB;AAEA,eAAO,IAAI,WAAW,QAAQ,oBAAoB,KAAK,CAAC;AAAA,MAC1D,UAAE;AACA,YAAI,+BAA+B;AACjC,eAAK,4BAA4B,0CAA0C;AAAA,QAC7E;AAAA,MACF;AAAA,IACF;AAAA,IAEA,WAAW,KAAK,OAAO;AACrB,UAAI;AACF,YAAI,+BAA+B;AACjC,eAAK,qBAAqB,0CAA0C,CAAC;AACrE,eAAK,6BAA6B,0CAA0C;AAAA,QAC9E;AAEA,YAAI,EAAE,iBAAiB,aAAa;AAClC,gBAAM,IAAI,MAAM,+CAA+C;AAAA,QACjE;AAEA,cAAM,QAAQ,uBAAuB,GAAG;AACxC,YAAI,MAAM,eAAe,KAAK,OAAO,UAAU,UAAU;AACvD,iBAAO;AAAA,YACL,MAAM;AAAA,YACN,SAAS;AAAA,UACX;AAAA,QACF;AAEA,eAAO,QAAQ,yBAAyB,OAAO,KAAK;AAAA,MACtD,UAAE;AACA,YAAI,+BAA+B;AACjC,eAAK,4BAA4B,0CAA0C;AAAA,QAC7E;AAAA,MACF;AAAA,IACF;AAAA,IAEA,IAAI,WAAW;AACb,aAAO;AAAA,IACT;AAAA,EACF;AAIA,MAAI,sBAAsB;AAK1B,MAAI,kBAAkB,oBAAI,IAAI;AAG9B,MAAI,0BAA0B;AAG9B,MAAI,8BAA8B;AAElC,WAAS,sBAAsB,MAAM,UAAU;AAC7C,QAAI,KAAK,WAAW,UAAU;AAC5B,YAAM,IAAI,MAAM,YAAY,2BAA2B,KAAK,QAAQ;AAAA,IACtE;AAAA,EACF;AAEA,WAAS,0BAA0B,MAAM,UAAU;AACjD,QAAI,KAAK,SAAS,UAAU;AAC1B,YAAM,IAAI,MAAM,qBAAqB,2BAA2B,KAAK,QAAQ;AAAA,IAC/E;AAAA,EACF;AAEA,WAAS,iBAAiB;AAExB,eAAW,WAAW,IAAI,SAAS,+BAA+B;AAElE,eAAW,OAAO,OAAK;AACrB,aAAO,iBAAiB,GAAG,IAAI;AAAA,IACjC;AACA,QAAI,UAAU;AAAA,MACZ,YAAY,UAAU,8BAA8B;AAAA,MACpD,iBAAiB,UAAU,kCAAkC;AAAA,MAC7D,SAAS,WAAW;AAAA,MACpB,aAAa,UAAU,8BAA8B;AAAA,MACrD,KAAK,UAAU,2BAA2B;AAAA,MAC1C,QAAQ,UAAU,6BAA6B;AAAA,MAC/C,QAAQ,UAAU,4BAA4B;AAAA,MAC9C,SAAS,IAAI,aAAa;AAAA,MAK1B,aAAa,WAAY;AACvB,cAAM,IAAI;AAAA,UACR;AAAA,QACF;AAAA,MACF;AAAA,MACA,WAAW,SAAU,SAAS;AAC5B,8BAAsB,WAAW,CAAC;AAElC,UAAE;AAGF,gBAAQ,QAAQ,OAAO,EAAE,QAAQ,MAAM;AACrC,YAAE;AAAA,QACJ,CAAC;AAAA,MACH;AAAA,IACF;AACA,QAAI,2BAA2B;AAC7B,cAAQ,YAAY,WAAY;AAC9B,aAAK,oBAAoB;AAAA,MAC3B;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAEA,WAAS,YAAY,QAAQ;AAC3B,UAAM,QAAQ,OAAO,MAAM,GAAG;AAE9B,UAAM,MAAM,MAAM,GAAG,KAAK;AAC1B,UAAM,QAAQ,MAAM;AACpB,WAAO,EAAE,KAAK,MAAM;AAAA,EACtB;AAIA,WAAS,kBAAkB,SAAS,UAAU;AAE5C,QAAI,sBAAsB,CAAC;AAG3B,UAAM,kBAAkB,QAAQ,QAAQ;AACxC,QAAI,iBAAiB;AACnB,YAAM,oBAAoB,gBAAgB,MAAM,GAAG;AACnD,eAAS,IAAI,GAAG,IAAI,kBAAkB,QAAQ,KAAK;AACjD,cAAM,EAAE,KAAK,MAAM,IAAI,YAAY,kBAAkB,EAAE;AACvD,4BAAoB,OAAO;AAAA,MAC7B;AAAA,IACF;AAGA,QAAI,aAAa,SAAS,QAAQ,IAAI,YAAY,KAAK,CAAC;AACxD,QAAI,CAAC,MAAM,QAAQ,UAAU,GAAG;AAC9B,mBAAa,CAAC,UAAU;AAAA,IAC1B;AAEA,aAAS,IAAI,GAAG,IAAI,WAAW,QAAQ,KAAK;AAE1C,YAAM,EAAE,KAAK,MAAM,IAAI,YAAY,WAAW,GAAG,MAAM,GAAG,EAAE,EAAE;AAC9D,0BAAoB,OAAO;AAAA,IAC7B;AAGA,UAAM,OAAO,OAAO,KAAK,mBAAmB;AAC5C,QAAI,KAAK,SAAS,GAAG;AACnB,cAAQ,QAAQ,SAAS;AACzB,eAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AACpC,cAAM,MAAM,KAAK;AACjB,cAAM,QAAQ,oBAAoB;AAClC,gBAAQ,QAAQ,UAAU,GAAG,OAAO,QAAQ,IAAI,KAAK,SAAS,IAAI,OAAO;AAAA,MAC3E;AAAA,IACF;AAAA,EACF;AAOA,iBAAe,eAAe,aAAa,SAAS,iBAAiB,UAAU;AAE7E,UAAM,WAAW,SAAS,QAAQ,IAAI,UAAU;AAChD,QAAI,CAAC,KAAK,KAAK,KAAK,KAAK,GAAG,EAAE,QAAQ,SAAS,MAAM,IAAI,KAAK,CAAC,UAAU;AACvE,eAAS,OAAO;AAChB,eAAS,aAAa,kBAAkB;AACxC,aAAO;AAAA,IACT;AAEA,UAAM,WAAW,QAAQ;AACzB,QAAI,aAAa,SAAS;AACxB,YAAM,IAAI,MAAM,UAAU;AAAA,IAC5B;AAEA,QAAI,aAAa,UAAU;AAGzB,aAAO;AAAA,IACT;AAEA,MAAE;AAIF,sBAAkB,SAAS,QAAQ;AAGnC,UAAM,cAAc,MAAM,WAAW,UAAU,SAAS,eAAe;AACvE,WAAO;AAAA,EACT;AAGA,iBAAe,WAAW,cAAc,SAAS,iBAAiB;AAChE,QAAI;AACJ,QAAI,wBAAwB,SAAS;AACnC,YAAM;AAAA,IACR,OAAO;AAGL,UAAI,OAAO,iBAAiB,UAAU;AACpC,YACE,OAAO,aAAa,aAAa,cACjC,aAAa,SAAS,MAAM,mBAC5B;AACA,gBAAM,IAAI;AAAA,YACR;AAAA,UAEF;AAAA,QACF;AACA,uBAAe,aAAa,SAAS;AAAA,MACvC;AAEA,YAAM,IAAI,QAAQ,cAAc,OAAO;AAAA,IACzC;AAGA,QAAI,CAAC,QAAQ,SAAS,CAAC,QAAQ,MAAM,QAAQ;AAC3C,YAAM,IAAI,MAAM,0DAA0D,cAAc;AAAA,IAC1F;AAGA,UAAM,IAAI,gBAAgB;AAG1B,UAAM,SAAS,QAAQ,MAAM;AAC7B,QAAI;AACF,WAAK,8BAA8B,IAAI,SAAS,MAAM;AAAA,IACxD,QAAE;AACA,YAAM,IAAI;AAAA,QACR,0BAA0B,4BAA4B,WAAW,SAAS,KAAK,EAAE;AAAA,UAC/E;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAOA,aAAS,aAAaC,UAAS,OAAO,KAAK;AACzC,YAAM,QAAQA,SAAQ;AACtB,UAAI,UAAU,QAAW;AACvB,cAAM,SAAS,SAAS,KAAK;AAC7B,YAAI,MAAM,MAAM,GAAG;AACjB,gBAAM,IAAI,MAAM,YAAY,iBAAiB,qBAAqB,KAAK;AAAA,QACzE;AACA,eAAO;AAAA,MACT;AAAA,IACF;AAGA,UAAM,UAAU;AAAA,MACd,QAAQ;AAAA,MACR;AAAA,MACA;AAAA,IACF;AACA,QAAI,YAAY,QAAW;AACzB,UAAI;AACF,aAAK,+BAA+B,IAAI,SAAS,OAAO;AAAA,MAC1D,QAAE;AACA,cAAM,IAAI,MAAM,yCAAyC;AAAA,MAC3D;AAAA,IACF;AAIA,UAAM,UAAU,QAAQ,MAAM;AAC9B,QAAI,gCAAgC,SAAS;AAC3C,YAAM,eAAe,QAAQ;AAC7B,UAAI,iBAAiB,QAAW;AAC9B,aAAK,oCAAoC,IAAI,SAAS,CAAC,CAAC,YAAY;AAAA,MACtE;AAEA,UAAI,QAAQ,wBAAwB;AAClC,cAAM,cAAc,QAAQ,uBAAuB;AACnD,YAAI,gBAAgB,QAAW;AAC7B,eAAK,wCAAwC,IAAI,SAAS,CAAC,CAAC,WAAW;AAAA,QACzE;AAEA,cAAM,cAAc,QAAQ,uBAAuB;AACnD,YAAI,gBAAgB,QAAW;AAC7B,eAAK,wCAAwC,IAAI,SAAS,CAAC,CAAC,WAAW;AAAA,QACzE;AAAA,MACF;AAEA,UAAI,QAAQ,YAAY,QAAW;AACjC,aAAK,+BAA+B,IAAI,SAAS,QAAQ,QAAQ,SAAS,CAAC;AAAA,MAC7E;AAEA,UAAI,gCAAgC;AAClC,YAAI,QAAQ,SAAS,QAAW;AAC9B,eAAK,kCAAkC,IAAI,SAAS,QAAQ,KAAK,SAAS,CAAC;AAAA,QAC7E;AAAA,MACF;AAEA,UAAI,QAAQ,2BAA2B,QAAW;AAChD,aAAK;AAAA,UACH,IAAI;AAAA,UACJ,QAAQ,uBAAuB,SAAS;AAAA,QAC1C;AAAA,MACF;AAAA,IACF;AAGA,SAAK,yBAAyB,IAAI,OAAO;AAIzC,QAAI;AACJ,QAAI;AACJ,UAAM,UAAU,IAAI,QAAQ,CAAC,iBAAiB,mBAAmB;AAC/D,gBAAU;AACV,eAAS;AAAA,IACX,CAAC;AAGD,oBAAgB,IAAI,IAAI,SAAS;AAAA,MAC/B;AAAA,MACA;AAAA,MACA;AAAA,IACF,CAAC;AAKD,UAAM,cAAc,IAAI;AACxB,UAAM,WAAW,MAAM;AAEvB,WAAO,eAAe,aAAa,SAAS,iBAAiB,QAAQ;AAAA,EACvE;AAEA,aAAW,QAAQ,eAAgB,cAAc,SAAS;AACxD,8BAA0B,WAAW,CAAC;AAGtC,cAAU,WAAW,CAAC;AACtB,QAAI,CAAC,QAAQ,UAAU;AACrB,cAAQ,WAAW;AAAA,IACrB;AACA,QAAI,CAAC,QAAQ,SAAS;AACpB,cAAQ,UAAU,CAAC;AAAA,IACrB;AACA,QAAI,CAAC,QAAQ,OAAO;AAClB,cAAQ,QAAQ,CAAC;AAAA,IACnB;AACA,UAAM,iBAAiB,CAAC,SAAS,UAAU,QAAQ;AACnD,QAAI,eAAe,QAAQ,QAAQ,QAAQ,IAAI,GAAG;AAChD,YAAM,IAAI;AAAA,QACR,4BAA4B,eAAe,KAAK,IAAI,YAAY,QAAQ;AAAA,MAC1E;AAAA,IACF;AAGA,QAAI,CAAC,QAAQ,MAAM,QAAQ;AACzB,YAAM,IAAI;AAAA,QACR,qEAAqE,WACnE,SACA,KAAK,EAAE,KAAK,GAAG;AAAA,MACnB;AAAA,IACF;AAEA,WAAO,WAAW,cAAc,SAAS,CAAC;AAAA,EAC5C;AAMA,QAAM,kBAAkB,cAAc,IAAI,+BAA+B;AACzE,MAAI,iBAAiB;AACnB,UAAM,mBAAmB,gBAAgB;AACzC,QAAI,OAAO,qBAAqB,YAAY;AAC1C,YAAM,IAAI;AAAA,QACR;AAAA,MAGF;AAAA,IACF;AACA,UAAM,UAAU,eAAe;AAC/B,UAAM,eAAe,QAAQ,QAAQ,iBAAiB,KAAK,UAAU,EAAE,OAAO,CAAC;AAC/E,qBAAiB,cAAc,IAAI;AAAA,EACrC;AAMA,SAAO,SAAS,KAAK,gBAAgB;AAEnC,UAAM,UAAU,eAAe;AAC/B,UAAM,OAAO,QAAQ,WAAW;AAChC,UAAMC,mBAAkB,cAAc,IAAI,IAAI;AAC9C,QAAI,CAACA,kBAAiB;AACpB,YAAM,IAAI,MAAM,oCAAoC,MAAM;AAAA,IAC5D;AAEA,UAAM,eAAeA,iBAAgB;AACrC,QAAI,OAAO,iBAAiB,YAAY;AACtC,YAAM,IAAI;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,UAAM,MAAM,IAAI,QAAQ,MAAM;AAAA,MAC5B,OAAO;AAAA,QACL,IAAI;AAAA,MACN;AAAA,IACF,CAAC;AAID,UAAM,eAAe,QAAQ,QAAQ,aAAa,KAAK,UAAU,EAAE,KAAK,OAAO,CAAC;AAChF,qBAAiB,cAAc,KAAK;AAAA,EACtC;AAEA,WAAS,iBAAiB,cAAc,kBAAkB;AAExD,QAAI,0BAA0B;AAC9B,UAAM,YAAY,UAAU,mBAAmB,mBAAmB;AAClE,SAAK,eAAe,GAAG,0BAA0B;AAEjD,iBACG,KAAK,OAAM,aAAY;AACtB,UAAI,kBAAkB;AAEpB,YAAI,aAAa,QAAW;AAC1B,eAAK,eAAe,GAAG,8DAA8D;AACrF,gBAAM,IAAI;AAAA,YACR,yEAAyE,OAAO;AAAA,UAClF;AAAA,QACF;AACA,aAAK,eAAe,GAAG,8CAA8C;AAAA,MACvE,OAAO;AAEL,YAAI,EAAE,oBAAoB,WAAW;AACnC,eAAK,eAAe,GAAG,8DAA8D;AACrF,gBAAM,IAAI;AAAA,YACR,mGAAmG,OAAO;AAAA,UAC5G;AAAA,QACF;AAEA,aAAK,eAAe,GAAG,4DAA4D;AACnF,cAAM,SAAS,cAAc;AAAA,MAC/B;AAAA,IACF,CAAC,EACA,MAAM,SAAO;AAOZ,4BAAsB;AAAA,IACxB,CAAC,EACA,QAAQ,MAAM;AACb,gCAA0B;AAAA,IAC5B,CAAC;AAMH,aAAS,mBAAmB;AAC1B,aAAO,2BAA2B,8BAA8B;AAAA,IAClE;AASA,WAAO,iBAAiB,GAAG;AACzB,WAAK,eAAe,GAAG,oCAAoC;AAM3D,cAAQ,gBAAgB;AAIxB,UAAI,qBAAqB;AACvB,cAAM,MAAM;AACZ,8BAAsB;AACtB,cAAM;AAAA,MACR;AAEA,UAAI,gBAAgB,OAAO,GAAG;AAE5B,cAAM,CAAC,aAAa,QAAQ,mBAAmB,IAAI,KAAK,yBAAyB;AAEjF,aAAK;AAAA,UACH,GAAG,kDAAkD,wBAAwB,gCAAgC;AAAA,QAC/G;AAGA,cAAM,gBAAgB,gBAAgB,IAAI,MAAM;AAChD,YAAI,CAAC,eAAe;AAClB,gBAAM,IAAI,MAAM,GAAG,oCAAoC,QAAQ;AAAA,QACjE;AACA,wBAAgB,OAAO,MAAM;AAI7B,cAAM,EAAE,SAAS,OAAO,IAAI;AAC5B,YAAI,aAAa;AACf,eAAK,eAAe,GAAG,4BAA4B;AACnD,gBAAM,OAAO,IAAI,SAAS,MAAM;AAAA,YAC9B,OAAO;AAAA,cACL,IAAI;AAAA,YACN;AAAA,UACF,CAAC;AACD,kBAAQ,IAAI;AAAA,QACd,OAAO;AACL,eAAK,eAAe,GAAG,iCAAiC;AACxD,gBAAM,MAAM,IAAI,cAAc,mBAAmB;AACjD,iBAAO,GAAG;AAAA,QACZ;AAAA,MACF;AAAA,IACF;AACA,SAAK,eAAe,GAAG,+BAA+B;AAAA,EACxD;AACF;",
  "names": ["exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "options", "getEdgeFunction"]
}
