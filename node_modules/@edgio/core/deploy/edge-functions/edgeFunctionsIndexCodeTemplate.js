"use strict";var re=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var Me=re((nn,bt)=>{"use strict";bt.exports={STDOUT_FD:1,STDERR_FD:2,ENV_VAR_NAMESPACE_EDGIO_CONFIG:"edgio-config",ENV_VAR_NAMESPACE_EDGIO_ORIGINS:"edgio-origins",ENV_VAR_NAMESPACE_EDGIO_PROPENVVAR:"edgio-property-environment-variables",ENV_VAR_NAMESPACE_EDGIO_FEATURE_FLAGS:"edgio-feature-flags",ENV_VAR_NAMESPACE_EDGIO_USRVAR:"edgio-usrvar",ENV_VAR_NAMESPACE_EDGIO_GEO:"edgio-geo",ENV_VAR_NAMESPACE_EDGIO_WURFL:"edgio-wurfl",ENV_VAR_NAMESPACE_EDGIO_VIRT:"edgio-virt",UTF_8:"utf-8",WASM_METRIC_JSON_PARSE_INVOCATION_TOTAL:1e3,WASM_METRIC_JSON_STRINGIFY_INVOCATION_TOTAL:1001,WASM_METRIC_JSON_PARSE_MICROSECONDS_TOTAL:1002,WASM_METRIC_JSON_STRINGIFY_MICROSECONDS_TOTAL:1003,WASM_METRIC_TEXT_ENCODE_INVOCATION_TOTAL:1004,WASM_METRIC_TEXT_DECODE_INVOCATION_TOTAL:1005,WASM_METRIC_TEXT_ENCODE_MICROSECONDS_TOTAL:1006,WASM_METRIC_TEXT_DECODE_MICROSECONDS_TOTAL:1007,INTERNAL_ERROR_PREFIX:"Internal Error: "}});var Re=re((on,Et)=>{"use strict";Et.exports={AppendFn:Symbol("append-fn"),Body:Symbol("body"),BodyOnHost:Symbol("body-on-host"),BodyReadOffset:Symbol("body-read-offset"),BodyUsed:Symbol("body-used"),CheckFn:Symbol("check-fn"),Chunks:Symbol("Chunks"),Controller:Symbol("Controller"),Done:Symbol("Done"),EdgioId:Symbol("edgio-id"),Encoding:Symbol("encoding"),ErrorCode:Symbol("error-code"),ErrorState:Symbol("error-state"),GetBodyChunkFn:Symbol("get-body-chunk-fn"),GetFn:Symbol("get-fn"),KeysFn:Symbol("keys-fn"),MoveBodyToHost:Symbol("move-body-to-host"),Namespace:Symbol("namespace"),Options:Symbol("options"),Origins:Symbol("edgio-origins"),PendingNextPromise:Symbol("PendingNextPromise"),PendingNextPromiseReject:Symbol("PendingNextPromiseReject"),PendingNextPromiseResolve:Symbol("PendingNextPromiseResolve"),QueuingStrategy:Symbol("QueuingStrategy"),Redirected:Symbol("redirected"),RemoveFn:Symbol("remove-fn"),ReqOrRespObject:Symbol("req-or-resp-object"),ReqRespHeaders:Symbol("req-resp-headers"),RequestObject:Symbol("request-object"),ResponseObject:Symbol("response-object"),SendToClient:Symbol("send-to-client"),SetFn:Symbol("set-fn"),Stream:Symbol("Stream"),UnderlyingSource:Symbol("UnderlyingSource"),Url:Symbol("url")}});var Vt=re((sn,Dt)=>{"use strict";var wr=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),Sr=wr(()=>{}),Je=typeof Map=="function"&&Map.prototype,Pe=Object.getOwnPropertyDescriptor&&Je?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Ae=Je&&Pe&&typeof Pe.get=="function"?Pe.get:null,wt=Je&&Map.prototype.forEach,Xe=typeof Set=="function"&&Set.prototype,De=Object.getOwnPropertyDescriptor&&Xe?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Oe=Xe&&De&&typeof De.get=="function"?De.get:null,St=Xe&&Set.prototype.forEach,Rr=typeof WeakMap=="function"&&WeakMap.prototype,ce=Rr?WeakMap.prototype.has:null,Tr=typeof WeakSet=="function"&&WeakSet.prototype,le=Tr?WeakSet.prototype.has:null,Ar=typeof WeakRef=="function"&&WeakRef.prototype,Rt=Ar?WeakRef.prototype.deref:null,Or=Boolean.prototype.valueOf,Ir=Object.prototype.toString,Nr=Function.prototype.toString,vr=String.prototype.match,Ke=String.prototype.slice,F=String.prototype.replace,xr=String.prototype.toUpperCase,Tt=String.prototype.toLowerCase,kt=RegExp.prototype.test,At=Array.prototype.concat,v=Array.prototype.join,qr=Array.prototype.slice,Ot=Math.floor,Be=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Ve=Object.getOwnPropertySymbols,Ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ne=typeof Symbol=="function"&&typeof Symbol.iterator=="object",S=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ne?"object":"symbol")?Symbol.toStringTag:null,Ft=Object.prototype.propertyIsEnumerable,It=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(n){return n.__proto__}:null);function Nt(n,t){if(n===1/0||n===-1/0||n!==n||n&&n>-1e3&&n<1e3||kt.call(/e/,t))return t;var s=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof n=="number"){var u=n<0?-Ot(-n):Ot(n);if(u!==n){var f=String(u),c=Ke.call(t,f.length+1);return F.call(f,s,"$&_")+"."+F.call(F.call(c,/([0-9]{3})/g,"$&_"),/_$/,"")}}return F.call(t,s,"$&_")}var He=Sr(),vt=He.custom,xt=jt(vt)?vt:null;Dt.exports=function n(t,s,u,f){var c=s||{};if(k(c,"quoteStyle")&&c.quoteStyle!=="single"&&c.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(k(c,"maxStringLength")&&(typeof c.maxStringLength=="number"?c.maxStringLength<0&&c.maxStringLength!==1/0:c.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var w=k(c,"customInspect")?c.customInspect:!0;if(typeof w!="boolean"&&w!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(k(c,"indent")&&c.indent!==null&&c.indent!=="	"&&!(parseInt(c.indent,10)===c.indent&&c.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(k(c,"numericSeparator")&&typeof c.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var g=c.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return Pt(t,c);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var y=String(t);return g?Nt(t,y):y}if(typeof t=="bigint"){var O=String(t)+"n";return g?Nt(t,O):O}var oe=typeof c.depth>"u"?5:c.depth;if(typeof u>"u"&&(u=0),u>=oe&&oe>0&&typeof t=="object")return Ue(t)?"[Array]":"[Object]";var C=Kr(c,u);if(typeof f>"u")f=[];else if(Mt(f,t)>=0)return"[Circular]";function R(x,h,ge){if(h&&(f=qr.call(f),f.push(h)),ge){var Y={depth:c.depth};return k(c,"quoteStyle")&&(Y.quoteStyle=c.quoteStyle),n(x,Y,u+1,f)}return n(x,c,u+1,f)}if(typeof t=="function"&&!qt(t)){var de=Vr(t),_e=Te(t,R);return"[Function"+(de?": "+de:" (anonymous)")+"]"+(_e.length>0?" { "+v.call(_e,", ")+" }":"")}if(jt(t)){var M=ne?F.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Ge.call(t);return typeof t=="object"&&!ne?ae(M):M}if(Wr(t)){for(var P="<"+Tt.call(String(t.nodeName)),se=t.attributes||[],K=0;K<se.length;K++)P+=" "+se[K].name+"="+$t(Cr(se[K].value),"double",c);return P+=">",t.childNodes&&t.childNodes.length&&(P+="..."),P+="</"+Tt.call(String(t.nodeName))+">",P}if(Ue(t)){if(t.length===0)return"[]";var ie=Te(t,R);return C&&!Xr(ie)?"["+We(ie,C)+"]":"[ "+v.call(ie,", ")+" ]"}if(Fr(t)){var z=Te(t,R);return!("cause"in Error.prototype)&&"cause"in t&&!Ft.call(t,"cause")?"{ ["+String(t)+"] "+v.call(At.call("[cause]: "+R(t.cause),z),", ")+" }":z.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+v.call(z,", ")+" }"}if(typeof t=="object"&&w){if(xt&&typeof t[xt]=="function"&&He)return He(t,{depth:oe-u});if(w!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(Lr(t)){var pe=[];return wt&&wt.call(t,function(x,h){pe.push(R(h,t,!0)+" => "+R(x,t))}),Ct("Map",Ae.call(t),pe,C)}if(Hr(t)){var D=[];return St&&St.call(t,function(x){D.push(R(x,t))}),Ct("Set",Oe.call(t),D,C)}if(Br(t))return Le("WeakMap");if(Ur(t))return Le("WeakSet");if(Gr(t))return Le("WeakRef");if(jr(t))return ae(R(Number(t)));if(Pr(t))return ae(R(Be.call(t)));if(Mr(t))return ae(Or.call(t));if($r(t))return ae(R(String(t)));if(!kr(t)&&!qt(t)){var Q=Te(t,R),m=It?It(t)===Object.prototype:t instanceof Object||t.constructor===Object,V=t instanceof Object?"":"null prototype",I=!m&&S&&Object(t)===t&&S in t?Ke.call($(t),8,-1):V?"Object":"",T=m||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",A=T+(I||V?"["+v.call(At.call([],I||[],V||[]),": ")+"] ":"");return Q.length===0?A+"{}":C?A+"{"+We(Q,C)+"}":A+"{ "+v.call(Q,", ")+" }"}return String(t)};function $t(n,t,s){var u=(s.quoteStyle||t)==="double"?'"':"'";return u+n+u}function Cr(n){return F.call(String(n),/"/g,"&quot;")}function Ue(n){return $(n)==="[object Array]"&&(!S||!(typeof n=="object"&&S in n))}function kr(n){return $(n)==="[object Date]"&&(!S||!(typeof n=="object"&&S in n))}function qt(n){return $(n)==="[object RegExp]"&&(!S||!(typeof n=="object"&&S in n))}function Fr(n){return $(n)==="[object Error]"&&(!S||!(typeof n=="object"&&S in n))}function $r(n){return $(n)==="[object String]"&&(!S||!(typeof n=="object"&&S in n))}function jr(n){return $(n)==="[object Number]"&&(!S||!(typeof n=="object"&&S in n))}function Mr(n){return $(n)==="[object Boolean]"&&(!S||!(typeof n=="object"&&S in n))}function jt(n){if(ne)return n&&typeof n=="object"&&n instanceof Symbol;if(typeof n=="symbol")return!0;if(!n||typeof n!="object"||!Ge)return!1;try{return Ge.call(n),!0}catch{}return!1}function Pr(n){if(!n||typeof n!="object"||!Be)return!1;try{return Be.call(n),!0}catch{}return!1}var Dr=Object.prototype.hasOwnProperty||function(n){return n in this};function k(n,t){return Dr.call(n,t)}function $(n){return Ir.call(n)}function Vr(n){if(n.name)return n.name;var t=vr.call(Nr.call(n),/^function\s*([\w$]+)/);return t?t[1]:null}function Mt(n,t){if(n.indexOf)return n.indexOf(t);for(var s=0,u=n.length;s<u;s++)if(n[s]===t)return s;return-1}function Lr(n){if(!Ae||!n||typeof n!="object")return!1;try{Ae.call(n);try{Oe.call(n)}catch{return!0}return n instanceof Map}catch{}return!1}function Br(n){if(!ce||!n||typeof n!="object")return!1;try{ce.call(n,ce);try{le.call(n,le)}catch{return!0}return n instanceof WeakMap}catch{}return!1}function Gr(n){if(!Rt||!n||typeof n!="object")return!1;try{return Rt.call(n),!0}catch{}return!1}function Hr(n){if(!Oe||!n||typeof n!="object")return!1;try{Oe.call(n);try{Ae.call(n)}catch{return!0}return n instanceof Set}catch{}return!1}function Ur(n){if(!le||!n||typeof n!="object")return!1;try{le.call(n,le);try{ce.call(n,ce)}catch{return!0}return n instanceof WeakSet}catch{}return!1}function Wr(n){return!n||typeof n!="object"?!1:typeof HTMLElement<"u"&&n instanceof HTMLElement?!0:typeof n.nodeName=="string"&&typeof n.getAttribute=="function"}function Pt(n,t){if(n.length>t.maxStringLength){var s=n.length-t.maxStringLength,u="... "+s+" more character"+(s>1?"s":"");return Pt(Ke.call(n,0,t.maxStringLength),t)+u}var f=F.call(F.call(n,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Jr);return $t(f,"single",t)}function Jr(n){var t=n.charCodeAt(0),s={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return s?"\\"+s:"\\x"+(t<16?"0":"")+xr.call(t.toString(16))}function ae(n){return"Object("+n+")"}function Le(n){return n+" { ? }"}function Ct(n,t,s,u){var f=u?We(s,u):v.call(s,", ");return n+" ("+t+") {"+f+"}"}function Xr(n){for(var t=0;t<n.length;t++)if(Mt(n[t],`
`)>=0)return!1;return!0}function Kr(n,t){var s;if(n.indent==="	")s="	";else if(typeof n.indent=="number"&&n.indent>0)s=v.call(Array(n.indent+1)," ");else return null;return{base:s,prev:v.call(Array(t+1),s)}}function We(n,t){if(n.length===0)return"";var s=`
`+t.prev+t.base;return s+v.call(n,","+s)+`
`+t.prev}function Te(n,t){var s=Ue(n),u=[];if(s){u.length=n.length;for(var f=0;f<n.length;f++)u[f]=k(n,f)?t(n[f],n):""}var c=typeof Ve=="function"?Ve(n):[],w;if(ne){w={};for(var g=0;g<c.length;g++)w["$"+c[g]]=c[g]}for(var y in n)!k(n,y)||s&&String(Number(y))===y&&y<n.length||ne&&w["$"+y]instanceof Symbol||(kt.call(/[^\w$]/,y)?u.push(t(y,n)+": "+t(n[y],n)):u.push(y+": "+t(n[y],n)));if(typeof Ve=="function")for(var O=0;O<c.length;O++)Ft.call(n,c[O])&&u.push("["+t(c[O])+"]: "+t(n[c[O]],n));return u}});var Bt=re((an,Lt)=>{"use strict";var{Chunks:X,Controller:Ie,Done:Ne,ErrorState:ue,PendingNextPromise:he,PendingNextPromiseReject:ze,PendingNextPromiseResolve:Qe,QueuingStrategy:zr,Stream:j,UnderlyingSource:Qr}=Re(),Yr=n=>(...t)=>new Promise((s,u)=>{try{s(n(...t))}catch(f){u(f)}}),Ye=class{constructor(t){this[j]=t}enqueue(t){this[j].push(t)}close(){this[j].push()}error(t){this[j].push(t)}},Ze=class{constructor(t){this[j]=t}enqueue(t){this[j].push(t)}close(){this[j].push()}error(t){this[j].push(t)}},et=class{constructor(t,s){this[Qr]=t,this[zr]=s,(t==null?void 0:t.type)==="bytes"?this[Ie]=new Ze(this):this[Ie]=new Ye(this),this[X]=[],this[Ne]=!1,this[ue]=null,t!=null&&t.start&&Yr(t.start)(this[Ie]).catch(u=>{this[Ie].error(u)})}get locked(){return!1}[Symbol.asyncIterator](){return this}async next(){if(this[he])throw new Error("Cannot call next() while a promise is pending from the previous call to next()");if(this[ue])throw this[ue];if(this[X].length>0){let t=this[X].shift();if(t.error)throw this[ue]=t.error,t.error;return t}return this[he]=new Promise((t,s)=>{this[Qe]=t,this[ze]=s}),this[he]}push(t){if(!this[Ne]&&(t===void 0?(this[X].push({done:!0}),this[Ne]=!0):t instanceof Error?(this[X].push({error:t,done:!0}),this[Ne]=!0):this[X].push({value:t,done:!1}),this[he])){this[he]=null;let s=this[Qe];this[Qe]=null;let u=this[ze];this[ze]=null;let f=this[X].shift();f.error?(this[ue]=f.error,u(f.error)):s(f)}}};Lt.exports={ReadableStream:et}});var Xt=re((fn,Jt)=>{"use strict";var{BodyReadOffset:tt,Done:fe,EdgioId:Gt,GetBody:Ht,GetBodyChunkFn:Ut,MoveBodyToHost:Zr,ReqOrRespObject:ve,BodyUsed:en}=Re(),{INTERNAL_ERROR_PREFIX:Wt}=Me();function tn({host:n,feature_flags:t}){let s,u;if(t&&t["body-chunk-hostcalls"]){class c{static MAX_CHUNK_SIZE=64*1024;constructor(g,y){if(this.constructor==c)throw new Error(`${Wt}EdgioReadableStreamReader Abstract class cannot be instantiated directly.`);this[ve]=g,this[Ut]=y,this[fe]=!1,this[tt]=0}async read(){if(this[fe])return{value:void 0,done:!0};await this[ve][Zr](),this[ve][en]=!0;let g=this[Ut](this[ve].edgioId,this[tt],c.MAX_CHUNK_SIZE);return g===void 0?(this[fe]=!0,{value:void 0,done:!0}):(this[tt]+=g.byteLength,{value:new Uint8Array(g),done:!1})}}return s=class extends c{constructor(g){super(g,n.hostcall_resp_get_body_chunk)}},u=class extends c{constructor(g){super(g,n.hostcall_req_get_body_chunk)}},{EdgioReadableStreamReader:c,EdgioReadableResponseStreamReader:s,EdgioReadableRequestStreamReader:u}}else{class c{static BUFFER_SIZE=1024;constructor(g,y){if(this.constructor==c)throw new Error(`${Wt}EdgioReadableStreamReader Abstract class cannot be instantiated directly.`);this[Gt]=g,this[Ht]=y,this[fe]=!1}async read(){let g=new Uint8Array(this[Ht](this[Gt]));return this[fe]=!0,{value:g}}}s=class extends c{constructor(g){super(g,n.hostcall_resp_get_body)}},u=class extends c{constructor(g){super(g,n.hostcall_req_get_body)}}}return{EdgioReadableResponseStreamReader:s,EdgioReadableRequestStreamReader:u}}Jt.exports=tn});var Qt=re((gn,zt)=>{"use strict";zt.exports=function(n,t){let{host:s,utility:u,feature_flags:f}=n,{STDOUT_FD:c,STDERR_FD:w,ENV_VAR_NAMESPACE_EDGIO_CONFIG:g,ENV_VAR_NAMESPACE_EDGIO_ORIGINS:y,ENV_VAR_NAMESPACE_EDGIO_PROPENVVAR:O,ENV_VAR_NAMESPACE_EDGIO_FEATURE_FLAGS:oe,ENV_VAR_NAMESPACE_EDGIO_USRVAR:C,ENV_VAR_NAMESPACE_EDGIO_GEO:R,ENV_VAR_NAMESPACE_EDGIO_WURFL:de,ENV_VAR_NAMESPACE_EDGIO_VIRT:_e,UTF_8:M,WASM_METRIC_JSON_PARSE_INVOCATION_TOTAL:P,WASM_METRIC_JSON_STRINGIFY_INVOCATION_TOTAL:se,WASM_METRIC_JSON_PARSE_MICROSECONDS_TOTAL:K,WASM_METRIC_JSON_STRINGIFY_MICROSECONDS_TOTAL:ie,WASM_METRIC_TEXT_ENCODE_INVOCATION_TOTAL:z,WASM_METRIC_TEXT_DECODE_INVOCATION_TOTAL:pe,WASM_METRIC_TEXT_ENCODE_MICROSECONDS_TOTAL:D,WASM_METRIC_TEXT_DECODE_MICROSECONDS_TOTAL:Q,INTERNAL_ERROR_PREFIX:m}=Me(),{AppendFn:V,Body:I,BodyOnHost:T,BodyUsed:A,CheckFn:x,EdgioId:h,Encoding:ge,ErrorCode:Y,GetFn:xe,KeysFn:rt,MoveBodyToHost:Z,Namespace:qe,Options:E,Origins:ye,Redirected:L,RemoveFn:nt,ReqRespHeaders:N,RequestObject:ot,ResponseObject:st,SendToClient:it,SetFn:at,Url:B}=Re(),Yt=f&&f["body-chunk-hostcalls"],Zt=f&&f["eapps-409-fetch-options"],er=f&&f["eapps-533-init-clear-hostcall"],tr=f&&f["eapps-563-fetch-tag-upsert"],rr=f&&f["eapps-552-html-transformer"],nr=U(oe),G=!1;try{G=nr.has("metrics-text-encoding")}catch{}let ct=Vt(),me=0,lt=2,or=()=>" ".repeat(me);function sr(o,...e){if(o(or()),e.length>0){let r=e[0];typeof r=="string"&&(e.shift(),r=r.replace(/%[oOdisf]/g,i=>{if(e.length===0)return i;let a=e.shift();switch(i){case"%o":case"%O":return ct(a);case"%d":case"%i":return parseInt(a,10).toString();case"%s":return a.toString();case"%f":return parseFloat(a).toString();default:return i}}),e.unshift(r))}for(let r=0;r<e.length;r++){r!==0&&o(" ");let i=e[r],a=typeof i;switch(a){case"string":o(i);break;case"number":case"function":o(i.toString());break;case"boolean":o(i?"true":"false");break;case"undefined":o(a);break;default:o(i===null?"null":ct(i));break}}o(`
`)}function H(o,...e){let r=u.stream_write_all.bind(this,o);try{return sr(r,...e)}catch(i){r("Exception during console output: "),r(i.toString()),r(`
`)}}let be=new Map;globalThis.console={assert:function(o,...e){o||H(w,"Assertion failed:",...e)},clear:function(){},count:function(o){be.set(o,(be.get(o)||0)+1),globalThis.console.log(`${o}: ${be.get(o)}`)},countReset:function(o){be.set(o,0)},debug:H.bind(globalThis.console,c),dir:function(...o){return globalThis.console.log(...o)},dirxml:function(...o){return globalThis.console.log(...o)},error:H.bind(globalThis.console,w),group:function(...o){o!==void 0&&globalThis.console.log(...o),me+=lt},groupCollapsed:function(...o){return globalThis.console.group(...o)},groupEnd:function(){me=Math.max(me-lt,0)},info:H.bind(globalThis.console,c),log:H.bind(globalThis.console,c),profile:function(){},table:function(o,e){return globalThis.console.warn("table not implemented",o,e)},time:function(){},timeEnd:function(o){return globalThis.console.warn("timeEnd not implemented",o)},timeLog:function(o){return globalThis.console.warn("timeLog not implemented",o)},timeStamp:function(){},trace:H.bind(globalThis.console,c),warn:H.bind(globalThis.console,w)};let{ReadableStream:Ce}=Bt();globalThis.ReadableStream=Ce;let{EdgioReadableResponseStreamReader:ir,EdgioReadableRequestStreamReader:ar}=Xt()(n);class cr{constructor(e){this[st]=e}getReader(){return new ir(this[st])}}class lr{constructor(e){this[ot]=e}getReader(){return new ar(this[ot])}}class ee{constructor(e,r,{appendFn:i,checkFn:a,getFn:l,keysFn:_,removeFn:d,setFn:b}){if(this.constructor==ee)throw new Error(`${m}Headers Abstract class cannot be instantiated directly.`);if(this[h]=e,this[V]=i,this[x]=a,this[xe]=l,this[rt]=_,this[nt]=d,this[at]=b,Array.isArray(r))r.forEach(p=>{if(!Array.isArray(p))throw new Error(`When passing an array of headers, each array element must be an array of length = 2. '${p}' is type '${typeof p}' not type array.`);if(p.length!==2)throw new Error(`When passing an array of headers, each array element must be an array of length = 2. '${p}' is array of length ${p.length}.`);s.hostcall_debug(`.append(${p})`),this.append(p[0],p[1])});else if(r&&r instanceof Headers){let p=r.getRaw();Object.keys(p).forEach(q=>{p[q].forEach(W=>{this.append(q,W)})})}else if(r&&r instanceof ee)for(let p of r.keys())for(let q of r._getValuesForKey(p))this.append(p,q);else{if(r&&Function.prototype.toString.call(r.constructor).match(/class.*/))throw new Error(`'headers' must be a 'Headers' instance, dictionary, or an array of array pairs. Found ${Function.prototype.toString.call(r.constructor)}`);if(typeof r=="object")Object.keys(r).forEach(p=>{this.append(p,r[p])});else if(r!==void 0)throw new Error(`'headers' must be a dictionary or an array of array pairs. Found type ${typeof r}.`)}}_validateName(e){if(e===void 0)throw new Error("The 'name' argument is required, but was not present.");if(typeof e!="string")throw new Error(`The 'name' argument must be a 'string' type, not a '${typeof e}' type.`);return e}_validateValue(e){if(e===void 0)throw new Error("The 'value' argument is required, but was not present.");if(typeof e!="string"&&!Array.isArray(e))throw new Error(`The 'value' argument must be a 'string' or 'array' type, not a '${typeof e}' type.`);return e}append(e,r){if(r!=null)if(Array.isArray(r))for(let i of r)this[V](this[h],this._validateName(e),this._validateValue(i));else this[V](this[h],this._validateName(e),this._validateValue(r))}delete(e){this[nt](this[h],this._validateName(e))}entries(){let e=[];for(let r of this.keys())e.push([r,this.get(r)]);return e}forEach(e){for(let r of this.keys())e(this.get(r),r)}get(e){let r=this[xe](this[h],this._validateName(e));return Array.isArray(r)?r.join(", "):r===void 0?null:r}_getValuesForKey(e){let r=this[xe](this[h],this._validateName(e));return r??[]}getSetCookie(){return this._getValuesForKey("set-cookie")}has(e){return this[x](this[h],this._validateName(e))}keys(){return this[rt](this[h])}set(e,r){r!=null&&this[at](this[h],this._validateName(e),this._validateValue(r))}values(){let e=[];for(let r of this.keys())e.push(this.get(r));return e}toJSON(){let e={};for(let r of this.keys())e[r]=this.get(r);return e}}class ke extends ee{constructor(e,r){super(e,r,{appendFn:s.hostcall_resp_append_header,checkFn:s.hostcall_resp_check_header,getFn:s.hostcall_resp_get_header_values,keysFn:u.resp_get_header_names,removeFn:s.hostcall_resp_remove_header,setFn:s.hostcall_resp_set_header})}}class Fe extends ee{constructor(e,r){super(e,r,{appendFn:s.hostcall_req_append_header,checkFn:s.hostcall_req_check_header,getFn:s.hostcall_req_get_header_values,keysFn:u.req_get_header_names,removeFn:s.hostcall_req_remove_header,setFn:s.hostcall_req_set_header})}}class ur{constructor(){this._headers={}}appendFn=(e,r,i)=>{this._headers[r]||(this._headers[r]=[]),this._headers[r].push(i)};checkFn=(e,r)=>!!this._headers[r];getFn=(e,r)=>this._headers[r]?this._headers[r]:null;getRawFn=()=>this._headers;keysFn=e=>Object.keys(this._headers);removeFn=(e,r)=>{delete this._headers[r]};setFn=(e,r,i)=>{this._headers[r]=[i]}}globalThis.Headers=class extends ee{constructor(e){let r=new ur;super(0,e,{appendFn:r.appendFn.bind(r),checkFn:r.checkFn.bind(r),getFn:r.getFn.bind(r),keysFn:r.keysFn.bind(r),removeFn:r.removeFn.bind(r),setFn:r.setFn.bind(r)}),this._headersInstance=r}getRaw=()=>this._headersInstance.getRawFn()},globalThis.Request=class{constructor(o,e){var l,_,d;if(this[E]=e||{},this[A]=!1,typeof((l=e==null?void 0:e.edgio)==null?void 0:l.id)=="number"){this[h]=(_=e==null?void 0:e.edgio)==null?void 0:_.id,this[N]=new Fe(this[h]),this[T]=!0;return}if(typeof o!="string")throw new Error(`"string" type is accepted for the input parameter, not '${typeof o}'`);let r=o;if(this[E].method!==void 0&&typeof this[E].method!="string")throw new Error(`options.method must be type 'undefined' or 'string', not '${typeof this[E].method}'`);let i=this[E].method||"GET";this[h]=s.hostcall_req_create(i,r),this[N]=new Fe(this[h],((d=this[E])==null?void 0:d.headers)||{});let a=this[E].body;delete this[E].body,this[A]=!1,a&&(this[I]=a),this[T]=!1}blob(){throw new Error(`${m}The 'blob' method is not supported by the Request class.`)}get body(){let o=this.method;return o==="GET"||o==="HEAD"?null:new lr(this)}get bodyUsed(){return this[A]}get cache(){throw new Error(`${m}The 'cache' property is not supported by the Request class.`)}get credentials(){throw new Error(`${m}The 'credentials' property is not supported by the Request class.`)}clone(){throw new Error(`${m}The 'clone' method is not supported by the Request class.`)}get destination(){throw new Error(`${m}The 'destination' property is not supported by the Request class.`)}formData(){throw new Error(`${m}The 'formData' method is not supported by the Request class.`)}get headers(){return this[N]}get integrity(){throw new Error(`${m}The 'integrity' property is not supported by the Request class.`)}get method(){return s.hostcall_req_get_method(this[h])}set method(o){return s.hostcall_req_set_method(this[h],o)}get mode(){throw new Error(`${m}The 'mode' property is not supported by the Request class.`)}get redirect(){throw new Error(`${m}The 'redirect' property is not supported by the Request class.`)}get referrer(){throw new Error(`${m}The 'referrer' property is not supported by the Request class.`)}get referrerPolicy(){throw new Error(`${m}The 'referrerPolicy' property is not supported by the Request class.`)}get signal(){throw new Error(`${m}The 'signal' property is not supported by the Request class.`)}async arrayBuffer(){return await this[Z](),this[A]=!0,s.hostcall_req_get_body(this[h])}async text(){let o=await this.arrayBuffer();return o.byteLength===0?"":new TextDecoder(M).decode(o)}async json(){return JSON.parse(await this.text())}get url(){return s.hostcall_req_get_uri(this[h])}set url(o){return s.hostcall_req_set_uri(this[h],o)}get path(){return s.hostcall_req_get_path(this[h])}get edgioId(){return this[h]}toJSON(){return{method:this.method,url:this.url,headers:this.headers}}cloneWithoutBody(){let o=s.hostcall_req_clone_without_body(this[h]),e=new Request(null,{edgio:{id:o}});return this[N]=new Fe(o),e}async[Z](){if(this[T])return;let o=this[I];if(o){if(this.method==="GET"||this.method==="HEAD")throw new Error("Request with GET/HEAD method cannot have body.");let e=this[h];if(typeof o=="string")s.hostcall_debug(`new Request(${e}, string: ${o})`),s.hostcall_req_set_body_from_string(e,o);else if(o instanceof ArrayBuffer)s.hostcall_debug(`new Request(ArrayBuffer: len=${o.byteLength})`),s.hostcall_req_set_body_from_array_buffer(e,o);else if(ArrayBuffer.isView(o))s.hostcall_debug(`new Request(TypedArray: len=${o.byteLength})`),s.hostcall_req_set_body_from_array_buffer(e,o.buffer);else if(o instanceof Ce){s.hostcall_debug("new Request(ReadableStream)");for await(let r of o)if(typeof r=="string")s.hostcall_req_append_body_from_string(e,r);else if(r instanceof ArrayBuffer)s.hostcall_req_append_body_from_array_buffer(e,r);else if(ArrayBuffer.isView(r))s.hostcall_req_append_body_from_array_buffer(e,r.buffer);else if(r==null?void 0:r.toString())s.hostcall_req_append_body_from_string(e,r.toString());else throw new Error("new Request(ReadableStream: chunk is not string or ArrayBuffer)")}else s.hostcall_debug(`new Request(other: ${o.toString()})`),s.hostcall_req_set_body_from_string(e,o.toString())}this[I]=null,this[T]=!0}},globalThis.Response=class{constructor(o,e){var r,i,a;if(this[A]=!1,this[T]=!1,this[L]=!1,this[B]=null,typeof((r=e==null?void 0:e.edgio)==null?void 0:r.id)=="number"){this[h]=(i=e==null?void 0:e.edgio)==null?void 0:i.id,this[N]=new ke(this[h]),s.hostcall_debug(`_edgioNew Response: ${this[h]}`),this[T]=!0;return}if(e instanceof Response){let l=e.cloneWithoutBody();this[h]=l[h],this[N]=l[N],this[L]=l[L],this[B]=l[B]}else{if(this[E]=e||{},isNaN(this[E].status)&&(this[E].status=200),this[E].status<200||this[E].status>599||this[E].status===204||this[E].status===304)throw new Error(`The status provided ${this[E].status} must be >= 200 and <= 599, and not 204 or 304.`);this[h]=s.hostcall_resp_create(this[E].status),this[N]=new ke(this[h],((a=this[E])==null?void 0:a.headers)||{})}o&&(this[I]=o)}blob(){throw new Error(`${m}The 'blob' method is not supported by the Response class.`)}get body(){return this[T]||this[I]?new cr(this):null}get bodyUsed(){return this[A]}clone(){throw new Error(`${m}The 'clone' method is not supported by the Response class.`)}formData(){throw new Error(`${m}The 'formData' method is not supported by the Response class.`)}get headers(){return this[N]}async arrayBuffer(){return await this[Z](),this[A]=!0,s.hostcall_resp_get_body(this[h])}async text(){let o=await this.arrayBuffer();return o.byteLength===0?"":new TextDecoder(M).decode(o)}async json(){return JSON.parse(await this.text())}get ok(){let o=this.status;return o>=200&&o<300}static redirect(o,e){return new Response(void 0,{headers:{location:o},status:e||302})}set redirected(o){this[L]=o}get redirected(){return this[L]}get status(){return s.hostcall_resp_get_status(this[h])}get statusText(){return s.hostcall_resp_get_reason(this[h])}get type(){throw new Error(`${m}The 'type' property is not supported by the Response class.`)}get url(){return this[B]}get edgioId(){return this[h]}toJSON(){return{status:this.status,statusText:this.statusText,headers:this.headers}}cloneWithoutBody(){let o=s.hostcall_resp_clone_without_body(this[h]),e=new Response(null,{edgio:{id:o}});return e[B]=this[B],e[L]=this[L],e[N]=new ke(o),e}async[it](){await this[Z](),s.hostcall_resp_send_to_client(this.edgioId)}async[Z](){if(this[T])return;let o=this[I];if(o==null)return;let e=this[h];if(typeof o=="string")s.hostcall_debug(`new Response(string: ${o})`),s.hostcall_resp_set_body_from_string(e,o);else if(o instanceof ArrayBuffer)s.hostcall_debug(`new Response(ArrayBuffer: len=${o.byteLength})`),s.hostcall_resp_set_body_from_array_buffer(e,o);else if(ArrayBuffer.isView(o))s.hostcall_debug(`new Response(TypedArray: len=${o.byteLength})`),s.hostcall_resp_set_body_from_array_buffer(e,o.buffer);else if(o instanceof Ce){if(!Yt)throw new Error("ReadableStream is not supported by the Response class.");s.hostcall_debug("new Response(ReadableStream)");for await(let r of o)if(typeof r=="string")s.hostcall_resp_append_body_from_string(e,r);else if(r instanceof ArrayBuffer)s.hostcall_resp_append_body_from_array_buffer(e,r);else if(ArrayBuffer.isView(r))s.hostcall_resp_append_body_from_array_buffer(e,r.buffer);else if(r==null?void 0:r.toString())s.hostcall_resp_append_body_from_string(e,r.toString());else throw new Error("new Response(ReadableStream: chunk is not string or ArrayBuffer)")}else s.hostcall_debug(`new Response(other: ${o.toString()})`),s.hostcall_resp_set_body_from_string(e,o.toString());this[I]=null,this[T]=!0}};class hr extends Error{constructor(e){super(),this[Y]=e}get code(){return this[Y]}get message(){return s.hostcall_resp_get_error_code_message(this[Y])}toString(){return`${this.message} (code: ${this.code})`}}function U(o){let e={namespace:o};return new Proxy(e,{get(i,a){return a==="get"?function(l){return s.hostcall_dict_get(i.namespace,l)}:a==="getBase64Decoded"?function(l){return new Uint8Array(s.hostcall_dict_get_base64_decoded(i.namespace,l))}:a==="has"?function(l){return s.hostcall_dict_check(i.namespace,l)}:a==="keys"?function(){return u.dict_get_keys(i.namespace)}:s.hostcall_dict_get(i.namespace,a)},getOwnPropertyDescriptor(i,a){return{value:s.hostcall_dict_get(i.namespace,a),writable:!1,enumerable:!0,configurable:!0}},defineProperty(i,a,l){return!1},deleteProperty(i,a){return!1},has(i,a){return s.hostcall_dict_check(i.namespace,a)},ownKeys(i){return u.dict_get_keys(i.namespace)}})}class fr{constructor(e){this[qe]=e}has(e){return s.hostcall_unique_set_check(this[qe],e)}keys(){return u.unique_set_get_keys(this[qe])}toJSON(){return this.keys()}}class dr{startTimer(e){return s.hostcall_metrics_start_timer(e)}stopTimer(e){return s.hostcall_metrics_stop_timer(e)}add(e,r){return s.hostcall_metrics_add(e,r)}}function ut(o,e,r,...i){s.hostcall_metrics_add(o,1),s.hostcall_metrics_start_timer(e);try{return r(...i)}finally{s.hostcall_metrics_stop_timer(e)}}let _r=JSON.parse,pr=JSON.stringify;globalThis.JSON={parse:(...o)=>ut(P,K,_r,...o),stringify:(...o)=>ut(se,ie,pr,...o)},globalThis.module={},globalThis.__dirname="/",globalThis.__filename="/index.js",globalThis.global=globalThis,globalThis.require=o=>{throw new Error(`The Node.js function "require('${o}')" is not supported in edge-functions. Please refer to https://docs.edg.io/guides/v7/edge-functions#polyfills for more information.`)},rr&&(globalThis.HtmlTransformer=class Kt{constructor(e,r){this[h]=u.html_transformer_new(Kt.hook_callbacks(e),r)}async write(e){return new Promise((r,i)=>{try{r(u.html_transformer_write(this[h],e))}catch(a){i(a)}})}async end(){return new Promise((e,r)=>{try{e(u.html_transformer_end(this[h]))}catch(i){r(i)}})}static hook_callbacks(e){function r(i,a){return new Proxy({rawPtr:a},{get(l,_){return(...d)=>{let b=u.html_transformer_proxy(i,_.toString(),l.rawPtr,d);if(_==="start_tag"&&(b=r("start_tag",b)),_==="attributes")for(let p=0;p<b.length;p++)b[p]=r("attribute",b[p]);return b}}})}if(e&&Array.isArray(e))for(let i=0;i<e.length;i++){if(e[i].comment){let a=e[i].comment;e[i].comment=l=>a(r("comment",l))}if(e[i].element){let a=e[i].element;e[i].element=l=>a(r("element",l))}if(e[i].text){let a=e[i].text;e[i].text=l=>a(r("text",l))}if(e[i].doc_comment){let a=e[i].doc_comment;e[i].doc_comment=l=>a(r("comment",l))}if(e[i].doc_text){let a=e[i].doc_text;e[i].doc_text=l=>a(r("text",l))}if(e[i].doc_type){let a=e[i].doc_type;e[i].doc_type=l=>a(r("doc_type",l))}if(e[i].doc_end){let a=e[i].doc_end;e[i].doc_end=l=>a(r("doc_end",l))}}return e}}),globalThis.TextDecoder=class{constructor(e){this[ge]=e||M}get fatal(){return!1}set fatal(e){if(e)throw new Error("TextDecoder.fatal is not supported")}decode(e){try{if(G&&(s.hostcall_metrics_add(pe,1),s.hostcall_metrics_start_timer(Q)),!e)return"";let r=ArrayBuffer.isView(e)?e.buffer:e;if(!(r instanceof ArrayBuffer))throw new Error(`Decoding supported for ArrayBuffer, TypedArray and DataView, not ${typeof e}`);return u.text_decoder_decode(this[ge],r)}finally{G&&s.hostcall_metrics_stop_timer(Q)}}};function ht(o){switch(typeof o){case"undefined":return"";case"string":return o;default:return o===null?"null":o.toString()}}globalThis.TextEncoder=class{constructor(){}encode(e){try{G&&(s.hostcall_metrics_add(z,1),s.hostcall_metrics_start_timer(D));let r=ht(e);return typeof r!="string"?new Uint8Array(0):new Uint8Array(u.text_encoder_encode(r))}finally{G&&s.hostcall_metrics_stop_timer(D)}}encodeInto(e,r){try{if(G&&(s.hostcall_metrics_add(z,1),s.hostcall_metrics_start_timer(D)),!(r instanceof Uint8Array))throw new Error("TextEncoder.encodeInto requires an Uint8Array");let i=ht(e);return r.byteLength===0||typeof i!="string"?{read:0,written:0}:u.text_encoder_encode_into(i,r)}finally{G&&s.hostcall_metrics_stop_timer(D)}}get encoding(){return M}};let Ee=null,we=new Map,ft=0,dt=0;function gr(o,e){if(o.length!==e)throw new Error(`Expected ${e} arguments, got ${o.length}`)}function yr(o,e){if(o.length<e)throw new Error(`Expected at least ${e} arguments, got ${o.length}`)}function _t(){globalThis[ye]=new fr(y),globalThis.pump=e=>$e(e,!0);let o={systemVars:U(g),environmentVars:U(O),origins:globalThis[ye],requestVars:U(C),geo:U(R),device:U(de),client:U(_e),metrics:new dr,respondWith:function(){throw new Error("respondWith() has been replaced with `return <response>` from the edge function itself.")},waitUntil:function(e){gr(arguments,1),++ft,Promise.resolve(e).finally(()=>{++dt})}};return er&&(o.initClear=function(){s.hostcall_init_clear()}),o}function pt(o){let e=o.split("="),r=e[0].trim(),i=e[1];return{key:r,value:i}}function mr(o,e){let r={},i=o.headers.cookie;if(i){let _=i.split(";");for(let d=0;d<_.length;d++){let{key:b,value:p}=pt(_[d]);r[b]=p}}let a=e.headers.get("set-cookie")||[];Array.isArray(a)||(a=[a]);for(let _=0;_<a.length;_++){let{key:d,value:b}=pt(a[_].split(";")[0]);r[d]=b}let l=Object.keys(r);if(l.length>0){o.headers.cookie="";for(let _=0;_<l.length;_++){let d=l[_],b=r[d];o.headers.cookie+=`${d}=${b}${_<l.length-1?"; ":""}`}}}async function br(o,e,r,i){let a=i.headers.get("location");if([301,302,303,307,308].indexOf(i.status)<0||!a)return i[B]=o,i.redirected=r>0,i;let l=e.redirect;if(l==="error")throw new Error("redirect");return l==="manual"?i:(++r,mr(e,i),await gt(a,e,r))}async function gt(o,e,r){let i;if(o instanceof Request)i=o;else{if(typeof o!="string"){if(typeof o.toString!="function"||o.toString()==="[object Object]")throw new Error('Invalid "url" argument in fetch() function. The "url" argument must be a string, a Request object, or an object where toString() returns the url.');o=o.toString()}i=new Request(o,e)}if(!e.edgio||!e.edgio.origin)throw new Error(`edgio.origin must be included in the fetch options for ${o}`);await i[Z]();let a=e.edgio.origin;try{s.hostcall_req_set_fetch_origin(i.edgioId,a)}catch{throw new Error(`Invalid edgio.origin: "${a}". Must be one of: ${globalThis[ye].keys().join(", ")}`)}function l(te,J,Se){let je=te[J];if(je!==void 0){let mt=parseInt(je);if(isNaN(mt))throw new Error(`Invalid '${J}' value '${je}' specified. ${Se}`);return mt}}let _=l(e.edgio,"timeout","Expected timeout in milliseconds as an integer.");if(_!==void 0)try{s.hostcall_req_set_fetch_timeout(i.edgioId,_)}catch{throw new Error("Failed to set fetch timeout on request.")}let d=e.edgio.caching;if(Zt&&d){let te=d.bypass_cache;if(te!==void 0&&s.hostcall_req_set_fetch_bypass_cache(i.edgioId,!!te),d.cache_key_query_string){let J=d.cache_key_query_string.exclude_all;J!==void 0&&s.hostcall_req_set_fetch_ckqs_exclude_all(i.edgioId,!!J);let Se=d.cache_key_query_string.include_all;Se!==void 0&&s.hostcall_req_set_fetch_ckqs_include_all(i.edgioId,!!Se)}d.max_age!==void 0&&s.hostcall_req_set_fetch_max_age(i.edgioId,d.max_age.toString()),tr&&d.tags!==void 0&&s.hostcall_req_set_fetch_cache_tags(i.edgioId,d.tags.toString()),d.stale_while_revalidate!==void 0&&s.hostcall_req_set_fetch_stale_while_revalidate(i.edgioId,d.stale_while_revalidate.toString())}s.hostcall_req_fetch_async(i.edgioId);let b,p,q=new Promise((te,J)=>{b=te,p=J});we.set(i.edgioId,{promise:q,resolve:b,reject:p});let W=i.url,Er=await q;return br(W,e,r,Er)}globalThis.fetch=async function(o,e){yr(arguments,1),e=e||{},e.redirect||(e.redirect="follow"),e.headers||(e.headers={}),e.edgio||(e.edgio={});let r=["error","follow","manual"];if(r.indexOf(e.redirect)<0)throw new Error(`redirect must be one of "${r.join(", ")}", not "${e.redirect}"`);if(!e.edgio.origin)throw new Error(`edgio.origin must be specified as a fetch option. Must be one of: ${globalThis[ye].keys().join(",")}`);return gt(o,e,0)};let yt=t.get("__edge_function_init_script__");if(yt){let o=yt();if(typeof o!="function")throw new Error('Edge Initialization Function specified by Router option "edge_function_init_script" must have a named export "handleHttpInit". See https://docs.edg.io/guides/v7/edge-functions#defining-edge-functions for more information.');let e=_t(),r=Promise.resolve(o.bind(globalThis)(e));$e(r,!0)}return function(e){let r=_t(),i=r.systemVars.__EDGE_FUNCTION_PATH__,a=t.get(i);if(!a)throw new Error(`No edge function found for path: ${i}`);let l=a();if(typeof l!="function")throw new Error('Edge Function must have a named export "handleHttpRequest". See https://docs.edg.io/guides/v7/edge-functions#defining-edge-functions for more information.');let _=new Request(null,{edgio:{id:e}}),d=Promise.resolve(l.bind(globalThis)(_,r));$e(d,!1)};function $e(o,e){let r=!0,i=`sdk.js(${e?"handleHttpInit":"handleHttpRequest"}): `;s.hostcall_debug(`${i}start main loop`),o.then(async l=>{if(e){if(l!==void 0)throw s.hostcall_debug(`${i}return with non-undefined value, throwing exception`),new Error(`The handleHttpInit function must not return a value or a Promise (got ${typeof l})`);s.hostcall_debug(`${i}return with undefined (as expected)`)}else{if(!(l instanceof Response))throw s.hostcall_debug(`${i}return with non-Response object, throwing exception`),new Error(`The handleHttpRequest function must return a Response or a Promise resolving to a Response (got ${typeof l})`);s.hostcall_debug(`${i}return with response object, sending it to client`),await l[it]()}}).catch(l=>{Ee=l}).finally(()=>{r=!1});function a(){return r||dt<ft}for(;a();){if(s.hostcall_debug(`${i}Executing pending jobs...`),u.execute_pending(),Ee){let l=Ee;throw Ee=null,l}if(we.size>0){let[l,_,d]=s.hostcall_resp_await_next();s.hostcall_debug(`${i}hostcall_resp_await_next: is_response(${l}), req_id(${_}), resp_id_or_err_code(${d})`);let b=we.get(_);if(!b)throw new Error(`${i}No pending fetch for ID ${_}`);we.delete(_);let{resolve:p,reject:q}=b;if(l){s.hostcall_debug(`${i}creating Response`);let W=new Response(null,{edgio:{id:d}});p(W)}else{s.hostcall_debug(`${i}creating ResponseError`);let W=new hr(d);q(W)}}}s.hostcall_debug(`${i}no more pending jobs`)}}});module.exports=(()=>{let n=function(t,s){let c=Qt()(t,"__INSERT_EDGE_FUNCTIONS_MAP_HERE__");if(typeof c!="function")throw new Error("The SDK was not initialized correctly.");if(typeof t.version>"u"){if(typeof s!="number")throw new Error("The runtime object is missing both the version and the request ID.");c(s);return}return c};return n.version=2,n})();
//# sourceMappingURL=edgeFunctionsIndexCodeTemplate.js.map
