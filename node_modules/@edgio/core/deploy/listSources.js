"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const globby_1 = require("globby");
/**
 * Returns source files that should be added to the bundle based on:
 *
 *  - The `sources` property of edgio.config.js, or, if not present
 *  - Excluding gitignored files
 *
 * @param appDir The application root directory
 * @param sourcesConfig The value of the sources config in edgio.config.js
 * @private
 */
async function listSources(appDir, sourcesConfig) {
    // Exclude **/node_modules, not just node_modules, because when running in the
    // test xdn/packages/core test environment there are several sub-directories
    // that have a ./node_modules directory.
    const globs = (sourcesConfig || ['**/*']).concat('!**/node_modules', '!.env');
    return (0, globby_1.sync)(globs, { gitignore: true, cwd: appDir });
}
exports.default = listSources;
