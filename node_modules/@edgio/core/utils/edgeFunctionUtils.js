"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.containsEdgeFunctionFeature = exports.forEachFeature = exports.getEdgeFunctionFeatures = void 0;
/**
 * Returns an array containing all rules that contain the edge_function feature.
 * @param rules The router rules
 * @returns
 */
function getEdgeFunctionFeatures(rules) {
    const features = [];
    forEachFeature(rules, feature => {
        if (feature.edge_function) {
            features.push(feature);
        }
    });
    return features;
}
exports.getEdgeFunctionFeatures = getEdgeFunctionFeatures;
/**
 * Calls the specified callback for each feature in the rules array
 * @param rules The rules to traverse
 * @param callback The callback to call with each feature
 */
function forEachFeature(rules, callback) {
    if (Array.isArray(rules)) {
        for (let item of rules) {
            forEachFeature(item, callback);
        }
    }
    else if (typeof rules === 'object') {
        callback(rules);
        for (const key in rules) {
            forEachFeature(rules[key], callback);
        }
    }
}
exports.forEachFeature = forEachFeature;
/**
 * Returns true when specified rules contain
 * at least one edge_function feature.
 */
function containsEdgeFunctionFeature(rules) {
    return getEdgeFunctionFeatures(rules).length > 0;
}
exports.containsEdgeFunctionFeature = containsEdgeFunctionFeature;
