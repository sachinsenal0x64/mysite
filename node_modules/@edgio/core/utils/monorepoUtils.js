"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.findMonorepoRoot = void 0;
const fs_1 = require("fs");
const path_1 = require("path");
/**
 * Returns the path to root directory of the monorepo
 * or undefined if the current directory is not inside a monorepo
 */
function findMonorepoRoot(currentDir = process.cwd()) {
    while (currentDir !== '/') {
        const packageJsonPath = (0, path_1.resolve)(currentDir, 'package.json');
        if ((0, fs_1.existsSync)(packageJsonPath)) {
            const packageJson = JSON.parse((0, fs_1.readFileSync)(packageJsonPath, 'utf8'));
            if (packageJson === null || packageJson === void 0 ? void 0 : packageJson.workspaces)
                return currentDir;
        }
        currentDir = (0, path_1.resolve)(currentDir, '..');
    }
    return undefined;
}
exports.findMonorepoRoot = findMonorepoRoot;
